<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="css/carfilter.css"/>
    <link rel="stylesheet" href="../cartype/css/cartype.css"/>
    <link type="text/css" rel="stylesheet" href="http://sta.273.com.cn/app/wap_v2/theme/style.__1450915200__.css">
    <link rel="stylesheet" href="../../components/mobiscroll/css/mobiscroll.custom-2.16.1.min.css">
</head>
<body>
<div class="list-filter">
    <ul class="condi-list">
        <li class="condi-list-item default"><a class="item-default on" href="javascript:void(0);" data-273-click-log="/wap/list/menu@etype=click@menu=sort"><span>默认排序</span><i class="i-arrow-down"></i></a></li>
        <li class="condi-list-item price"><a style="white-space: nowrap;" class="item-price " href="javascript:void(0);" data-273-click-log="/wap/list/menu@etype=click@menu=price"><span>价格</span><i class="i-arrow-right"></i></a></li>
        <li class="condi-list-item brand"><a style="white-space: nowrap;" class="item-brand " href="javascript:void(0);" data-273-click-log="/wap/list/menu@etype=click@menu=brand"><span>品牌</span><i class="i-arrow-right"></i></a></li>
        <li style="padding-top:0;margin: 0;font-size: 1em;" class="condi-list-item otherlink"><a data-273-click-log="/wap/list/choice@etype=click" href="javascript:void(0);"><span>筛选</span><i class="i-arrow-right"></i></a></li>
    </ul>
    <div style="display: none;" class="down-list-box d">
        <ul style="height:auto;" class="down-list">
            <li class="down-list-item"><div class="link-box"><a class="on" data-273-click-log="/wap/list/sort@etype=click@sort=default" href="javascript:void(0);">默认排序</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="pa" data-273-click-log="/wap/list/sort@etype=click@sort=price_a" href="javascript:void(0);">价格最低</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="pd" data-273-click-log="/wap/list/sort@etype=click@sort=price_d" href="javascript:void(0);">价格最高</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="cd" data-273-click-log="/wap/list/sort@etype=click@sort=cardtime_d" href="javascript:void(0);">上牌最近</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="ca" data-273-click-log="/wap/list/sort@etype=click@sort=cardtime_a" href="javascript:void(0);">上牌最远</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="td" data-273-click-log="/wap/list/sort@etype=click@sort=pubtime_d" href="javascript:void(0);">最新发布</a></div></li>
        </ul>
    </div>
    <div style="display: none;" class="down-list-box p">
        <ul style="height:auto;" class="down-list">
            <li class="down-list-item"><div class="link-box"><a class="on" data-273-click-log="/wap/list/price@etype=click@price=default" href="javascript:void(0);">不限</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="1" data-273-click-log="/wap/list/price@etype=click@price=1" href="javascript:void(0);">3万以下</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="2" data-273-click-log="/wap/list/price@etype=click@price=2" href="javascript:void(0);">3-5万</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="3" data-273-click-log="/wap/list/price@etype=click@price=3" href="javascript:void(0);">5-10万</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="4" data-273-click-log="/wap/list/price@etype=click@price=4" href="javascript:void(0);">10-20万</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="5" data-273-click-log="/wap/list/price@etype=click@price=5" href="javascript:void(0);">20-30万</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="6" data-273-click-log="/wap/list/price@etype=click@price=6" href="javascript:void(0);">30-40万</a></div></li>
            <li class="down-list-item"><div class="link-box"><a data-value="7" data-273-click-log="/wap/list/price@etype=click@price=7" href="javascript:void(0);">40万以上</a></div></li>
            <li class="down-list-item"><div class="link-box custom-price">
                <style>
                    .custom-price{ position:relative ;}
                    .custom-price input{ position:absolute; left:0 ; top: 6px ; opacity:0; width:100%;}
                </style>
                <a data-value="8" data-273-click-log="/wap/list/price@etype=click@price=user_define" class="user-define" href="javascript:void(0);">自定义</a>
                <style>
                    #user-define_dummy{ height: 25px; }
                    .dw{ left: 50%; margin-left:-126px; }
                    .mbsc-mobiscroll .dwwr .dwcc{ margin-left: 15%; }
                    .mbsc-mobiscroll .dw-li{ text-align: left; }
                    .mbsc-mobiscroll .dw-li.dw-sel{ color: #249CDE; font-size: 1.75em; }
                    .mbsc-mobiscroll .dw-li.dw-sel .dw-i:after{ content:'万'}
                    .mbsc-mobiscroll  .dw-li.dw-sel[data-val="0"] .dw-i:after{ content:''}
                    .mbsc-mobiscroll  .dw-li.dw-sel[data-val="10000"] .dw-i:after{ content:''}
                    .mbsc-mobiscroll .dwwol{ border: none; }
                    .mbsc-mobiscroll .dwbc{ border-top: 1px solid #D3D3D3; padding: 0; }
                    .mbsc-mobiscroll .dwbw{ width: 50%; text-align: center; background: #FAFAFA; }
                    .mbsc-mobiscroll .dwb{ color: #000; font-weight: bold; }
                    .mbsc-mobiscroll .dwbw.dwb-s .dwb{ color: #249CDE; }
                    .mbsc-mobiscroll .dwbw.dwb-c{ border-right: 1px solid #D3D3D3; margin-left: -1px; }
                </style>
                <input type="text" readonly="" placeholder="选择价格" class="" value="" id="user-define_dummy"><ul style="display: none;" id="user-define">
                <li data-val="0">0                            <ul>
                    <li data-val="1">1</li>
                    <li data-val="2">2</li>
                    <li data-val="3">3</li>
                    <li data-val="4">4</li>
                    <li data-val="5">5</li>
                    <li data-val="6">6</li>
                    <li data-val="7">7</li>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="1">1                            <ul>
                    <li data-val="2">2</li>
                    <li data-val="3">3</li>
                    <li data-val="4">4</li>
                    <li data-val="5">5</li>
                    <li data-val="6">6</li>
                    <li data-val="7">7</li>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="2">2                            <ul>
                    <li data-val="3">3</li>
                    <li data-val="4">4</li>
                    <li data-val="5">5</li>
                    <li data-val="6">6</li>
                    <li data-val="7">7</li>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="3">3                            <ul>
                    <li data-val="4">4</li>
                    <li data-val="5">5</li>
                    <li data-val="6">6</li>
                    <li data-val="7">7</li>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="4">4                            <ul>
                    <li data-val="5">5</li>
                    <li data-val="6">6</li>
                    <li data-val="7">7</li>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="5">5                            <ul>
                    <li data-val="6">6</li>
                    <li data-val="7">7</li>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="6">6                            <ul>
                    <li data-val="7">7</li>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="7">7                            <ul>
                    <li data-val="8">8</li>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="8">8                            <ul>
                    <li data-val="9">9</li>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="9">9                            <ul>
                    <li data-val="10">10</li>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="10">10                            <ul>
                    <li data-val="11">11</li>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="11">11                            <ul>
                    <li data-val="12">12</li>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="12">12                            <ul>
                    <li data-val="13">13</li>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="13">13                            <ul>
                    <li data-val="14">14</li>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="14">14                            <ul>
                    <li data-val="15">15</li>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="15">15                            <ul>
                    <li data-val="20">20</li>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="20">20                            <ul>
                    <li data-val="30">30</li>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="30">30                            <ul>
                    <li data-val="40">40</li>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="40">40                            <ul>
                    <li data-val="50">50</li>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="50">50                            <ul>
                    <li data-val="60">60</li>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="60">60                            <ul>
                    <li data-val="70">70</li>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="70">70                            <ul>
                    <li data-val="80">80</li>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="80">80                            <ul>
                    <li data-val="90">90</li>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="90">90                            <ul>
                    <li data-val="100">100</li>
                </ul>
                </li>
                <li data-val="100">&gt;=100<ul><li data-val="10000"></li>&gt;</ul></li>
            </ul>
            </div></li>
        </ul>
    </div>
</div>
<style>
    .condi-list-item span{
        text-overflow: ellipsis;
        white-space: nowrap;
        word-break: normal;
        word-wrap: normal;
        overflow: hidden;
        max-width: 80%;
        vertical-align: middle;
        display:inline-block;
    }
</style>
<script type="text/javascript" src="/mod.js"></script>
<script>
    var  $ = require('zepto'),
            CarType = require('widget/cartype/js/cartype'),
            CarFilter = require('widget/carfilter/js/carfilter');
            require('mobiscroll')

    var carType, carFilter ;
    $('.list-filter').on('click','a',function(){
        $(this).addClass('on').find('i').addClass('i-arrow-down').removeClass('i-arrow-right')
                .closest('li').siblings().find('a').removeClass('on').find('i').addClass('i-arrow-right').removeClass('i-arrow-down')

        $('.down-list-box.p,.down-list-box.d').hide();

        if( $(this).hasClass('item-price')){
            $('.down-list-box.p').show();
        }
        else  if( $(this).hasClass('item-default')){
            $('.down-list-box.d').show();
        }
        else if( $(this).hasClass('item-brand')){
            if( !carType ){
                carType = new  CarType( $(this).find('span') ,{
                    multiple : true
                }).on('selectedBrand' , function(){
                });
                carType.show()
            }

        }
        else if( $(this).parent().hasClass('otherlink')){
        
            if( !carFilter ){
                carFilter = new CarFilter( this ).on('closed' , function( e , args ){

                });
                carFilter.show()
            }

        }
    })

    $('.down-list').on('click', 'a' , function(){
        $(this).addClass('on').closest('li').siblings().find('a').removeClass('on');
        if( $(this).closest('.p').length ){
           $('.item-price span').html( $(this).text() )
        }
        else  if( $(this).closest('.d').length ){
            $('.item-default span').html( $(this).text() )
        }

    })


    $.mobiscroll.i18n.zh = $.extend($.mobiscroll.i18n.zh, {
        setText: '确定',
        cancelText: '取消'
    });
    var theme = {
        defaults: {
            dateOrder: 'Mddyy',
            mode: 'mixed',
            rows: 5,
            width: 70,
            height: 36,
            showLabel: false,
            useShortLabels: true
        }
    };
    $.mobiscroll.themes['android-ics'] = theme;
    $.mobiscroll.themes['android-ics light'] = theme;


    $.fn.outerWidth = function(){
        return $(this).width() + parseFloat($(this).css('padding-left')) + parseFloat( $(this).css('padding-right'))
    };
    $.fn.outerHeight = function(){
        return $(this).height() + parseFloat($(this).css('padding-top')) + parseFloat( $(this).css('padding-bottom'))
    };
    $.fn.scrollLeft = function(){

    };

    var minPrice, maxPrice ;
    //快捷列表的自定义价格
    $("#user-define").mobiscroll().treelist({
        lang: "zh",
        placeholder: '选择价格',
        defaultValue  : [minPrice ,maxPrice],
        //headerText: function (valueText) { return "选择价格"; },
        onSelect: function ( e, array ) { //返回自定义格式结果
            array.values = array._wheelArray;
            var $price = $('[name=price]');
            var $minPrice = $('[name=min_price]'),$maxPrice = $('[name=max_price]');
            if($minPrice.length ){
                $minPrice.val( array.values[0] );
            }
            else{
                $minPrice = $('<input type="hidden" name="min_price" value="'+ array.values[0] +'"/>').appendTo('#searchForm');
                $minPrice = $('<input type="hidden" name="min_price" value="'+ array.values[0] +'"/>').appendTo('#searchFormOut');
            }

            if($maxPrice.length ){
                $maxPrice.val( array.values[1] );
            }
            else{
                $maxPrice = $('<input type="hidden" name="max_price" value="'+ array.values[1] +'"/>').appendTo('#searchForm');
                $maxPrice = $('<input type="hidden" name="max_price" value="'+ array.values[1] +'"/>').appendTo('#searchFormOut');
            }
            var val = array.values[0] +"-"+ array.values[1] +"万";
            $('.item-price span').text( val );
           // lengthPass();
            $(".down-list-box").removeClass("show");
            $("#price").find("label").html(val);
            $("#price").find("label").parent().removeClass('select').addClass('selected');
            $price.remove();
            //$('#searchForm').submit();
            $('#searchForm input[name="nav"]').val("price");
            $('#searchFormOut input[name="nav"]').val("price");
            $('#searchFormOut').submit();
            /* return $('#treelist>li').eq(array[0]).children('span').text() +' '+ $('#treelist>li').eq(array[0]).find('ul li').eq(array[1]).text().trim(' ');*/
        },
        onBeforeShow :function(){
            $(".user-define").addClass('on').closest('.down-list-item').siblings().find("a").removeClass("on");
        },
        setText: '确定',
        cancelText: '取消'
    });
</script>
</body>
</html>