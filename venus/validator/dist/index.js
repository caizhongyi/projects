!function(e){e.fn.validator=function(t){return t=e.extend(!0,{},{showDefault:!0},t),e(this).each(function(){function o(e,t){var n=i[e.data("role")]||{};return t&&(n.fn=function(e){return(new RegExp(t,"i")).test(e)}),n}function u(t,n){var r;n.data={},n.data[t.attr("name")]=t.val(),n.async=!1;var i=n.success;return n.success=function(e){r=i(e)},e.ajax(n),r}function a(t){t.off("blur.validator focus.validator").on("blur.validator",function(){var t=e(this),n=e(this).attr("pattern"),r=o(e(this),n);if(e(this).attr("required")&&e(this).val()=="")return h(e(this),r),!1;var i=e(e(this).data("compare"));if(e(this).data("compare")&&e.trim(e(this).val())!=e.trim(i.val()))return i.off("blur.compare_validator").on("blur.compare_validator",function(){e(this).val()==t.val()&&f(t,o(t,n))}),p(e(this),o(e(this),n)),!1;r.fn&&(r.fn(e(this).val())?r.ajax?u(e(this),r.ajax)?f(e(this),r):c(e(this),r):f(e(this),r):c(e(this),r))}).on("focus.validator",function(){var t=e(this).attr("pattern"),n=o(e(this),t);d(e(this),n)})}function f(t,n){n=n||{};var r=t.data("tip")?e(t.data("tip")):t.parent().find(".form-help");t.data("correct",!0).removeClass("input-danger").addClass("input-success"),r.html(t.data("success")||n.success).removeClass("text-default text-danger").addClass("text-success")}function l(t,n,r){n=n||{};var i=t.data("tip")?e(t.data("tip")):t.parent().find(".form-help");t.removeAttr("correct",!1).focus().removeClass("input-success").addClass("input-danger"),i.html(r).removeClass("text-default text-success").addClass("text-danger")}function c(e,t){l(e,t,e.data("error")||t.error)}function h(e,t){l(e,t,e.data("required")||t.required)}function p(e,t){l(e,t,e.data("compared")||t.compared)}function d(t,n){n=n||{};var r=t.data("tip")?e(t.data("tip")):t.parent().find(".form-help");t.removeAttr("correct",!1).removeClass("input-success input-danger"),r.html(t.data("message")||n.message).removeClass("text-success text-danger").addClass("text-default")}function v(e,t,n){return e.data("role")?n.fn(e.val()):(new RegExp(t,"i")).test(e.val())}var n=this,r=e();e(this).attr("novalidate",!0);var i=e.validator.rules,s=e(this).find("[name]");s.each(function(){var n=e(this);a(n),t.showDefault&&d(e(this),i[n.data("role")]),r=r.add(n)}),e(this).off("submit.validator").on("submit.validator",function(){var t=!0;return r.each(function(){if(!e(this).data("correct")){var n=e(this).attr("pattern"),r=o(e(this),n);if(e(this).attr("required")&&e(this).val()=="")return t=!1,h(e(this),r),!1;var i=e(e(this).data("compare"));if(e(this).data("compare")&&e.trim(e(this).val())!=e.trim(i.val()))return t=!1,p(e(this),o(e(this),n)),!1;if(!!v(e(this),n,r))return t=!1,c(e(this),r),!1;if(r.ajax){if(!u(e(this),r.ajax))return t=!1,c(e(this),r),!1;f(e(this),r)}else f(e(this),r)}}),!1})})},e.validator={},e.validator.rules={user:{fn:function(e){return/^[a-z\d_\u4e00-\u9fa5]{6,20}/i.test(e)},message:"6~20位字符，由字母与数字组成，只能以字母开头",error:"输入用户名格式不正确!",success:"正确!",required:"请输入用户名!"},tel:{fn:function(t){return e.valid.isTel(t)},message:"请输入您的手机号码!",error:"输入手机号码不正确!",success:"正确!",required:"请输入您的手机号码!"},email:{fn:function(t){return e.valid.isEmail(t)},message:"请输入Email地址,示例:czy0816@gmail.com!",error:"输入的Email地址格式不正确!",success:"正确!",required:"请输入输入的Email地址!"},cardId:{fn:function(t){return e.valid.isCardIdx(t)},message:"请输入身份证号码,示例:35072119860316355!",error:"输入身份证号码格式不正确!",success:"正确!",required:"请输入身份证号码!"},money:{fn:function(t){return e.valid.isMoney(t)},message:"请输入RMB!",error:"输入RMB格式不正确!",success:"正确!",required:"请输入RMB!"},url:{fn:function(t){return e.valid.isURL(t)},message:"请输入网址,例如:http://www.test.com",error:"输入网址格式不正确!",success:"正确!",required:"请输入网址!"},ip:{fn:function(t){return e.valid.isIP(t)},message:"请输入ip,例如:192.168.1.1!",error:"输入ip格式不正确!",success:"正确!",required:"请输入ip!"},date:{fn:function(t){return e.valid.isDate(t)},message:"请输入时间,示例:2012-12-12!",error:"输入的时间格式不正确!",success:"正确!",required:"请输入时间,示例:2012-12-12!"},mobile:{fn:function(t){return e.valid.isMoblie(t)},message:"请输入您的手机号码!",error:"输入手机号码不正确!",success:"正确!",required:"请输入您的手机号码!"},password:{fn:function(e){return/^[a-z\d_]{6,16}/i.test(e)},message:"6~16位字符，字母区分大小写!",error:"密码格式不正!",success:"正确!",required:"请输入密码!",compare:"两次输入的密码不一致!"},conform:{fn:function(e){return!0},message:"请再次输入密码！",error:"密码格式不正!",success:"正确!",required:"请再次输入密码!",compared:"两次输入的密码不一致!"},identify:{fn:function(e){return!0},message:"",error:"验证码格式不正！",success:"正确!",required:"请输入验证码!"},image:{fn:function(t){return e.valid.isImage(t)},message:"请输入图片格式,支持.bmp,.gif,.png,.jpeg!",error:"输入图片格式不正确!",success:"正确!",required:"请输入图片格式!"},phone:{fn:function(t){return e.valid.isMobileOrTel(t)},message:"请输入您的手机号码!",error:"输入手机号码不正确!",success:"正确!",required:"请输入您的手机号码!"}}}(window.jQuery||Zepto)
