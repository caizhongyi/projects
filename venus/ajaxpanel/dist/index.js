!function(e){var t=function(n,r){this.options=e.extend(!0,{},t.DEFAULTS,r),this.$elem=e(n),this.init.call(this)};t.prototype={init:function(){return this.$elem.addClass("ajaxpanel"),this},has:function(){return this.$elem.children(".loading").length},loading:function(){this.has()?this.$loading=e(".loading"):(this.$loading=e('<div class="loading fade '+(this.$elem.data("loadingclass")||this.options.loadingClass)+'"><div class="loading-mask"></div></div>').appendTo(this.$elem),this.$elem.data("loadinginfo")||this.options.loadingInfo?this.$loading.append('<div class="loading-info slide"></div>'):this.$loading.append('<i class="loading-icon"></i>')),this.$loading.addClass("in").find(".loading-info").addClass("in").html('<i class="loading-icon"></i>'+(this.$elem.data("loadinginfo")||this.options.loadingInfo));var t=this.$elem.find(this.options.loadingBtn);return t.addClass("disabled").prop("disabled",!0),this},unloading:function(){this.$loading.removeClass("in");var e=this.$elem.find(this.options.loadingBtn);return e.removeClass("disabled").removeAttr("disabled"),this},_getcallback:function(e){var t=this;return function(n){e&&e.call(t.$elem,n),t.unloading()}},get:function(t,n,r,i){return this.loading(),typeof n=="function"&&(r=n,n=null),e.get(t,n,this._getcallback(r),i)},post:function(t,n,r,i){return this.loading(),typeof n=="function"&&(r=n,n=null),e.post(t,n,this._getcallback(r),i)},jsonp:function(t,n,r){return e.type(n)=="function"&&(r=n,n=null),e.ajax({url:t,type:"get",dataType:"jsonp",data:n,success:r})}},t.DEFAULTS={loadingInfo:"",loadingBtn:"[data-loadingbtn]",loadingClass:""},e.fn.ajaxPanel=function(n){var r=arguments;return e(this).each(function(){var i=e(this).data("ajaxPanel");i||(i=new t(this,n),e(this).data("ajaxPanel",i));var s=[];for(var o=1;o<r.length;o++)s.push(r[o]);var u=new Function("data","options","return data[ options ]("+s.join(",")+")");n&&i[n]&&u(i,n)})},e.fn.ajaxPanel.Constructor=t,typeof module=="object"&&typeof module.exports=="object"&&(module.exports=e)}(jQuery)
