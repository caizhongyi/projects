!function(e){e.fn.spinner=function(t){return t=e.extend(!0,{},{delegateTarget:"",increase:1,max:9999999,min:-9999999},t),e(this).each(function(){function i(){var r=t.delegateTarget?e(this).closest(t.delegateTarget):e(n),i=parseFloat(r.attr("step")||t.increase),s=r.find(":text"),o=parseFloat(s.val()),u=parseFloat(s.attr("max")!=undefined?s.attr("max"):t.max),a=parseFloat(s.attr("min")!=undefined?s.attr("min"):t.min),f=s.data("spinnerTempVal");return{me:r,max:u,min:a,increase:i,$input:s,val:o,spinnerTempVal:f}}function s(t,n){if(t.$input.val()==n)return;t.me.trigger("change",t);if(e(this).data("keep")){e(this).removeData("keep");return}t.$input.data("spinnerTempVal",t.val),t.$input.val(n)}var n=this;this.tagName=="INPUT"&&e(this).attr("type")=="number"&&(n=e(this).wrap('<span class="'+e(this).attr("class")+' input-group input-spinner"></span>').attr("type","text").parent(),n.append('<a class="spinner-up add-on" href="javascript:;">+</a>'),n.prepend('<a class="spinner-down add-on" href="javascript:;">-</a>'));if(!t.delegateTarget){var r=e(n).find("input");r.val()==""&&r.val(0),r.data("spinnerTempVal",r.val())}e(n).off("click.spinner").on("click.spinner",".spinner-up",function(){var e=i.call(this),t=e.val+e.increase<=e.max?e.val+e.increase:e.max;s.call(n,e,t)}).on("click.spinner",".spinner-down",function(){var e=i.call(this),t=e.val-e.increase>=e.min?e.val-e.increase:e.min;e.increase=-e.increase,s.call(n,e,t)}),e(n).find("input").off("change.spinner").on("change.spinner",function(){var e=i.call(this),t=isNaN(e.val)?e.spinnerTempVal:e.val;t<e.min?t=e.min:t>e.max&&(t=e.max),s.call(n,e,t)})})}}(window.jQuery||Zepto)
