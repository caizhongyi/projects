(function(a){a.fn.countermark=function(b){var c={container:".countermark-container",item:".countermark-item"};b=a.extend(true,{},c,b);var d=a(b.container);d.off("click.countermark").on("click.countermark",".delete",function(f){f.stopPropagation();f.preventDefault();a(this).parent().stop(true).fadeOut(function(){a(this).remove()})});a(this).off("mousedown.countermark click.countermark").on("mousedown.countermark",b.item,function(g){g.preventDefault();var f=a(this).clone().appendTo("body").css({position:"absolute",left:a(this).offset().left,top:a(this).offset().top}).jdraggable({stop:function(){if(a(this).offset().left>d.offset().left&&a(this).offset().left<d.offset().left+d.width()&&a(this).offset().top>d.offset().top&&a(this).offset().top<d.offset().top+d.height()){var e=f.clone().removeAttr("style").appendTo(d),h=e.offset();e.hide();f.animate({left:h.left,top:h.top},function(){e.show();a(this).remove()});f.jundraggable()}else{f.stop(true).fadeOut(function(){a(this).remove()})}}}).mousedown()}).on("click.countermark",".delete",function(f){f.stopPropagation();f.preventDefault();a(this).parent().stop(true).fadeOut(function(){a(this).remove()})});return this}})(jQuery);