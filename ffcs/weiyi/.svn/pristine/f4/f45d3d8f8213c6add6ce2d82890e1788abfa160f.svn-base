<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>能力体验</title>
    <link rel="stylesheet"  href="../../../../resource/style/jquery.mobile-1.3.1.css">
    <link rel="stylesheet"  href="../../../../resource/style/call.css">
    <link rel="shortcut icon" href="../../favicon.ico">
    <script src="../../../../resource/script/jquery-1.7.2.min.js"></script>
    <script src="../../../../resource/script/jquery.mobile-1.3.1.min.js"></script>
    <script src="../../../../resource/script/jquery.FlexSlider/jquery.flexslider-min.js"></script>

</head>
<body>
<div data-role="page" id="home">

    <header data-role="header">
        <h1>能力体验</h1>
    </header>
    <div data-role="content">
        请输入您的真实电话号码作为主叫号码：
        <input name="user" id="user" value="" placeholder="电话号码" data-theme="c" type="text">
        <div data-role="controlgroup" data-type="horizontal" style="margin:20px 0  -35px 0; ">
            <label data-inline="true" id="checkbox-all">
                全选<input name="checkbox-all " type="checkbox">
            </label>
            <a id="mutil" href="javascript:;"  data-role="button"  data-inline="true" >多方通话</a>
            <script type="text/javascript">
                $('#mutil').click(function(){
                    $( "#popupInfo" ).popup( "open" )
                })
            </script>
        </div>
        <table data-role="table" id="table-column-toggle" data-mode="columntoggle" class="ui-responsive table-stroke">
            <thead>
            <tr>
                <th  style="width:20px " data-priority="2"></th>
                <th style="width:80px ">姓名</th>
                <th  data-priority="3">电话号码</th>
                <th data-priority="1"><abbr title="Rotten Tomato Rating">操作</abbr></th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <th>
                    <label data-inline="true">
                        <input name="checkbox-0" type="checkbox" value="11"/>&nbsp;
                    </label>
                </th>
                <td>继承者</td>
                <td class="rs-phone">1838394055050</td>
                <td class="kd01">
                    <a href="#popupInfo" class="dial-phone" data-rel="popup" data-role="button"  data-inline="true" data-transition="pop">点击拨号</a>
                    <a href="#popupLogin" class="voice-notice" data-rel="popup" data-position-to="window" data-role="button" data-inline="true"  data-theme="b" data-transition="pop">语音通知</a>
                </td>
            </tr>
            <tr>
                <th>
                    <label data-inline="true">
                        <input name="checkbox-0" type="checkbox" value="7"/>&nbsp;
                    </label>
                </th>
                <td>坑爹</td>
                <td class="rs-phone">1774859596966</td>
                <td class="kd01">
                    <a href="#popupInfo" class="dial-phone" data-rel="popup" data-role="button"  data-inline="true" data-transition="pop">点击拨号</a>
                    <a href="#popupLogin" class="voice-notice" data-rel="popup" data-position-to="window" data-role="button" data-inline="true"  data-theme="b" data-transition="pop">语音通知</a>
                </td>
            </tr>
            </tbody>
        </table>
        <div data-role="popup" id="popupInfo" class="ui-content" data-theme="e" style="max-width:350px;">
            <!-- <p>Here is a <strong>tiny popup</strong> being used like a tooltip. The text will wrap to multiple lines as needed.</p> -->
        </div>
        <div class="pagination pagination-centered"><ul><li class="active"><a href="javascript:;">1</a></li><li><a href="?act=module&name=userapi&do=test&page=2">2</a></li><li><a href="?act=module&name=userapi&do=test&page=3">3</a></li><li><a href="?act=module&name=userapi&do=test&page=2" class="pager-nav">下一页&raquo;</a></li><li><a href="?act=module&name=userapi&do=test&page=3" class="pager-nav">尾页</a></li></ul></div>        <script type="text/javascript">
        $('#checkbox-all').on('click',function(){
            var $checkbox = $( this).next() ;
            if(!$checkbox.prop( "checked" )){
                $('#table-column-toggle').find(':checkbox').prop('checked' , true).checkboxradio( "refresh" );;
            }
            else{
                $('#table-column-toggle').find(':checkbox').prop('checked' , false).checkboxradio( "refresh" );;
            }
        })
    </script>
    </div>
    <div data-role="popup" id="popupLogin" data-theme="c" class="ui-corner-all" >
        <form>
            <div style="padding:10px 20px;">
                <h3>Please sign in</h3>
                <label for="un" class="ui-hidden-accessible">Username:</label>
                <input name="user" id="un" value="" placeholder="username" data-theme="c" type="text">
                <label for="pw" class="ui-hidden-accessible">Password:</label>
                <input name="pass" id="pw" value="" placeholder="password" data-theme="c" type="password">
                <button type="submit" data-theme="b" >Sign in</button>
            </div>
        </form>
    </div>
    <footer data-role="footer">
        <h2>天翼开放平台</h2>
    </footer>

</div>
<script type="text/javascript">
    $(function(){
        $('#table-column-toggle').on('click', '.dial-phone', function(){
            var $phone = $.trim($(this).closest('.kd01').prev().html());
            $.ajax({
                url:"index.php?act=module&name=userapi&do=dial",
                type:'post',
                data:"called="+$phone+"&date="+new Date().getTime(),
                dataType:'text',
                success:function(rs){
                    rs?eval("var rs="+rs+";"):'';
                    if(rs.status > 0){
                        $('#popupInfo').html(rs.msg);
                        return true;
                    }else{
                        return false;
                    }
                }
            });
        });
    });
</script>

</body>
</html>