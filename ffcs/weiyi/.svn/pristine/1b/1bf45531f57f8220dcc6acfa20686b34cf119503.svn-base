<!doctype html><html><head>    <meta charset="utf-8">    <title>转盘</title>    <link rel="stylesheet"  href="css/style.css"/></head><body><div class="wrap">    <div class="turntable">        <input id="turntable-btn" class="turntable-btn" type="button">        <img class="plate" src="images/plate.png" alt="" id="turntable-arrow">        <div class="turntable-star"><img src="images/rotate-static.png"></div>    </div>    <div class="result">        <h2 class="title">奖项设置：</h2>        <div class="content">            一等奖：iPhone手机。奖品数量：10 <br>            二等奖：平板电脑。奖品数量：30 <br>            三等奖：HTC G17手机一部。奖品数量：60        </div>    </div></div><script src="../../../../resource/script/jquery-1.7.2.min.js"></script><script src="../../../../resource/script/jQueryRotate.2.2.js"></script><script src="../../../../resource/script/jquery.easing.min.js"></script><script>    $(function () {        /**         *  server callback         *  { index : 1, text : 'xxxx' };         * */        $.fn.turntable = function (options) {            var opts = $.extend(true, {}, {                count: 8,                startBtn: '#turntable-btn',                rotate: '#turntable-arrow',                url: null,                data: {},                type: 'get',                callback: null            }, options);            var $start = $(opts.startBtn);            var timeOut = function () {  //超时函数                $(opts.rotate).rotate({                    angle: 0,                    duration: 10000,                    animateTo: 2160, //这里是设置请求超时后返回的角度，所以应该还是回到最原始的位置，2160是因为我要让它转6圈，就是360*6得来的                    callback: function () {                        alert('网络超时');                        $start.removeAttr('disabled');                    }                });            };            var rotateFunc = function (awards, angle, text) {                //awards:奖项，angle:奖项对应的角度                $(opts.rotate).stopRotate();                $(opts.rotate).rotate({                    angle: 0,                    duration: 5000,                    animateTo: angle + 1440, //angle是图片上各奖项对应的角度，1440是我要让指针旋转4圈。所以最后的结束的角度就是这样子^^                    callback: function () {                        alert(text);                        $start.removeAttr('disabled');                    }                });            };            $(opts.arrow).rotate({});            $start.click(function () {                $(this).attr('disabled', 'disabled');                var itemAngle = 360 / opts.count;                if (opts.url) {                    $.ajax(opts.url, {                        type: opts.type,                        success: function (data) {                            rotateFunc(data.index, data.index * (360 / opts.count) / 2, data.text);                            opts.callback && opts.callback.call(this);                        },                        data: opts.data                    });                }                else {                    var arr = [];                    for (var i = 0; i < opts.count; i++) {                        arr.push(i);                    }                    var data = {                        index: arr[Math.floor(Math.random() * arr.length)],                        text: '恭喜您抽中的一等奖'                    }                    var resultAngle = data.index * itemAngle + itemAngle / 2;                    rotateFunc(data.index, resultAngle, data.text);                }            })        }        $('.turntable').turntable();    })</script></body></html>