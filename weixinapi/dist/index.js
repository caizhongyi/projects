!function(e){"use strict";var t={version:4.3};e.WeixinApi=t,typeof define=="function"&&(define.amd||define.cmd)&&(define.amd?define(function(){return t}):define.cmd&&define(function(e,n,r){r.exports=t}));var n=function(){var e={},t,n;for(var r=0,i=arguments.length;r<i;r++){t=arguments[r];if(typeof t=="object")for(n in t)t[n]&&(e[n]=t[n])}return e},r=function(e,r,i){i=i||{};var s=function(e){switch(!0){case/\:cancel$/i.test(e.err_msg):i.cancel&&i.cancel(e);break;case/\:(confirm|ok)$/i.test(e.err_msg):i.confirm&&i.confirm(e);break;case/\:fail$/i.test(e.err_msg):default:i.fail&&i.fail(e)}i.all&&i.all(e)},o=function(t,n){if(e.menu=="menu:share:timeline"||e.menu=="general:share"&&n.shareTo=="timeline"){var r=t.title;t.title=t.desc||r,t.desc=r||t.desc}!n||n.shareTo!="favorite"&&n.scene!="favorite"?e.menu==="general:share"?n.shareTo==="timeline"?WeixinJSBridge.invoke("shareTimeline",t,s):n.shareTo==="friend"?WeixinJSBridge.invoke("sendAppMessage",t,s):n.shareTo==="QQ"?WeixinJSBridge.invoke("shareQQ",t,s):n.shareTo==="weibo"&&WeixinJSBridge.invoke("shareWeibo",t,s):WeixinJSBridge.invoke(e.action,t,s):i.favorite===!1?WeixinJSBridge.invoke("sendAppMessage",t,new Function):WeixinJSBridge.invoke(e.action,t,s)};WeixinJSBridge.on(e.menu,function(e){i.dataLoaded=i.dataLoaded||new Function;if(i.async&&i.ready){t._wx_loadedCb_=i.dataLoaded,t._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(t._wx_loadedCb_=new Function),i.dataLoaded=function(s){i.__cbkCalled=!0;var u=n(r,s);u.img_url=u.imgUrl||u.img_url,delete u.imgUrl,t._wx_loadedCb_(u),o(u,e)};if(!e||e.shareTo!="favorite"&&e.scene!="favorite"||i.favorite!==!1)i.ready&&i.ready(e,r),i.__cbkCalled||(i.dataLoaded({}),i.__cbkCalled=!1)}else{var s=n(r);(!e||e.shareTo!="favorite"&&e.scene!="favorite"||i.favorite!==!1)&&i.ready&&i.ready(e,s),o(s,e)}})};t.shareToTimeline=function(e,t){r({menu:"menu:share:timeline",action:"shareTimeline"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},t)},t.shareToFriend=function(e,t){r({menu:"menu:share:appmessage",action:"sendAppMessage"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},t)},t.shareToWeibo=function(e,t){r({menu:"menu:share:weibo",action:"shareWeibo"},{content:e.desc,url:e.link},t)},t.generalShare=function(e,t){r({menu:"general:share"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},t)},t.disabledShare=function(e){e=e||function(){alert("当前页面禁止分享！")},["menu:share:timeline","menu:share:appmessage","menu:share:qq","menu:share:weibo","general:share"].forEach(function(t){WeixinJSBridge.on(t,function(){return e(),!1})})},t.imagePreview=function(e,t){if(!e||!t||t.length==0)return;WeixinJSBridge.invoke("imagePreview",{current:e,urls:t})},t.showOptionMenu=function(){WeixinJSBridge.call("showOptionMenu")},t.hideOptionMenu=function(){WeixinJSBridge.call("hideOptionMenu")},t.showToolbar=function(){WeixinJSBridge.call("showToolbar")},t.hideToolbar=function(){WeixinJSBridge.call("hideToolbar")},t.getNetworkType=function(e){e&&typeof e=="function"&&WeixinJSBridge.invoke("getNetworkType",{},function(t){e(t.err_msg)})},t.closeWindow=function(e){e=e||{},WeixinJSBridge.invoke("closeWindow",{},function(t){switch(t.err_msg){case"close_window:ok":e.success&&e.success(t);break;default:e.fail&&e.fail(t)}})},t.ready=function(t){var n=function(){var e={};Object.keys(WeixinJSBridge).forEach(function(t){e[t]=WeixinJSBridge[t]}),Object.keys(WeixinJSBridge).forEach(function(t){typeof WeixinJSBridge[t]=="function"&&(WeixinJSBridge[t]=function(){try{var n=arguments.length>0?arguments[0]:{},r=n.__params?n.__params.__runOn3rd_apis||[]:[];["menu:share:timeline","menu:share:appmessage","menu:share:weibo","menu:share:qq","general:share"].forEach(function(e){r.indexOf(e)===-1&&r.push(e)})}catch(i){}return e[t].apply(WeixinJSBridge,arguments)})})};if(t&&typeof t=="function"){var r=this,i=function(){n(),t(r)};typeof e.WeixinJSBridge=="undefined"?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i)):i()}},t.openInWeixin=function(){return/MicroMessenger/i.test(navigator.userAgent)},t.sendEmail=function(e,t){t=t||{},WeixinJSBridge.invoke("sendEmail",{title:e.subject,content:e.body},function(e){e.err_msg==="send_email:sent"?t.success&&t.success(e):t.fail&&t.fail(e),t.all&&t.all(e)})},t.enableDebugMode=function(t){e.onerror=function(e,n,r,i){if(typeof t=="function")t({message:e,script:n,line:r,column:i});else{var s=[];s.push("额，代码有错。。。"),s.push("\n错误信息：",e),s.push("\n出错文件：",n),s.push("\n出错位置：",r+"行，"+i+"列")}}},t.share=function(e,n){t.ready(function(t){t.shareToFriend(e,n),t.shareToTimeline(e,n),t.shareToWeibo(e,n),t.generalShare(e,n)})}}(window),!function(e){"use strict";var t={version:4.3};e.YixinApi=t,typeof define=="function"&&(define.amd||define.cmd)&&(define.amd?define(function(){return t}):define.cmd&&define(function(e,n,r){r.exports=t}));var n=function(){var e={},t,n;for(var r=0,i=arguments.length;r<i;r++){t=arguments[r];if(typeof t=="object")for(n in t)t[n]&&(e[n]=t[n])}return e},r=function(e,r,i){i=i||{};var s=function(e){switch(!0){case/\:cancel$/i.test(e.err_msg):i.cancel&&i.cancel(e);break;case/\:(confirm|ok)$/i.test(e.err_msg):i.confirm&&i.confirm(e);break;case/\:fail$/i.test(e.err_msg):default:i.fail&&i.fail(e)}i.all&&i.all(e)},o=function(t,n){if(e.menu=="menu:share:timeline"||e.menu=="general:share"&&n.shareTo=="timeline"){var r=t.title;t.title=t.desc||r,t.desc=r||t.desc}!n||n.shareTo!="favorite"&&n.scene!="favorite"?e.menu==="general:share"?n.shareTo==="timeline"?YixinJSBridge.invoke("shareTimeline",t,s):n.shareTo==="friend"?YixinJSBridge.invoke("sendAppMessage",t,s):n.shareTo==="QQ"?YixinJSBridge.invoke("shareQQ",t,s):n.shareTo==="weibo"&&YixinJSBridge.invoke("shareWeibo",t,s):YixinJSBridge.invoke(e.action,t,s):i.favorite===!1?YixinJSBridge.invoke("sendAppMessage",t,new Function):YixinJSBridge.invoke(e.action,t,s)};YixinJSBridge.on(e.menu,function(e){i.dataLoaded=i.dataLoaded||new Function;if(i.async&&i.ready){t._wx_loadedCb_=i.dataLoaded,t._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(t._wx_loadedCb_=new Function),i.dataLoaded=function(s){i.__cbkCalled=!0;var u=n(r,s);u.img_url=u.imgUrl||u.img_url,delete u.imgUrl,t._wx_loadedCb_(u),o(u,e)};if(!e||e.shareTo!="favorite"&&e.scene!="favorite"||i.favorite!==!1)i.ready&&i.ready(e,r),i.__cbkCalled||(i.dataLoaded({}),i.__cbkCalled=!1)}else{var s=n(r);(!e||e.shareTo!="favorite"&&e.scene!="favorite"||i.favorite!==!1)&&i.ready&&i.ready(e,s),o(s,e)}})};t.shareToTimeline=function(e,t){r({menu:"menu:share:timeline",action:"shareTimeline"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},t)},t.shareToFriend=function(e,t){r({menu:"menu:share:appmessage",action:"sendAppMessage"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},t)},t.shareToWeibo=function(e,t){r({menu:"menu:share:weibo",action:"shareWeibo"},{content:e.desc,url:e.link},t)},t.generalShare=function(e,t){r({menu:"general:share"},{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},t)},t.disabledShare=function(e){e=e||function(){alert("当前页面禁止分享！")},["menu:share:timeline","menu:share:appmessage","menu:share:qq","menu:share:weibo","general:share"].forEach(function(t){YixinJSBridge.on(t,function(){return e(),!1})})},t.imagePreview=function(e,t){if(!e||!t||t.length==0)return;YixinJSBridge.invoke("imagePreview",{current:e,urls:t})},t.showOptionMenu=function(){YixinJSBridge.call("showOptionMenu")},t.hideOptionMenu=function(){YixinJSBridge.call("hideOptionMenu")},t.showToolbar=function(){YixinJSBridge.call("showToolbar")},t.hideToolbar=function(){YixinJSBridge.call("hideToolbar")},t.getNetworkType=function(e){e&&typeof e=="function"&&YixinJSBridge.invoke("getNetworkType",{},function(t){e(t.err_msg)})},t.closeWindow=function(e){e=e||{},YixinJSBridge.invoke("closeWindow",{},function(t){switch(t.err_msg){case"close_window:ok":e.success&&e.success(t);break;default:e.fail&&e.fail(t)}})},t.ready=function(t){var n=function(){var e={};Object.keys(YixinJSBridge).forEach(function(t){e[t]=YixinJSBridge[t]}),Object.keys(YixinJSBridge).forEach(function(t){typeof YixinJSBridge[t]=="function"&&(YixinJSBridge[t]=function(){try{var n=arguments.length>0?arguments[0]:{},r=n.__params?n.__params.__runOn3rd_apis||[]:[];["menu:share:timeline","menu:share:appmessage","menu:share:weibo","menu:share:qq","general:share"].forEach(function(e){r.indexOf(e)===-1&&r.push(e)})}catch(i){}return e[t].apply(YixinJSBridge,arguments)})})};if(t&&typeof t=="function"){var r=this,i=function(){n(),t(r)};typeof e.YixinJSBridge=="undefined"?document.addEventListener?document.addEventListener("YixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("YixinJSBridgeReady",i),document.attachEvent("onYixinJSBridgeReady",i)):i()}},t.openInYixin=function(){return/MicroMessenger/i.test(navigator.userAgent)},t.sendEmail=function(e,t){t=t||{},YixinJSBridge.invoke("sendEmail",{title:e.subject,content:e.body},function(e){e.err_msg==="send_email:sent"?t.success&&t.success(e):t.fail&&t.fail(e),t.all&&t.all(e)})},t.enableDebugMode=function(t){e.onerror=function(e,n,r,i){if(typeof t=="function")t({message:e,script:n,line:r,column:i});else{var s=[];s.push("额，代码有错。。。"),s.push("\n错误信息：",e),s.push("\n出错文件：",n),s.push("\n出错位置：",r+"行，"+i+"列")}}},t.share=function(e,n){t.ready(function(t){t.shareToFriend(e,n),t.shareToTimeline(e,n),t.shareToWeibo(e,n),t.generalShare(e,n)})}}(window),!function(e){var t=function(t,n){e.YixinJSBridge&&YixinApi.share(t,n),e.WeixinJSBridge&&WeixinApi.share(t,n)};typeof module=="object"&&typeof module.exports=="object"?module.exports=t:e.WYShare=t}(window)
