(function(Date){Date.lang={week:["日","一","二","三","四","五","六"]},Date.prototype.toDate=function(){return this},Date.parseDate=function(jsonString){var obj=jsonString,date=eval(obj.replace(/\/Date\((\d+)\)\//gi,"new Date($1)"));return date},Date.prototype.maxDay=function(){var e=this,t=e.toArray(),n=new Date(t[0],t[1]+1,1);return n.addDay(-1).getDate()},Date.prototype.getYearWeek=function(){var e=this,t=new Date(a,0,1),n=Math.round((e.valueOf()-t.valueOf())/864e5);return Math.ceil((n+(t.getDay()+1-1))/7)},Date.prototype.getMonthWeek=function(){var e=this,t=e.getDay(),n=e.getDate();return Math.ceil((n+6-t)/7)},Date.prototype.format=function(e){if(!e)return this.toString();var t=e,n=Date.lang.week,r=this;t=t.replace(/yyyy|YYYY/,r.getFullYear()),t=t.replace(/yy|YY/,r.getYear()%100>9?(r.getYear()%100).toString():"0"+r.getYear()%100);var i=r.getMonth()+1;return t=t.replace(/MM/,i>9?i.toString():"0"+i),t=t.replace(/M/g,i),t=t.replace(/w|W/g,n[r.getDay()]),t=t.replace(/dd|DD/,r.getDate()>9?r.getDate().toString():"0"+r.getDate()),t=t.replace(/d|D/g,r.getDate()),t=t.replace(/hh|HH/,r.getHours()>9?r.getHours().toString():"0"+r.getHours()),t=t.replace(/h|H/g,r.getHours()),t=t.replace(/mm/,r.getMinutes()>9?r.getMinutes().toString():"0"+r.getMinutes()),t=t.replace(/m/g,r.getMinutes()),t=t.replace(/ss|SS/,r.getSeconds()>9?r.getSeconds().toString():"0"+r.getSeconds()),t=t.replace(/s|S/g,r.getSeconds()),t},Date.prototype.isWeedEnd=function(){return this.getDay()==0||this.getDay()==6?!0:!1},Date.prototype.isLeapYear=function(){return 0==this.getYear()%4&&(this.getYear()%100!=0||this.getYear()%400==0)},Date.prototype.add=function(e,t){var n=this;switch(e){case"s":case"S":return new Date(Date.parse(n)+1e3*t);case"m":return new Date(Date.parse(n)+6e4*t);case"h":case"H":return new Date(Date.parse(n)+36e5*t);case"d":case"D":return new Date(Date.parse(n)+864e5*t);case"w":case"W":return new Date(Date.parse(n)+6048e5*t);case"q":case"Q":return new Date(n.getFullYear(),n.getMonth()+t*3,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case"M":case"M":return new Date(n.getFullYear(),n.getMonth()+t,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case"y":case"Y":return new Date(n.getFullYear()+t,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());default:return new Date(Date.parse(n)+864e5*t)}},Date.prototype.addDay=function(e){return this.add("d",e)},Date.prototype.addMonth=function(e){return this.add("m",e)},Date.prototype.addYear=function(e){return this.add("y",e)},Date.prototype.diff=function(e,t){var n=this.toDate();typeof e=="string"?e=e.toDate():typeof e=="number"&&(e.toString().length==10&&(e=parseInt(e)*1e3),e=new Date(e));switch(t){case"s":case"S":return parseInt((e-n)/1e3);case"m":return parseInt((e-n)/6e4);case"h":case"H":return parseInt((e-n)/36e5);case"d":case"D":return parseInt((e-n)/864e5);case"w":case"W":return parseInt((e-n)/6048e5);case"M":return e.getMonth()+1+(e.getFullYear()-n.getFullYear())*12-(n.getMonth()+1);case"y":case"Y":return e.getFullYear()-n.getFullYear();default:var r=e.getTime()-n.getTime(),i={},s=864e5,o=36e5,u=6e4,a=1e3;return i.day=Math.floor(r/s),r-=i.day*s,i.hour=Math.floor(r/o),r-=i.hour*o,i.minu=Math.floor(r/u),r-=i.minu*u,i.sec=Math.floor(r/a),i}},Date.prototype.diffDay=function(e){return this.diff(e,"d")},Date.prototype.diffHour=function(e){return this.diff(e,"h")},Date.prototype.diffMinu=function(e){return this.diff(e,"m")},Date.prototype.diffSec=function(e){return this.diff(e,"s")},Date.prototype.week=function(){var e="",t=Date.lang.week;return e+=" 星期"+t[this.getDay()],e},Date.prototype.toArray=function(){var e=this,t=Array();return t[0]=e.getFullYear(),t[1]=e.getMonth(),t[2]=e.getDate(),t[3]=e.getHours(),t[4]=e.getMinutes(),t[5]=e.getSeconds(),t},Date.prototype.star=function(){var e=[{name:"水瓶座",timeArea:"1-20&2-19"},{name:"双鱼座",timeArea:"2-20&3-20"},{name:"白羊座",timeArea:"3-21&4-20"},{name:"金牛座",timeArea:"4-21&5-20"},{name:"双子座",timeArea:"5-21&6-21"},{name:"巨蟹座",timeArea:"6-21&7-22"},{name:"狮子座",timeArea:"7-23&8-22"},{name:"狮子座",timeArea:"8-23&9-22"},{name:"天秤座",timeArea:"9-23&10-22"},{name:"天蝎座",timeArea:"10-23&11-21"},{name:"射手座",timeArea:"11-21&12-21"},{name:"魔羯座",timeArea:"12-22|1-19"}],t=this,n=this.getYear(),r=this.getMonth()+1,i=this.getDate();for(var s=0;s<e.length;s++){var o=e[s].timeArea.split("&");if(o.length>1){var u=o[0].split("-"),a=o[1].split("-"),f=new Date(n,r,i),l=new Date(n,u[0],u[1]),c=new Date(n,a[0],a[1]);if(f-l>0&&f-c<0)return e[s].name}else{o=e[s].timeArea.split("|");var u=o[0].split("-"),a=o[1].split("-"),f=new Date(n,r,i),l=new Date(n,u[0],u[1]),c=new Date(n,a[0],a[1]);if(f-l>0||f-c<0)return e[s].name}}}})(window.Date)
