!function(e){var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$elem=e(n),this.$title=e(this.options.calendarTitle,this.$elem),this.now=new Date,this.init.call(this)};t.prototype={init:function(){var e=this;this.$elem.off("click.calendar").on("click.calendar",".month-prev",function(){e.prevMonth()}).on("click.calendar",".month-next",function(){e.nextMonth()}),this.render(this.now)},render:function(t){var n=this.$elem.find("tbody tr");n.find(this.options.calendarDay).html("");var t=new Date(t.getFullYear(),t.getMonth(),t.getDate());this.$elem.trigger(e.Event("beforeChange",{eventType:this.eventType}));for(var r=1;r<this.now.maxDay()+1;r++){t.setDate(r);var i=n.eq(t.getMonthWeek()-1).find(this.options.calendarDay).eq(t.getDay()).html(r);this.$elem.trigger(e.Event("render",{eventType:this.eventType,relatedTarget:i}))}return this.$title.html(t.format(this.options.format)),this.$elem.trigger(e.Event("afterChange",{eventType:this.eventType})),this},prevMonth:function(){return this.eventType="prevMonth",this.now.setMonth(this.now.getMonth()-1),this.render(this.now)},nextMonth:function(){return this.eventType="nextMonth",this.now.setMonth(this.now.getMonth()+1),this.render(this.now)},date:function(e){return e?(this.now=e,this.render(this.now),this):this.now}},t.DEFAULTS={calendarTitle:".calendar-title",calendarDay:".calendar-day",format:"yyyy-MM"},e.fn.calendar=function(n,r){return e(this).each(function(){var i=e(this).data("calendar");i||(i=new t(this,n),e(this).data("calendar",i)),n&&i[n]&&i[n](r)})},e.fn.calendar.Constructor=t,typeof module=="object"&&typeof module.exports=="object"&&(module.exports=e)}(window.jQuery||require("jquery"))
