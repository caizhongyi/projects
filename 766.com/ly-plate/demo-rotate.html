<!doctype html><html><head><meta charset="utf-8"><title>转盘</title><style>	*{padding:0;margin:0}	body{		text-align:center	}	.ly-plate{		position:relative;		width:509px;		height:509px;		margin: 50px auto;	}	.rotate-bg{		width:509px;		height:509px;		background:url(ly-plate.png);		position:absolute;		top:0;		left:0	}	.ly-plate div.lottery-star,#lottery-btn{		width:214px;		height:214px;		position:absolute;		top:150px;		left:147px;		/*text-indent:-999em;		overflow:hidden;		background:url(rotate-static.png);		-webkit-transform:rotate(0deg);*/		outline:none	}	.ly-plate div.lottery-star #lottery-arrow{		cursor: pointer;		position: absolute;		top:0;		left:0;	}    #lottery-btn{        position: absolute;        background: none;        border: none;        z-index: 100;    }    .rvml{        left: 0;        top: 0;    }</style></head><body>	<div class="ly-plate">		<div class="rotate-bg"></div>        <input id="lottery-btn" type="button" value="start">		<div class="lottery-star"><img src="rotate-static.png" id="lottery-arrow"></div>	</div></body><script src="jquery-1.7.2.min.js"></script><script src="jQueryRotate.2.2.js"></script><script src="jquery.easing.min.js"></script><script>$(function(){    $.fn.lyplate = function(options){          var opts = $.extend(true,{},{              count     : 8,              startBtn : '#lottery-btn',              rotate     : '#lottery-arrow',              url       : null,              data      : {},              type      : 'get',              callback : null          },options);        var $start = $(opts.startBtn);        var timeOut = function(){  //超时函数            $(opts.rotate).rotate({                angle:0,                duration: 10000,                animateTo: 2160, //这里是设置请求超时后返回的角度，所以应该还是回到最原始的位置，2160是因为我要让它转6圈，就是360*6得来的                callback:function(){                    alert('网络超时');                    $start.removeAttr('disabled');                }            });        };        var rotateFunc = function(awards,angle,text){            //awards:奖项，angle:奖项对应的角度            $(opts.rotate).stopRotate();            $(opts.rotate).rotate({                angle:0,                duration: 5000,                animateTo: angle + 1440, //angle是图片上各奖项对应的角度，1440是我要让指针旋转4圈。所以最后的结束的角度就是这样子^^                callback:function(){                    alert(text);                    $start.removeAttr('disabled');                }            });        };        $(opts.arrow).rotate({});        $start.click(function(){           $(this).attr('disabled','disabled');            var itemAngle = 360 / opts.count;            if(opts.url){                $.ajax(opts.url,{                    type : opts.type,                    success : function(data){                        rotateFunc(data.index,data.index * (360 / opts.count) / 2, data.text);                        opts.callback && opts.callback.call(this);                    },                    data : opts.data                });            }            else{                var arr = [];                for(var i = 0 ;  i < opts.count ; i ++){                    arr.push(i);                }                var data = {                    index: arr[Math.floor(Math.random()*arr.length)],                    text : '恭喜您抽中的一等奖'                }                var resultAngle = data.index * itemAngle + itemAngle / 2;                rotateFunc(data.index,resultAngle, data.text);            }        })    }	$('.ly-plate').lyplate();})</script></html>