<!DOCTYPE html>
<html lang=”zh-CN”>
<head>
    <meta charset="utf-8">

    <title>我的标题</title>
    <meta name="keywords" content="keywords"/>
    <meta name="description" content="description"/>
    <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width">
    <!-- 如果内容设置为YES，Web应用程序运行在全屏模式;否则，它不会。默认行为是使用Safari浏览器显示网页内容-->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <link rel="apple-touch-icon-precomposed" href="http://pic2.58.com/m58/img/icon58b.png" />
    <link rel="apple-touch-startup-image" href="http://pic2.58.com/m58/img/icon58b.png" />
    <!-- 缩略图 -->
    <link rel="apple-touch-icon" sizes="114x114" href="touch-icon-iphone4.png" />

    <!-- base style  -->
    <link rel="stylesheet" type="text/css" media="all" href="css/zero-mobile.css" />
    <link rel="stylesheet" href="js/swipe/swipe.css"/>

    <!-- web style  -->
    <link rel="stylesheet" type="text/css" media="all" href="css/layout.css"/>
    <link rel="stylesheet" type="text/css" media="all" href="css/index.css"/>

    <script src="js/jquery-2.0.3.min.js"></script>
    <style>
        /**** Transitions ****/

        .transitions-enabled.masonry,
        .transitions-enabled.masonry .masonry-brick {
            -webkit-transition-duration: 0.7s;
            -moz-transition-duration: 0.7s;
            -o-transition-duration: 0.7s;
            transition-duration: 0.7s;
        }

        .transitions-enabled.masonry {
            -webkit-transition-property: height, width;
            -moz-transition-property: height, width;
            -o-transition-property: height, width;
            transition-property: height, width;
        }

        .transitions-enabled.masonry  .masonry-brick {
            -webkit-transition-property: left, right, top;
            -moz-transition-property: left, right, top;
            -o-transition-property: left, right, top;
            transition-property: left, right, top;
        }


        /* disable transitions on container */
        .transitions-enabled.infinite-scroll.masonry {
            -webkit-transition-property: none;
            -moz-transition-property: none;
            -o-transition-property: none;
            transition-property: none;
        }

        /**** Primer comparison ****/
    </style>
</head>
<body class="navbar-bottom-fixed">
<!-- header -->
<header class="header">
    <div class="pull-left"><a href=""><i class="icon-img-chevron-left"></i></a></div>
    <div class="main text-ellipsis">
        图片墙
    </div>
</header>

<div class="list-thumbnail list-thumbnail-photo transitions-enabled">
    <li class="item">
        <div class="thumbnail">
            <a href="">
                <img src="pic/2.jpg" alt="">
                <span class="title">thumbnail</span>
            </a>
        </div>
    </li>
    <li class="item">
        <div class="thumbnail">
            <a href="">
                <img src="pic/2.jpg" style="height: 400px;" alt="">
                <span class="title">thumbnail</span>
            </a>
        </div>
    </li>
    <li class="item">
        <div class="thumbnail">
            <a href="">
                <img src="pic/1.jpg" alt="">
                <span class="title">thumbnail</span>
            </a>
        </div>
    </li>
    <li class="item">
        <div class="thumbnail">
            <a href="">
                <img src="pic/1.jpg" alt="">
                <span class="title">thumbnail</span>
            </a>
        </div>
    </li>
</div>

<div class="navbar navbar-bottom">
    <ul>
        <li><a href=""><i class="icon-img-home"></i><div>首页</div></a></li>
        <li class="new"><a href=""><i class="icon-img-msg"></i><div class="text-ellipsis">活动资讯</div></a></li>
        <li><a href=""><i class="icon-img-menu"></i><br/><div>菜单</div></a></li>
        <li class="active"><a href=""><i class="icon-img-shop"></i><br/><div>购物车</div></a></li>
        <li><a href=""><i class="icon-img-user"></i><br/><div class="text-ellipsis">会员</div></a></li>
    </ul>
</div>

<script src="js/swipe/swipe.js"></script>
<script>jQuery.event.handle = jQuery.event.dispatch;</script>
<script src="js/jquery.masonry.min.js"></script>
<script src="js/global.js"></script>
<script>
    var finished = true;
    function loadData() {
        finished = true;
    }
    var $container = $('.list-thumbnail');
    $(document).ready(function () {
        $container.imagesLoaded( function(){
            $container.masonry({
                itemSelector: '.item',
                // set columnWidth a fraction of the container width
                columnWidth: function( containerWidth ) {
                    return containerWidth / 2;
                }
            });
        });
//
        $(window).scroll(function(){
            if (finished && $(document).height() - $(this).scrollTop() - $(this).height()<50){

                finished = false;
                setTimeout(insertcode, 1000);/*IE 不支持*/
            }
        });
    });

    function insertcode(){
        var $boxes = $('<li class="item"><div class="thumbnail"><a href=""><img src="pic/1.jpg" alt=""><span class="title">thumbnail</span></a></div></li>');
        $boxes.imagesLoaded( function(){
            // show elems now they're ready
            $container.append( $boxes ).masonry( 'appended', $boxes );
        });
        loadData();
    }
</script>

</body>
</html>
