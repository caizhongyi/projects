<form name="form" ng-submit="submit(form.$valid)"  role="form" novalidate>

    <table class="table modv2-table table-hover">
        <tr>
            <th width="12%"><span class="text-danger">*</span> 付款类型：</th>
            <td>
                <div class=" modv2-inputg">
                    <input type="text" placeholder="付款类型" id="detail_type_name" name="detail_type_name" class="form-control "  ng-model="submitter.detail_type_name" required>
                </div>
                <span class="text-danger">请填写具体的款项用途(如：年检费、年检代办费、保险费、保险差额、违章费、刷卡差额、纠纷补偿等)</span>
                <div class="has-feedback text-danger" ng-messages="form.detail_type_name.$error" ng-show="interacted(form.detail_type_name)">
                    <div ng-message="required"><i class="fa fa-info-circle"></i> 请输入付款类型！</div>
                </div>
            </td>
            <th width="12%"><span class="text-danger">*</span> 付款金额：</th>
            <td>
                <div class="input-group modv2-inputg">
                    <input type="text" placeholder="付款金额" id="car_fee" name="car_fee" class="form-control text-right"  ng-model="submitter.fee"  max-number="item.max_detail.car_fee" required money-validator="">
                    <div class="input-group-addon">元</div>
                </div>
                <span>最多申请：<span class="text-danger">{{ item.max_detail.car_fee }}</span>元（已申请支付：{{ item.applied.car_fee }} 元）</span>
                <div class="has-feedback text-danger" ng-messages="form.car_fee.$error" ng-show="interacted(form.car_fee)">
                    <div ng-message="required"><i class="fa fa-info-circle"></i> 请输入付款金额！</div>
                    <div ng-message="moneyValidator"><i class="fa fa-info-circle"></i> 输入的付款金额格式不正确！</div>
                </div>
            </td>
        </tr>
        <tr>
            <th><span class="text-danger">*</span> 申请理由：</th>
            <td colspan="3">
                <textarea  class="form-control" id="reason" placeholder="申请理由" name="reason" ng-model="submitter.reason" required></textarea>
                <span class="text-danger"> 为了款项能够快速审核通过，请填写详实的理由。</span>
                <div class="has-feedback text-danger" ng-messages="form.reason.$error" ng-show="interacted(form.reason)">
                    <div ng-message="required"><i class="fa fa-info-circle"></i> 请输入申请理由！</div>
                </div>
            </td>
        </tr>
        <tr>
            <th rowspan="2" width="12%"> 上传凭证：</th>
            <td colspan="3">
                 <span class="btn btn-primary btn-file modv2-btn" ngf-select ngf-drop ng-model="certificate_pic" ng-model-rejected="rejFiles"
                       ngf-multiple="true" ngf-accept="accept" accept="image/*"
                       ng-disabled="disabled" ngf-capture="capture"
                       ngf-drag-over-class="{accept:'dragover', reject:'dragover-err', delay:100}"
                       ngf-min-size="minSize" ngf-max-size="1024000 * 5"
                       ngf-keep="true" ngf-keep-distinct="true"
                       ngf-reset-model-on-click="resetModelOnClick"
                       ngf-allow-dir="allowDir" class="drop-box" ngf-drop-available="dropAvailable"><!--<input type="file"/>-->上传照片</span>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <ul  ng-show="certificate_pic.length > 0" class="response list-unstyled clearfix">
                    <li class="sel-file" ng-repeat="f in certificate_pic">
                        <a href="{{f.url}}" ng-if="f.url" target="_blank"><img ng-src="{{f.url}}"  class="thumb" ></a>
                        <img ng-if="!f.url"  ng-show="f.type.indexOf('image') > -1" class="thumb" >
                                <span class="progress" ng-show="f.progress >= 0">
                                    <div style="width:{{f.progress}}%">{{f.progress}}%</div>
                                </span>
                        <a href="javascript:;" class="delete"  ng-click="delete(certificate_pic)" >×</a>
                        <div>
                          <!--  <button class="btn btn-primary btn-file modv2-btn" ng-click="f.upload.abort();f.upload.aborted=true"
                                    ng-show="f.upload != null && f.progress < 100 && !f.upload.aborted">Abort
                            </button>-->
                        </div>
                        <!--   {{f.name}} - size: {{f.size}}B - type: {{f.type}}-->
                        <a ng-show="f.result" href="javascript:void(0)" ng-click="f.showDetail = !f.showDetail">details</a>

                        <div ng-show="f.showDetail">
                            <br/>

                            <div data-ng-show="f.result.result == null">{{f.result}}</div>
                            <ul>
                                <li ng-repeat="item in f.result.result">
                                    <div data-ng-show="item.name">file name: {{item.name}}</div>
                                    <div data-ng-show="item.fieldName">name: {{item.fieldName}}</div>
                                    <div data-ng-show="item.size">size on the serve: {{item.size}}</div>
                                    <div data-ng-show="item.value">value: {{item.value}}</div>
                                </li>
                            </ul>
                            <div data-ng-show="f.result.requestHeaders" class="reqh">request headers: {{f.result.requestHeaders}}</div>
                        </div>
                    </li>
                </ul>
            </td>
        </tr>

        <tr>
            <th width="12%">
                收款人姓名：
            </th>
            <td>
                {{ item.payee_realname }}
            </td>
            <th width="12%">
                收款账户：
            </th>
            <td>
                {{ item.payee_cardno }}
            </td>
        </tr>
        <tr>
            <th width="12%">
                收款银行：
            </th>
            <td>
                {{ item.payee_bank }}
            </td>
            <th width="12%">
                开户支行：
            </th>
            <td>
                {{ item.payee_bank_branch }}
            </td>
        </tr>
    </table>
    <button class="btn btn-primary modv2-btn">提交申请</button>
</form>

<script type="text/ng-template" id="tpl-bank-card-auth.html">
    <form role="form" name="cardForm" ng-submit="cardFormSubmit(cardForm.$valid)"  novalidate>
        <div class="modal-header">
            <button aria-label="Close" data-dismiss="modal" class="close" type="button" ng-click="cancel()"><span aria-hidden="true">×</span></button>
            <h3 class="modal-title">银行卡认证</h3>
        </div>
        <div class="modal-body">
            <div class="box-body">
                <table class="table">
                    <tr>
                        <td class="text-danger" colspan="2">为了款项安全，请进行收款银行卡认证</td>
                    </tr>
                    <tr>
                        <td class="">收款人姓名：</td>
                        <td>{{item.payee_realname}}</td>
                    </tr>
                    <tr>
                        <td class="">收款人帐户：</td>
                        <td>{{item.payee_bank_card_number}}</td>
                    </tr>
                    <tr>
                        <td class="">收款银行：</td>
                        <td>{{item.payee_bank}}</td>
                    </tr>
                    <tr>
                        <td class="">开户支行：</td>
                        <td>{{item.payee_bank_branch}}</td>
                    </tr>
                    <tr>
                        <td class="">身份证号：</td>
                        <td>
                            {{item.payee_idcard}}
                        </td>
                    </tr>
                    <tr>
                        <td class=""><span class="text-danger">*</span> 银行预留手机号：</td>
                        <td>
                            <div class="modv2-inputg">
                                <input type="text" ng-model="item.linkman_phone" class="form-control"  name="linkman_phone" id="linkman_phone" placeholder="银行预留手机号" value="{{item.linkman_phone}}">
                            </div>
                            <div class="has-feedback text-danger" ng-messages="cardForm.linkman_phone.$error" ng-show="interactedModal(cardForm.linkman_phone)">
                                <div ng-message="required"><i class="fa fa-info-circle"></i>请输入银行预留手机号。</div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class=""><span class="text-danger">*</span> 验证码：</td>
                        <td>
                            <span class="input-group modv2-inputg">
                                <input type="text"  ng-model="item.code" class="form-control" name="code" placeholder="验证码"  value="{{item.code}}" >
                                <div class="input-group-btn">
                                    <button class="btn btn-primary" type="button" count-down="sendCode({ id : $scope.item.id , phone_no :  $scope.item.linkman_phone  })" >
                                        获取验证码
                                    </button>
                                </div>
                            </span>
                            <div class="has-feedback text-danger" ng-messages="cardForm.code.$error" ng-show="interactedModal(cardForm.code)">
                                <div ng-message="required"><i class="fa fa-info-circle"></i>请输入验证码。</div>
                            </div>
                        </td>
                    </tr>

                </table>

            </div><!-- /.box-body -->

        </div>
        <div class="modal-footer">
            <button class="btn btn-primary modv2-btn"  ng-disabled="submitted1" >确认</button>
            <button class="btn btn-primary modv2-btn" ng-click="cancel()" type="button">暂时不认证</button>
        </div>
    </form>
</script>