<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>..\node_modules\oclazyload\dist\ocLazyLoad.js - SmartDoc</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartdoc">
             
            <img alt="SmartDoc" src="../assets/css/logo.png" title="SmartDoc">
            
                SmartDoc
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartdoc">Home</a>
                    </li>
                    
                    <li><a href="/">Document</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartdoc">About</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/273.html">273</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/alienjs.html">alienjs</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/window.require.html">window.require</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Countdown.html">Countdown</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Date.html">Date</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery.html">jquery</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.transitionEnd.html">jquery.transitionEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.support.transition.html">jquery.support.transition</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.animationEnd.html">jquery.animationEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery-ui.html">jquery-ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.ajaxPanel.html">jquery.ajaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.dialog.html">jquery.dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Array.html">Array</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.browserLowVersion.html">jquery.browserLowVersion</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.confirm.html">jquery.confirm</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.alert.html">jquery.alert</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ng.html">ng</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMock.html">ngMock</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMockE2E.html">ngMockE2E</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ui.html">ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/AjaxPanel.html">AjaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Date.Dialog.html">Date.Dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/WebUploader.html">WebUploader</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Base.html">Base</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Mediator.html">Mediator</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/options.Uploader.html">options.Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.File.html">File.File</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.Queue.html">File.Queue</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Uploader.html">Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/window.html">window</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <!--     <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>

 -->
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>..\node_modules\oclazyload\dist\ocLazyLoad.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums" id='src_code'>
/**
 * oclazyload - Load modules on demand (lazy load) with angularJS
 * @version v0.6.3
 * @link https://github.com/ocombe/ocLazyLoad
 * @license MIT
 * @author Olivier Combe &lt;olivier.combe@gmail.com&gt;
 */
(function() {
  &#x27;use strict&#x27;;
  var regModules = [&#x27;ng&#x27;],
    regInvokes = {},
    regConfigs = [],
    justLoaded = [],
    runBlocks = {},
    ocLazyLoad = angular.module(&#x27;oc.lazyLoad&#x27;, [&#x27;ng&#x27;]),
    broadcast = angular.noop,
    modulesToLoad = [],
    recordDeclarations = [true];

  ocLazyLoad.provider(&#x27;$ocLazyLoad&#x27;, [&#x27;$controllerProvider&#x27;, &#x27;$provide&#x27;, &#x27;$compileProvider&#x27;, &#x27;$filterProvider&#x27;, &#x27;$injector&#x27;, &#x27;$animateProvider&#x27;,
    function($controllerProvider, $provide, $compileProvider, $filterProvider, $injector, $animateProvider) {
      var modules = {},
        providers = {
          $controllerProvider: $controllerProvider,
          $compileProvider: $compileProvider,
          $filterProvider: $filterProvider,
          $provide: $provide, // other things
          $injector: $injector,
          $animateProvider: $animateProvider
        },
        anchor = document.getElementsByTagName(&#x27;head&#x27;)[0] || document.getElementsByTagName(&#x27;body&#x27;)[0],
        jsLoader, cssLoader, templatesLoader,
        debug = false,
        events = false;

      // Let&#x27;s get the list of loaded modules &amp; components
      init(angular.element(window.document));

      this.$get = [&#x27;$log&#x27;, &#x27;$q&#x27;, &#x27;$templateCache&#x27;, &#x27;$http&#x27;, &#x27;$rootElement&#x27;, &#x27;$rootScope&#x27;, &#x27;$cacheFactory&#x27;, &#x27;$interval&#x27;, function($log, $q, $templateCache, $http, $rootElement, $rootScope, $cacheFactory, $interval) {
        var instanceInjector,
          filesCache = $cacheFactory(&#x27;ocLazyLoad&#x27;),
          uaCssChecked = false,
          useCssLoadPatch = false;

        if(!debug) {
          $log = {};
          $log[&#x27;error&#x27;] = angular.noop;
          $log[&#x27;warn&#x27;] = angular.noop;
          $log[&#x27;info&#x27;] = angular.noop;
        }

        // Make this lazy because at the moment that $get() is called the instance injector hasn&#x27;t been assigned to the rootElement yet
        providers.getInstanceInjector = function() {
          return (instanceInjector) ? instanceInjector : (instanceInjector = ($rootElement.data(&#x27;$injector&#x27;) || angular.injector()));
        };

        broadcast = function broadcast(eventName, params) {
          if(events) {
            $rootScope.$broadcast(eventName, params);
          }
          if(debug) {
            $log.info(eventName, params);
          }
        };

        /**
         * Load a js/css file
         * @param type
         * @param path
         * @param params
         * @returns promise
         */
        var buildElement = function buildElement(type, path, params) {
          var deferred = $q.defer(),
            el, loaded,
            cacheBuster = function cacheBuster(url) {
              var dc = new Date().getTime();
              if(url.indexOf(&#x27;?&#x27;) &gt;= 0) {
                if(url.substring(0, url.length - 1) === &#x27;&amp;&#x27;) {
                  return url + &#x27;_dc=&#x27; + dc;
                }
                return url + &#x27;&amp;_dc=&#x27; + dc;
              } else {
                return url + &#x27;?_dc=&#x27; + dc;
              }
            };

          // Store the promise early so the file load can be detected by other parallel lazy loads
          // (ie: multiple routes on one page) a &#x27;true&#x27; value isn&#x27;t sufficient
          // as it causes false positive load results.
          if(angular.isUndefined(filesCache.get(path))) {
            filesCache.put(path, deferred.promise);
          }

          // Switch in case more content types are added later
          switch(type) {
            case &#x27;css&#x27;:
              el = document.createElement(&#x27;link&#x27;);
              el.type = &#x27;text/css&#x27;;
              el.rel = &#x27;stylesheet&#x27;;
              el.href = params.cache === false ? cacheBuster(path) : path;
              break;
            case &#x27;js&#x27;:
              el = document.createElement(&#x27;script&#x27;);
              el.src = params.cache === false ? cacheBuster(path) : path;
              break;
            default:
              deferred.reject(new Error(&#x27;Requested type &quot;&#x27; + type + &#x27;&quot; is not known. Could not inject &quot;&#x27; + path + &#x27;&quot;&#x27;));
              break;
          }
          el.onload = el[&#x27;onreadystatechange&#x27;] = function(e) {
            if((el[&#x27;readyState&#x27;] &amp;&amp; !(/^c|loade/.test(el[&#x27;readyState&#x27;]))) || loaded) return;
            el.onload = el[&#x27;onreadystatechange&#x27;] = null;
            loaded = 1;
            broadcast(&#x27;ocLazyLoad.fileLoaded&#x27;, path);
            deferred.resolve();
          };
          el.onerror = function() {
            deferred.reject(new Error(&#x27;Unable to load &#x27; + path));
          };
          el.async = params.serie ? 0 : 1;

          var insertBeforeElem = anchor.lastChild;
          if(params.insertBefore) {
            var element = angular.element(params.insertBefore);
            if(element &amp;&amp; element.length &gt; 0) {
              insertBeforeElem = element[0];
            }
          }
          anchor.insertBefore(el, insertBeforeElem);

          /*
           The event load or readystatechange doesn&#x27;t fire in:
           - iOS &lt; 6       (default mobile browser)
           - Android &lt; 4.4 (default mobile browser)
           - Safari &lt; 6    (desktop browser)
           */
          if(type == &#x27;css&#x27;) {
            if(!uaCssChecked) {
              var ua = navigator.userAgent.toLowerCase();

              // iOS &lt; 6
              if(/iP(hone|od|ad)/.test(navigator.platform)) {
                var v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
                var iOSVersion = parseFloat([parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)].join(&#x27;.&#x27;));
                useCssLoadPatch = iOSVersion &lt; 6;
              } else if(ua.indexOf(&quot;android&quot;) &gt; -1) { // Android &lt; 4.4
                var androidVersion = parseFloat(ua.slice(ua.indexOf(&quot;android&quot;) + 8));
                useCssLoadPatch = androidVersion &lt; 4.4;
              } else if(ua.indexOf(&#x27;safari&#x27;) &gt; -1 &amp;&amp; ua.indexOf(&#x27;chrome&#x27;) == -1) {
                var safariVersion = parseFloat(ua.match(/version\/([\.\d]+)/i)[1]);
                useCssLoadPatch = safariVersion &lt; 6;
              }
            }

            if(useCssLoadPatch) {
              var tries = 1000; // * 20 = 20000 miliseconds
              var interval = $interval(function() {
                try {
                  el.sheet.cssRules;
                  $interval.cancel(interval);
                  el.onload();
                } catch(e) {
                  if(--tries &lt;= 0) {
                    el.onerror();
                  }
                }
              }, 20);
            }
          }

          return deferred.promise;
        };

        if(angular.isUndefined(jsLoader)) {
          /**
           * jsLoader function
           * @type Function
           * @param paths array list of js files to load
           * @param callback to call when everything is loaded. We use a callback and not a promise
           * @param params object config parameters
           * because the user can overwrite jsLoader and it will probably not use promises :(
           */
          jsLoader = function(paths, callback, params) {
            var promises = [];
            angular.forEach(paths, function loading(path) {
              promises.push(buildElement(&#x27;js&#x27;, path, params));
            });
            $q.all(promises).then(function success() {
              callback();
            }, function error(err) {
              callback(err);
            });
          };
          jsLoader.ocLazyLoadLoader = true;
        }

        if(angular.isUndefined(cssLoader)) {
          /**
           * cssLoader function
           * @type Function
           * @param paths array list of css files to load
           * @param callback to call when everything is loaded. We use a callback and not a promise
           * @param params object config parameters
           * because the user can overwrite cssLoader and it will probably not use promises :(
           */
          cssLoader = function(paths, callback, params) {
            var promises = [];
            angular.forEach(paths, function loading(path) {
              promises.push(buildElement(&#x27;css&#x27;, path, params));
            });
            $q.all(promises).then(function success() {
              callback();
            }, function error(err) {
              callback(err);
            });
          };
          cssLoader.ocLazyLoadLoader = true;
        }

        if(angular.isUndefined(templatesLoader)) {
          /**
           * templatesLoader function
           * @type Function
           * @param paths array list of css files to load
           * @param callback to call when everything is loaded. We use a callback and not a promise
           * @param params object config parameters for $http
           * because the user can overwrite templatesLoader and it will probably not use promises :(
           */
          templatesLoader = function(paths, callback, params) {
            var promises = [];
            angular.forEach(paths, function(url) {
              var deferred = $q.defer();
              promises.push(deferred.promise);
              $http.get(url, params).success(function(data) {
                if(angular.isString(data) &amp;&amp; data.length &gt; 0) {
                  angular.forEach(angular.element(data), function(node) {
                    if(node.nodeName === &#x27;SCRIPT&#x27; &amp;&amp; node.type === &#x27;text/ng-template&#x27;) {
                      $templateCache.put(node.id, node.innerHTML);
                    }
                  });
                }
                if(angular.isUndefined(filesCache.get(url))) {
                  filesCache.put(url, true);
                }
                deferred.resolve();
              }).error(function(err) {
                deferred.reject(new Error(&#x27;Unable to load template file &quot;&#x27; + url + &#x27;&quot;: &#x27; + err));
              });
            });
            return $q.all(promises).then(function success() {
              callback();
            }, function error(err) {
              callback(err);
            });
          };
          templatesLoader.ocLazyLoadLoader = true;
        }

        var filesLoader = function filesLoader(config, params) {
          var cssFiles = [],
            templatesFiles = [],
            jsFiles = [],
            promises = [],
            cachePromise = null;

          recordDeclarations.push(true); // start watching angular.module calls

          angular.extend(params || {}, config);

          var pushFile = function(path) {
            var file_type = null, m;
            if (typeof path === &#x27;object&#x27;) {
                file_type = path.type;
                path = path.path;
            }
            cachePromise = filesCache.get(path);
            if(angular.isUndefined(cachePromise) || params.cache === false) {

              // always check for requirejs syntax just in case
              if ((m = /^(css|less|html|htm|js)?(?=!)/.exec(path)) !== null) { // Detect file type using preceding type declaration (ala requireJS)
                file_type = m[1];
                path = path.substr(m[1].length + 1, path.length);  // Strip the type from the path
              }

              if (!file_type) {
                if ((m = /[.](css|less|html|htm|js)?(\?.*)?$/.exec(path)) !== null) {  // Detect file type via file extension
                    file_type = m[1];
                } else if(!jsLoader.hasOwnProperty(&#x27;ocLazyLoadLoader&#x27;) &amp;&amp; jsLoader.hasOwnProperty(&#x27;load&#x27;)) { // requirejs
                  file_type = &#x27;js&#x27;;
                } else {
                    $log.error(&#x27;File type could not be determined. &#x27; + path);
                    return;
                }
              }

              if((file_type === &#x27;css&#x27; || file_type === &#x27;less&#x27;) &amp;&amp; cssFiles.indexOf(path) === -1) {
                cssFiles.push(path);
              } else if ((file_type === &#x27;html&#x27; || file_type === &#x27;htm&#x27;) &amp;&amp; templatesFiles.indexOf(path) === -1) {
                templatesFiles.push(path);
              } else if((file_type === &#x27;js&#x27;) || jsFiles.indexOf(path) === -1) {
                jsFiles.push(path);
              } else {
                  $log.error(&#x27;File type is not valid. &#x27; + path);
              }

            } else if(cachePromise) {
              promises.push(cachePromise);
            }
          };

          if(params.serie) {
            pushFile(params.files.shift());
          } else {
            angular.forEach(params.files, function(path) {
              pushFile(path);
            });
          }

          if(cssFiles.length &gt; 0) {
            var cssDeferred = $q.defer();
            cssLoader(cssFiles, function(err) {
              if(angular.isDefined(err) &amp;&amp; cssLoader.hasOwnProperty(&#x27;ocLazyLoadLoader&#x27;)) {
                $log.error(err);
                cssDeferred.reject(err);
              } else {
                cssDeferred.resolve();
              }
            }, params);
            promises.push(cssDeferred.promise);
          }

          if(templatesFiles.length &gt; 0) {
            var templatesDeferred = $q.defer();
            templatesLoader(templatesFiles, function(err) {
              if(angular.isDefined(err) &amp;&amp; templatesLoader.hasOwnProperty(&#x27;ocLazyLoadLoader&#x27;)) {
                $log.error(err);
                templatesDeferred.reject(err);
              } else {
                templatesDeferred.resolve();
              }
            }, params);
            promises.push(templatesDeferred.promise);
          }

          if(jsFiles.length &gt; 0) {
            var jsDeferred = $q.defer();
            jsLoader(jsFiles, function(err) {
              if(angular.isDefined(err) &amp;&amp; jsLoader.hasOwnProperty(&#x27;ocLazyLoadLoader&#x27;)) {
                $log.error(err);
                jsDeferred.reject(err);
              } else {
                jsDeferred.resolve();
              }
            }, params);
            promises.push(jsDeferred.promise);
          }

          if(params.serie &amp;&amp; params.files.length &gt; 0) {
            return $q.all(promises).then(function success() {
              return filesLoader(config, params);
            });
          } else {
            return $q.all(promises).finally(function(res) {
              recordDeclarations.pop(); // stop watching angular.module calls
              return res;
            });
          }
        };

        return {
          /**
           * Let you get a module config object
           * @param moduleName String the name of the module
           * @returns {*}
           */
          getModuleConfig: function(moduleName) {
            if(!angular.isString(moduleName)) {
              throw new Error(&#x27;You need to give the name of the module to get&#x27;);
            }
            if(!modules[moduleName]) {
              return null;
            }
            return modules[moduleName];
          },

          /**
           * Let you define a module config object
           * @param moduleConfig Object the module config object
           * @returns {*}
           */
          setModuleConfig: function(moduleConfig) {
            if(!angular.isObject(moduleConfig)) {
              throw new Error(&#x27;You need to give the module config object to set&#x27;);
            }
            modules[moduleConfig.name] = moduleConfig;
            return moduleConfig;
          },

          /**
           * Returns the list of loaded modules
           * @returns {string[]}
           */
          getModules: function() {
            return regModules;
          },

          /**
           * Let you check if a module has been loaded into Angular or not
           * @param modulesNames String/Object a module name, or a list of module names
           * @returns {boolean}
           */
          isLoaded: function(modulesNames) {
            var moduleLoaded = function(module) {
              var isLoaded = regModules.indexOf(module) &gt; -1;
              if(!isLoaded) {
                isLoaded = !!moduleExists(module);
              }
              return isLoaded;
            };
            if(angular.isString(modulesNames)) {
              modulesNames = [modulesNames];
            }
            if(angular.isArray(modulesNames)) {
              var i, len;
              for(i = 0, len = modulesNames.length; i &lt; len; i++) {
                if(!moduleLoaded(modulesNames[i])) {
                  return false;
                }
              }
              return true;
            } else {
              throw new Error(&#x27;You need to define the module(s) name(s)&#x27;);
            }
          },

          /**
           * Load a module or a list of modules into Angular
           * @param module Mixed the name of a predefined module config object, or a module config object, or an array of either
           * @param params Object optional parameters
           * @returns promise
           */
          load: function(module, params) {
            var self = this,
              config = null,
              moduleCache = [],
              deferredList = [],
              deferred = $q.defer(),
              errText;

            if(angular.isUndefined(params)) {
              params = {};
            }

            // If module is an array, break it down
            if(angular.isArray(module)) {
              // Resubmit each entry as a single module
              angular.forEach(module, function(m) {
                if(m) {
                  deferredList.push(self.load(m, params));
                }
              });

              // Resolve the promise once everything has loaded
              $q.all(deferredList).then(function success() {
                deferred.resolve(module);
              }, function error(err) {
                deferred.reject(err);
              });

              return deferred.promise;
            }

            // Get or Set a configuration depending on what was passed in
            if(typeof module === &#x27;string&#x27;) {
              config = self.getModuleConfig(module);
              if(!config) {
                config = {
                  files: [module]
                };
              }
            } else if(typeof module === &#x27;object&#x27;) {
              if(angular.isDefined(module.path) &amp;&amp; angular.isDefined(module.type)) { // case {type: &#x27;js&#x27;, path: lazyLoadUrl + &#x27;testModule.fakejs&#x27;}
                config = {
                  files: [module]
                };
              } else {
                config = self.setModuleConfig(module);
              }
            }

            if(config === null) {
              var moduleName = getModuleName(module);
              errText = &#x27;Module &quot;&#x27; + (moduleName || &#x27;unknown&#x27;) + &#x27;&quot; is not configured, cannot load.&#x27;;
              $log.error(errText);
              deferred.reject(new Error(errText));
              return deferred.promise;
            } else {
              // deprecated
              if(angular.isDefined(config.template)) {
                if(angular.isUndefined(config.files)) {
                  config.files = [];
                }
                if(angular.isString(config.template)) {
                  config.files.push(config.template);
                } else if(angular.isArray(config.template)) {
                  config.files.concat(config.template);
                }
              }
            }

            moduleCache.push = function(value) {
              if(this.indexOf(value) === -1) {
                Array.prototype.push.apply(this, arguments);
              }
            };

            var localParams = {};
            angular.extend(localParams, params, config);

            var loadDependencies = function loadDependencies(module) {
              var moduleName,
                loadedModule,
                requires,
                diff,
                promisesList = [];

              moduleName = getModuleName(module);
              if(moduleName === null) {
                return $q.when();
              } else {
                try {
                  loadedModule = getModule(moduleName);
                } catch(e) {
                  var deferred = $q.defer();
                  $log.error(e.message);
                  deferred.reject(e);
                  return deferred.promise;
                }
                requires = getRequires(loadedModule);
              }

              angular.forEach(requires, function(requireEntry) {
                // If no configuration is provided, try and find one from a previous load.
                // If there isn&#x27;t one, bail and let the normal flow run
                if(typeof requireEntry === &#x27;string&#x27;) {
                  var config = self.getModuleConfig(requireEntry);
                  if(config === null) {
                    moduleCache.push(requireEntry); // We don&#x27;t know about this module, but something else might, so push it anyway.
                    return;
                  }
                  requireEntry = config;
                }

                // Check if this dependency has been loaded previously
                if(moduleExists(requireEntry.name)) {
                  if(typeof module !== &#x27;string&#x27;) {
                    // compare against the already loaded module to see if the new definition adds any new files
                    diff = requireEntry.files.filter(function(n) {
                      return self.getModuleConfig(requireEntry.name).files.indexOf(n) &lt; 0;
                    });

                    // If the module was redefined, advise via the console
                    if(diff.length !== 0) {
                      $log.warn(&#x27;Module &quot;&#x27;, moduleName, &#x27;&quot; attempted to redefine configuration for dependency. &quot;&#x27;, requireEntry.name, &#x27;&quot;\n Additional Files Loaded:&#x27;, diff);
                    }

                    // Push everything to the file loader, it will weed out the duplicates.
                    promisesList.push(filesLoader(requireEntry.files, localParams).then(function() {
                      return loadDependencies(requireEntry);
                    }));
                  }
                  return;
                } else if(angular.isArray(requireEntry)) {
                  requireEntry = {
                    files: requireEntry
                  };
                } else if(typeof requireEntry === &#x27;object&#x27;) {
                  if(requireEntry.hasOwnProperty(&#x27;name&#x27;) &amp;&amp; requireEntry[&#x27;name&#x27;]) {
                    // The dependency doesn&#x27;t exist in the module cache and is a new configuration, so store and push it.
                    self.setModuleConfig(requireEntry);
                    moduleCache.push(requireEntry[&#x27;name&#x27;]);
                  }
                }

                // Check if the dependency has any files that need to be loaded. If there are, push a new promise to the promise list.
                if(requireEntry.hasOwnProperty(&#x27;files&#x27;) &amp;&amp; requireEntry.files.length !== 0) {
                  if(requireEntry.files) {
                    promisesList.push(filesLoader(requireEntry, localParams).then(function() {
                      return loadDependencies(requireEntry);
                    }));
                  }
                }
              });

              // Create a wrapper promise to watch the promise list and resolve it once everything is done.
              return $q.all(promisesList);
            };

            // if someone loaded the module file with something else and called the load function with just the module name
            if(angular.isUndefined(config.files) &amp;&amp; angular.isDefined(config.name) &amp;&amp; moduleExists(config.name)) {
              recordDeclarations.push(true); // start watching angular.module calls
              addToLoadList(config.name);
              recordDeclarations.pop();
            }

            filesLoader(config, localParams).then(function success() {
              if(modulesToLoad.length === 0) {
                deferred.resolve(module);
              } else {
                var loadNext = function loadNext(moduleName) {
                  moduleCache.push(moduleName);
                  loadDependencies(moduleName).then(function success() {
                    try {
                      justLoaded = [];
                      register(providers, moduleCache, localParams);
                    } catch(e) {
                      $log.error(e.message);
                      deferred.reject(e);
                      return;
                    }

                    if(modulesToLoad.length &gt; 0) {
                      loadNext(modulesToLoad.shift()); // load the next in list
                    } else {
                      deferred.resolve(module); // everything has been loaded, resolve
                    }
                  }, function error(err) {
                    deferred.reject(err);
                  });
                };

                // load the first in list
                loadNext(modulesToLoad.shift());
              }
            }, function error(err) {
              deferred.reject(err);
            });

            return deferred.promise;
          }
        };
      }];

      this.config = function(config) {
        if(angular.isDefined(config.jsLoader) || angular.isDefined(config.asyncLoader)) {
          if(!angular.isFunction(config.jsLoader || config.asyncLoader)) {
            throw(&#x27;The js loader needs to be a function&#x27;);
          }
          jsLoader = config.jsLoader || config.asyncLoader;
        }

        if(angular.isDefined(config.cssLoader)) {
          if(!angular.isFunction(config.cssLoader)) {
            throw(&#x27;The css loader needs to be a function&#x27;);
          }
          cssLoader = config.cssLoader;
        }

        if(angular.isDefined(config.templatesLoader)) {
          if(!angular.isFunction(config.templatesLoader)) {
            throw(&#x27;The template loader needs to be a function&#x27;);
          }
          templatesLoader = config.templatesLoader;
        }

        // If we want to define modules configs
        if(angular.isDefined(config.modules)) {
          if(angular.isArray(config.modules)) {
            angular.forEach(config.modules, function(moduleConfig) {
              modules[moduleConfig.name] = moduleConfig;
            });
          } else {
            modules[config.modules.name] = config.modules;
          }
        }

        if(angular.isDefined(config.debug)) {
          debug = config.debug;
        }

        if(angular.isDefined(config.events)) {
          events = config.events;
        }
      };
    }]);

  ocLazyLoad.directive(&#x27;ocLazyLoad&#x27;, [&#x27;$ocLazyLoad&#x27;, &#x27;$compile&#x27;, &#x27;$animate&#x27;, &#x27;$parse&#x27;,
    function($ocLazyLoad, $compile, $animate, $parse) {
      return {
        restrict: &#x27;A&#x27;,
        terminal: true,
        priority: 1000,
        compile: function(element, attrs) {
          // we store the content and remove it before compilation
          var content = element[0].innerHTML;
          element.html(&#x27;&#x27;);

          return function($scope, $element, $attr) {
            var model = $parse($attr.ocLazyLoad);
            $scope.$watch(function() {
              // it can be a module name (string), an object, an array, or a scope reference to any of this
              return model($scope) || $attr.ocLazyLoad;
            }, function(moduleName) {
              if(angular.isDefined(moduleName)) {
                $ocLazyLoad.load(moduleName).then(function success(moduleConfig) {
                  $animate.enter($compile(content)($scope), null, $element);
                });
              }
            }, true);
          };
        }
      };
    }]);

  /**
   * Get the list of required modules/services/... for this module
   * @param module
   * @returns {Array}
   */
  function getRequires(module) {
    var requires = [];
    angular.forEach(module.requires, function(requireModule) {
      if(regModules.indexOf(requireModule) === -1) {
        requires.push(requireModule);
      }
    });
    return requires;
  }

  /**
   * Check if a module exists and returns it if it does
   * @param moduleName
   * @returns {boolean}
   */
  function moduleExists(moduleName) {
    if(!angular.isString(moduleName)) {
      return false;
    }
    try {
      return ngModuleFct(moduleName);
    } catch(e) {
      if(/No module/.test(e) || (e.message.indexOf(&#x27;$injector:nomod&#x27;) &gt; -1)) {
        return false;
      }
    }
  }

  function getModule(moduleName) {
    try {
      return ngModuleFct(moduleName);
    } catch(e) {
      // this error message really suxx
      if(/No module/.test(e) || (e.message.indexOf(&#x27;$injector:nomod&#x27;) &gt; -1)) {
        e.message = &#x27;The module &quot;&#x27; + moduleName + &#x27;&quot; that you are trying to load does not exist. &#x27; + e.message
      }
      throw e;
    }
  }

  function invokeQueue(providers, queue, moduleName, reconfig) {
    if(!queue) {
      return;
    }

    var i, len, args, provider;
    for(i = 0, len = queue.length; i &lt; len; i++) {
      args = queue[i];
      if(angular.isArray(args)) {
        if(providers !== null) {
          if(providers.hasOwnProperty(args[0])) {
            provider = providers[args[0]];
          } else {
            throw new Error(&#x27;unsupported provider &#x27; + args[0]);
          }
        }
        var isNew = registerInvokeList(args, moduleName);
        if(args[1] !== &#x27;invoke&#x27;) {
          if(isNew &amp;&amp; angular.isDefined(provider)) {
            provider[args[1]].apply(provider, args[2]);
          }
        } else { // config block
          var callInvoke = function(fct) {
            var invoked = regConfigs.indexOf(moduleName + &#x27;-&#x27; + fct);
            if(invoked === -1 || reconfig) {
              if(invoked === -1) {
                regConfigs.push(moduleName + &#x27;-&#x27; + fct);
              }
              if(angular.isDefined(provider)) {
                provider[args[1]].apply(provider, args[2]);
              }
            }
          };
          if(angular.isFunction(args[2][0])) {
            callInvoke(args[2][0]);
          } else if(angular.isArray(args[2][0])) {
            for(var j = 0, jlen = args[2][0].length; j &lt; jlen; j++) {
              if(angular.isFunction(args[2][0][j])) {
                callInvoke(args[2][0][j]);
              }
            }
          }
        }
      }
    }
  }

  /**
   * Register a new module and load it
   * @param providers
   * @param registerModules
   * @returns {*}
   */
  function register(providers, registerModules, params) {
    if(registerModules) {
      var k, r, moduleName, moduleFn, tempRunBlocks = [];
      for(k = registerModules.length - 1; k &gt;= 0; k--) {
        moduleName = registerModules[k];
        if(typeof moduleName !== &#x27;string&#x27;) {
          moduleName = getModuleName(moduleName);
        }
        if(!moduleName || justLoaded.indexOf(moduleName) !== -1) {
          continue;
        }
        var newModule = regModules.indexOf(moduleName) === -1;
        moduleFn = ngModuleFct(moduleName);
        if(newModule) { // new module
          regModules.push(moduleName);
          register(providers, moduleFn.requires, params);
        }
        if(moduleFn._runBlocks.length &gt; 0) {
          // new run blocks detected! Replace the old ones (if existing)
          runBlocks[moduleName] = [];
          while(moduleFn._runBlocks.length &gt; 0) {
            runBlocks[moduleName].push(moduleFn._runBlocks.shift());
          }
        }
        if(angular.isDefined(runBlocks[moduleName]) &amp;&amp; (newModule || params.rerun)) {
          tempRunBlocks = tempRunBlocks.concat(runBlocks[moduleName]);
        }
        invokeQueue(providers, moduleFn._invokeQueue, moduleName, params.reconfig);
        invokeQueue(providers, moduleFn._configBlocks, moduleName, params.reconfig); // angular 1.3+
        broadcast(newModule ? &#x27;ocLazyLoad.moduleLoaded&#x27; : &#x27;ocLazyLoad.moduleReloaded&#x27;, moduleName);
        registerModules.pop();
        justLoaded.push(moduleName);
      }
      // execute the run blocks at the end
      var instanceInjector = providers.getInstanceInjector();
      angular.forEach(tempRunBlocks, function(fn) {
        instanceInjector.invoke(fn);
      });
    }
  }

  /**
   * Register an invoke
   * @param args
   * @param moduleName
   * @returns {boolean}
   */
  function registerInvokeList(args, moduleName) {
    var invokeList = args[2][0],
      type = args[1],
      newInvoke = false;
    if(angular.isUndefined(regInvokes[moduleName])) {
      regInvokes[moduleName] = {};
    }
    if(angular.isUndefined(regInvokes[moduleName][type])) {
      regInvokes[moduleName][type] = {};
    }
    var onInvoke = function(invokeName, signature) {
      newInvoke = true;
      regInvokes[moduleName][type][invokeName].push(signature);
      broadcast(&#x27;ocLazyLoad.componentLoaded&#x27;, [moduleName, type, invokeName]);
    };
    var signature = function signature(data) {
      if(angular.isArray(data)) { // arrays are objects, we need to test for it first
        return hashCode(data.toString());
      } else if(angular.isObject(data)) { // constants &amp; values for example
        return hashCode(stringify(data));
      } else {
        if(angular.isDefined(data) &amp;&amp; data !== null) {
          return hashCode(data.toString());
        } else { // null &amp; undefined constants
          return data;
        }
      }
    };
    if(angular.isString(invokeList)) {
      if(angular.isUndefined(regInvokes[moduleName][type][invokeList])) {
        regInvokes[moduleName][type][invokeList] = [];
      }
      if(regInvokes[moduleName][type][invokeList].indexOf(signature(args[2][1])) === -1) {
        onInvoke(invokeList, signature(args[2][1]));
      }
    } else if(angular.isObject(invokeList)) { // decorators for example
      angular.forEach(invokeList, function(invoke) {
        if(angular.isString(invoke)) {
          if(angular.isUndefined(regInvokes[moduleName][type][invoke])) {
            regInvokes[moduleName][type][invoke] = [];
          }
          if(regInvokes[moduleName][type][invoke].indexOf(signature(invokeList[1])) === -1) {
            onInvoke(invoke, signature(invokeList[1]));
          }
        }
      });
    } else {
      return false;
    }
    return newInvoke;
  }

  function getModuleName(module) {
    var moduleName = null;
    if(angular.isString(module)) {
      moduleName = module;
    } else if(angular.isObject(module) &amp;&amp; module.hasOwnProperty(&#x27;name&#x27;) &amp;&amp; angular.isString(module.name)) {
      moduleName = module.name;
    }
    return moduleName;
  }

  /**
   * Get the list of existing registered modules
   * @param element
   */
  function init(element) {
    if(modulesToLoad.length === 0) {
      var elements = [element],
        names = [&#x27;ng:app&#x27;, &#x27;ng-app&#x27;, &#x27;x-ng-app&#x27;, &#x27;data-ng-app&#x27;],
        NG_APP_CLASS_REGEXP = /\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,
        append = function append(elm) {
          return (elm &amp;&amp; elements.push(elm));
        };

      angular.forEach(names, function(name) {
        names[name] = true;
        append(document.getElementById(name));
        name = name.replace(&#x27;:&#x27;, &#x27;\\:&#x27;);
        if(element[0].querySelectorAll) {
          angular.forEach(element[0].querySelectorAll(&#x27;.&#x27; + name), append);
          angular.forEach(element[0].querySelectorAll(&#x27;.&#x27; + name + &#x27;\\:&#x27;), append);
          angular.forEach(element[0].querySelectorAll(&#x27;[&#x27; + name + &#x27;]&#x27;), append);
        }
      });

      angular.forEach(elements, function(elm) {
        if(modulesToLoad.length === 0) {
          var className = &#x27; &#x27; + element.className + &#x27; &#x27;;
          var match = NG_APP_CLASS_REGEXP.exec(className);
          if(match) {
            modulesToLoad.push((match[2] || &#x27;&#x27;).replace(/\s+/g, &#x27;,&#x27;));
          } else {
            angular.forEach(elm.attributes, function(attr) {
              if(modulesToLoad.length === 0 &amp;&amp; names[attr.name]) {
                modulesToLoad.push(attr.value);
              }
            });
          }
        }
      });
    }

    if(modulesToLoad.length === 0 &amp;&amp; !((window.jasmine || window.mocha) &amp;&amp; angular.isDefined(angular.mock))) {
      console.error(&#x27;No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.&#x27;);
    }

    var addReg = function addReg(moduleName) {
      if(regModules.indexOf(moduleName) === -1) {
        // register existing modules
        regModules.push(moduleName);
        var mainModule = angular.module(moduleName);

        // register existing components (directives, services, ...)
        invokeQueue(null, mainModule._invokeQueue, moduleName);
        invokeQueue(null, mainModule._configBlocks, moduleName); // angular 1.3+

        angular.forEach(mainModule.requires, addReg);
      }
    };

    angular.forEach(modulesToLoad, function(moduleName) {
      addReg(moduleName);
    });

    modulesToLoad = []; // reset for next bootstrap
    recordDeclarations.pop(); // wait for the next lazy load
  }

  var bootstrapFct = angular.bootstrap;
  angular.bootstrap = function(element, modules, config) {
    // we use slice to make a clean copy
    angular.forEach(modules.slice(), function(module) {
      addToLoadList(module);
    });
    return bootstrapFct(element, modules, config);
  };

  var addToLoadList = function addToLoadList(name) {
    if(recordDeclarations.length &gt; 0 &amp;&amp; angular.isString(name) &amp;&amp; modulesToLoad.indexOf(name) === -1) {
      modulesToLoad.push(name);
    }
  };

  var ngModuleFct = angular.module;
  angular.module = function(name, requires, configFn) {
    addToLoadList(name);
    return ngModuleFct(name, requires, configFn);
  };

  var hashCode = function hashCode(str) {
    var hash = 0, i, chr, len;
    if (str.length == 0) return hash;
    for (i = 0, len = str.length; i &lt; len; i++) {
      chr   = str.charCodeAt(i);
      hash  = ((hash &lt;&lt; 5) - hash) + chr;
      hash |= 0; // Convert to 32bit integer
    }
    return hash;
  };

  var stringify = function stringify(obj) {
    var cache = [];
    return JSON.stringify(obj, function(key, value) {
      if (typeof value === &#x27;object&#x27; &amp;&amp; value !== null) {
        if (cache.indexOf(value) !== -1) {
          // Circular reference found, discard key
          return;
        }
        // Store value in our collection
        cache.push(value);
      }
      return value;
    });
  };

  // Array.indexOf polyfill for IE8
  if(!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(searchElement, fromIndex) {

      var k;

      // 1. Let O be the result of calling ToObject passing
      //    the this value as the argument.
      if(this == null) {
        throw new TypeError(&#x27;&quot;this&quot; is null or not defined&#x27;);
      }

      var O = Object(this);

      // 2. Let lenValue be the result of calling the Get
      //    internal method of O with the argument &quot;length&quot;.
      // 3. Let len be ToUint32(lenValue).
      var len = O.length &gt;&gt;&gt; 0;

      // 4. If len is 0, return -1.
      if(len === 0) {
        return -1;
      }

      // 5. If argument fromIndex was passed let n be
      //    ToInteger(fromIndex); else let n be 0.
      var n = +fromIndex || 0;

      if(Math.abs(n) === Infinity) {
        n = 0;
      }

      // 6. If n &gt;= len, return -1.
      if(n &gt;= len) {
        return -1;
      }

      // 7. If n &gt;= 0, then Let k be n.
      // 8. Else, n&lt;0, Let k be len - abs(n).
      //    If k is less than 0, then let k be 0.
      k = Math.max(n &gt;= 0 ? n : len - Math.abs(n), 0);

      // 9. Repeat, while k &lt; len
      while(k &lt; len) {
        // a. Let Pk be ToString(k).
        //   This is implicit for LHS operands of the in operator
        // b. Let kPresent be the result of calling the
        //    HasProperty internal method of O with argument Pk.
        //   This step can be combined with c
        // c. If kPresent is true, then
        //    i.  Let elementK be the result of calling the Get
        //        internal method of O with the argument ToString(k).
        //   ii.  Let same be the result of applying the
        //        Strict Equality Comparison Algorithm to
        //        searchElement and elementK.
        //  iii.  If same is true, return k.
        if(k in O &amp;&amp; O[k] === searchElement) {
          return k;
        }
        k++;
      }
      return -1;
    };
  }
})();

    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
