<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>..\node_modules\backbone\backbone_demo\optimize\libs\kindeditor\kindeditor.js - SmartDoc</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartdoc">
             
            <img alt="SmartDoc" src="../assets/css/logo.png" title="SmartDoc">
            
                SmartDoc
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartdoc">Home</a>
                    </li>
                    
                    <li><a href="/">Document</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartdoc">About</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/273.html">273</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/alienjs.html">alienjs</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/window.require.html">window.require</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Countdown.html">Countdown</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Date.html">Date</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery.html">jquery</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.transitionEnd.html">jquery.transitionEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.support.transition.html">jquery.support.transition</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.animationEnd.html">jquery.animationEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery-ui.html">jquery-ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.ajaxPanel.html">jquery.ajaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.dialog.html">jquery.dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Array.html">Array</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.browserLowVersion.html">jquery.browserLowVersion</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.confirm.html">jquery.confirm</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.alert.html">jquery.alert</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ng.html">ng</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMock.html">ngMock</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMockE2E.html">ngMockE2E</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ui.html">ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/AjaxPanel.html">AjaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Date.Dialog.html">Date.Dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/WebUploader.html">WebUploader</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Base.html">Base</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Mediator.html">Mediator</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/options.Uploader.html">options.Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.File.html">File.File</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.Queue.html">File.Queue</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Uploader.html">Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/window.html">window</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <!--     <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>

 -->
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>..\node_modules\backbone\backbone_demo\optimize\libs\kindeditor\kindeditor.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums" id='src_code'>
/*******************************************************************************
* KindEditor - WYSIWYG HTML Editor for Internet
* Copyright (C) 2006-2014 kindsoft.net
*
* @author Roddy &lt;luolonghao@gmail.com&gt;
* @website http://www.kindsoft.net/
* @licence http://www.kindsoft.net/license.php
* @version 4.1.10 (2014-02-17)
*******************************************************************************/

/*******************************************************************************
* KindEditor - WYSIWYG HTML Editor for Internet
* Copyright (C) 2006-2011 kindsoft.net
*
* @author Roddy &lt;luolonghao@gmail.com&gt;
* @site http://www.kindsoft.net/
* @licence http://www.kindsoft.net/license.php
*******************************************************************************/

(function(window,undefined){function _isArray(e){return e?Object.prototype.toString.call(e)===&quot;[object Array]&quot;:!1}function _isFunction(e){return e?Object.prototype.toString.call(e)===&quot;[object Function]&quot;:!1}function _inArray(e,t){for(var n=0,r=t.length;n&lt;r;n++)if(e===t[n])return n;return-1}function _each(e,t){if(_isArray(e)){for(var n=0,r=e.length;n&lt;r;n++)if(t.call(e[n],n,e[n])===!1)break}else for(var i in e)if(e.hasOwnProperty(i)&amp;&amp;t.call(e[i],i,e[i])===!1)break}function _trim(e){return e.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,&quot;&quot;)}function _inString(e,t,n){return n=n===undefined?&quot;,&quot;:n,(n+t+n).indexOf(n+e+n)&gt;=0}function _addUnit(e,t){return t=t||&quot;px&quot;,e&amp;&amp;/^\d+$/.test(e)?e+t:e}function _removeUnit(e){var t;return e&amp;&amp;(t=/(\d+)/.exec(e))?parseInt(t[1],10):0}function _escape(e){return e.replace(/&amp;/g,&quot;&amp;amp;&quot;).replace(/&lt;/g,&quot;&amp;lt;&quot;).replace(/&gt;/g,&quot;&amp;gt;&quot;).replace(/&quot;/g,&quot;&amp;quot;&quot;)}function _unescape(e){return e.replace(/&amp;lt;/g,&quot;&lt;&quot;).replace(/&amp;gt;/g,&quot;&gt;&quot;).replace(/&amp;quot;/g,&#x27;&quot;&#x27;).replace(/&amp;amp;/g,&quot;&amp;&quot;)}function _toCamel(e){var t=e.split(&quot;-&quot;);return e=&quot;&quot;,_each(t,function(t,n){e+=t&gt;0?n.charAt(0).toUpperCase()+n.substr(1):n}),e}function _toHex(e){function t(e){var t=parseInt(e,10).toString(16).toUpperCase();return t.length&gt;1?t:&quot;0&quot;+t}return e.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function(e,n,r,i){return&quot;#&quot;+t(n)+t(r)+t(i)})}function _toMap(e,t){t=t===undefined?&quot;,&quot;:t;var n={},r=_isArray(e)?e:e.split(t),i;return _each(r,function(e,t){if(i=/^(\d+)\.\.(\d+)$/.exec(t))for(var r=parseInt(i[1],10);r&lt;=parseInt(i[2],10);r++)n[r.toString()]=!0;else n[t]=!0}),n}function _toArray(e,t){return Array.prototype.slice.call(e,t||0)}function _undef(e,t){return e===undefined?t:e}function _invalidUrl(e){return!e||/[&lt;&gt;&quot;]/.test(e)}function _addParam(e,t){return e.indexOf(&quot;?&quot;)&gt;=0?e+&quot;&amp;&quot;+t:e+&quot;?&quot;+t}function _extend(e,t,n){n||(n=t,t=null);var r;if(t){var i=function(){};i.prototype=t.prototype,r=new i,_each(n,function(e,t){r[e]=t})}else r=n;r.constructor=e,e.prototype=r,e.parent=t?t.prototype:null}function _json(text){var match;if(match=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(text))text=match[0];var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;cx.lastIndex=0,cx.test(text)&amp;&amp;(text=text.replace(cx,function(e){return&quot;\\u&quot;+(&quot;0000&quot;+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g,&quot;@&quot;).replace(/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,&quot;]&quot;).replace(/(?:^|:|,)(?:\s*\[)+/g,&quot;&quot;)))return eval(&quot;(&quot;+text+&quot;)&quot;);throw&quot;JSON parse error&quot;}function _getBasePath(){var e=document.getElementsByTagName(&quot;script&quot;),t;for(var n=0,r=e.length;n&lt;r;n++){t=e[n].src||&quot;&quot;;if(/kindeditor[\w\-\.]*\.js/.test(t))return t.substring(0,t.lastIndexOf(&quot;/&quot;)+1)}return&quot;&quot;}function _bindEvent(e,t,n){e.addEventListener?e.addEventListener(t,n,_useCapture):e.attachEvent&amp;&amp;e.attachEvent(&quot;on&quot;+t,n)}function _unbindEvent(e,t,n){e.removeEventListener?e.removeEventListener(t,n,_useCapture):e.detachEvent&amp;&amp;e.detachEvent(&quot;on&quot;+t,n)}function KEvent(e,t){this.init(e,t)}function _getId(e){return e[_eventExpendo]||null}function _setId(e){return e[_eventExpendo]=++_eventId,_eventId}function _removeId(e){try{delete e[_eventExpendo]}catch(t){e.removeAttribute&amp;&amp;e.removeAttribute(_eventExpendo)}}function _bind(e,t,n){if(t.indexOf(&quot;,&quot;)&gt;=0){_each(t.split(&quot;,&quot;),function(){_bind(e,this,n)});return}var r=_getId(e);r||(r=_setId(e)),_eventData[r]===undefined&amp;&amp;(_eventData[r]={});var i=_eventData[r][t];i&amp;&amp;i.length&gt;0?_unbindEvent(e,t,i[0]):(_eventData[r][t]=[],_eventData[r].el=e),i=_eventData[r][t],i.length===0&amp;&amp;(i[0]=function(t){var n=t?new KEvent(e,t):undefined;_each(i,function(t,r){t&gt;0&amp;&amp;r&amp;&amp;r.call(e,n)})}),_inArray(n,i)&lt;0&amp;&amp;i.push(n),_bindEvent(e,t,i[0])}function _unbind(e,t,n){if(t&amp;&amp;t.indexOf(&quot;,&quot;)&gt;=0){_each(t.split(&quot;,&quot;),function(){_unbind(e,this,n)});return}var r=_getId(e);if(!r)return;if(t===undefined){r in _eventData&amp;&amp;(_each(_eventData[r],function(t,n){t!=&quot;el&quot;&amp;&amp;n.length&gt;0&amp;&amp;_unbindEvent(e,t,n[0])}),delete _eventData[r],_removeId(e));return}if(!_eventData[r])return;var i=_eventData[r][t];if(i&amp;&amp;i.length&gt;0){n===undefined?(_unbindEvent(e,t,i[0]),delete _eventData[r][t]):(_each(i,function(e,t){e&gt;0&amp;&amp;t===n&amp;&amp;i.splice(e,1)}),i.length==1&amp;&amp;(_unbindEvent(e,t,i[0]),delete _eventData[r][t]));var s=0;_each(_eventData[r],function(){s++}),s&lt;2&amp;&amp;(delete _eventData[r],_removeId(e))}}function _fire(e,t){if(t.indexOf(&quot;,&quot;)&gt;=0){_each(t.split(&quot;,&quot;),function(){_fire(e,this)});return}var n=_getId(e);if(!n)return;var r=_eventData[n][t];_eventData[n]&amp;&amp;r&amp;&amp;r.length&gt;0&amp;&amp;r[0]()}function _ctrl(e,t,n){var r=this;t=/^\d{2,}$/.test(t)?t:t.toUpperCase().charCodeAt(0),_bind(e,&quot;keydown&quot;,function(r){r.ctrlKey&amp;&amp;r.which==t&amp;&amp;!r.shiftKey&amp;&amp;!r.altKey&amp;&amp;(n.call(e),r.stop())})}function _ready(e){function n(){t||(t=!0,e(KindEditor),_readyFinished=!0)}function r(){if(!t){try{document.documentElement.doScroll(&quot;left&quot;)}catch(e){setTimeout(r,100);return}n()}}function i(){document.readyState===&quot;complete&quot;&amp;&amp;n()}if(_readyFinished){e(KindEditor);return}var t=!1;if(document.addEventListener)_bind(document,&quot;DOMContentLoaded&quot;,n);else if(document.attachEvent){_bind(document,&quot;readystatechange&quot;,i);var s=!1;try{s=window.frameElement==null}catch(o){}document.documentElement.doScroll&amp;&amp;s&amp;&amp;r()}_bind(window,&quot;load&quot;,n)}function _getCssList(e){var t={},n=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,r;while(r=n.exec(e)){var i=_trim(r[1].toLowerCase()),s=_trim(_toHex(r[2]));t[i]=s}return t}function _getAttrList(e){var t={},n=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s&quot;&#x27;&lt;&gt;]+))|(?:([\w\-:&quot;]+)=&quot;([^&quot;]*)&quot;)|(?:([\w\-:&quot;]+)=&#x27;([^&#x27;]*)&#x27;))(?=(?:\s|\/|&gt;)+)/g,r;while(r=n.exec(e)){var i=(r[1]||r[2]||r[4]||r[6]).toLowerCase(),s=(r[2]?r[3]:r[4]?r[5]:r[7])||&quot;&quot;;t[i]=s}return t}function _addClassToTag(e,t){return/\s+class\s*=/.test(e)?e=e.replace(/(\s+class=[&quot;&#x27;]?)([^&quot;&#x27;]*)([&quot;&#x27;]?[\s&gt;])/,function(e,n,r,i){return(&quot; &quot;+r+&quot; &quot;).indexOf(&quot; &quot;+t+&quot; &quot;)&lt;0?r===&quot;&quot;?n+t+i:n+r+&quot; &quot;+t+i:e}):e=e.substr(0,e.length-1)+&#x27; class=&quot;&#x27;+t+&#x27;&quot;&gt;&#x27;,e}function _formatCss(e){var t=&quot;&quot;;return _each(_getCssList(e),function(e,n){t+=e+&quot;:&quot;+n+&quot;;&quot;}),t}function _formatUrl(e,t,n,r){function o(e){var t=e.split(&quot;/&quot;),n=[];for(var r=0,i=t.length;r&lt;i;r++){var s=t[r];s==&quot;..&quot;?n.length&gt;0&amp;&amp;n.pop():s!==&quot;&quot;&amp;&amp;s!=&quot;.&quot;&amp;&amp;n.push(s)}return&quot;/&quot;+n.join(&quot;/&quot;)}function u(t,n){if(e.substr(0,t.length)===t){var i=[];for(var o=0;o&lt;n;o++)i.push(&quot;..&quot;);var a=&quot;.&quot;;return i.length&gt;0&amp;&amp;(a+=&quot;/&quot;+i.join(&quot;/&quot;)),r==&quot;/&quot;&amp;&amp;(a+=&quot;/&quot;),a+e.substr(t.length)}if(s=/^(.*)\//.exec(t))return u(s[1],++n)}t=_undef(t,&quot;&quot;).toLowerCase(),e.substr(0,5)!=&quot;data:&quot;&amp;&amp;(e=e.replace(/([^:])\/\//g,&quot;$1/&quot;));if(_inArray(t,[&quot;absolute&quot;,&quot;relative&quot;,&quot;domain&quot;])&lt;0)return e;n=n||location.protocol+&quot;//&quot;+location.host;if(r===undefined){var i=location.pathname.match(/^(\/.*)\//);r=i?i[1]:&quot;&quot;}var s;if(s=/^(\w+:\/\/[^\/]*)/.exec(e)){if(s[1]!==n)return e}else if(/^\w+:/.test(e))return e;return/^\//.test(e)?e=n+o(e.substr(1)):/^\w+:\/\//.test(e)||(e=n+o(r+&quot;/&quot;+e)),t===&quot;relative&quot;?e=u(n+r,0).substr(2):t===&quot;absolute&quot;&amp;&amp;e.substr(0,n.length)===n&amp;&amp;(e=e.substr(n.length)),e}function _formatHtml(e,t,n,r,i){e==null&amp;&amp;(e=&quot;&quot;),n=n||&quot;&quot;,r=_undef(r,!1),i=_undef(i,&quot;	&quot;);var s=&quot;xx-small,x-small,small,medium,large,x-large,xx-large&quot;.split(&quot;,&quot;);e=e.replace(/(&lt;(?:pre|pre\s[^&gt;]*)&gt;)([\s\S]*?)(&lt;\/pre&gt;)/ig,function(e,t,n,r){return t+n.replace(/&lt;(?:br|br\s[^&gt;]*)&gt;/ig,&quot;\n&quot;)+r}),e=e.replace(/&lt;(?:br|br\s[^&gt;]*)\s*\/?&gt;\s*&lt;\/p&gt;/ig,&quot;&lt;/p&gt;&quot;),e=e.replace(/(&lt;(?:p|p\s[^&gt;]*)&gt;)\s*(&lt;\/p&gt;)/ig,&quot;$1&lt;br /&gt;$2&quot;),e=e.replace(/\u200B/g,&quot;&quot;),e=e.replace(/\u00A9/g,&quot;&amp;copy;&quot;),e=e.replace(/\u00AE/g,&quot;&amp;reg;&quot;),e=e.replace(/\u2003/g,&quot;&amp;emsp;&quot;),e=e.replace(/\u3000/g,&quot;&amp;emsp;&quot;),e=e.replace(/&lt;[^&gt;]+/g,function(e){return e.replace(/\s+/g,&quot; &quot;)});var o={};t&amp;&amp;(_each(t,function(e,t){var n=e.split(&quot;,&quot;);for(var r=0,i=n.length;r&lt;i;r++)o[n[r]]=_toMap(t)}),o.script||(e=e.replace(/(&lt;(?:script|script\s[^&gt;]*)&gt;)([\s\S]*?)(&lt;\/script&gt;)/ig,&quot;&quot;)),o.style||(e=e.replace(/(&lt;(?:style|style\s[^&gt;]*)&gt;)([\s\S]*?)(&lt;\/style&gt;)/ig,&quot;&quot;)));var u=/(\s*)&lt;(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s&quot;&#x27;&lt;&gt;]+)|(?:\s+[\w\-:&quot;]+=&quot;[^&quot;]*&quot;)|(?:\s+[\w\-:&quot;]+=&#x27;[^&#x27;]*&#x27;))*)(\/)?&gt;(\s*)/g,a=[];return e=e.replace(u,function(e,u,f,l,c,h,p){var d=e,v=u||&quot;&quot;,m=f||&quot;&quot;,g=l.toLowerCase(),y=c||&quot;&quot;,b=h?&quot; &quot;+h:&quot;&quot;,w=p||&quot;&quot;;if(t&amp;&amp;!o[g])return&quot;&quot;;b===&quot;&quot;&amp;&amp;_SINGLE_TAG_MAP[g]&amp;&amp;(b=&quot; /&quot;),_INLINE_TAG_MAP[g]&amp;&amp;(v&amp;&amp;(v=&quot; &quot;),w&amp;&amp;(w=&quot; &quot;)),_PRE_TAG_MAP[g]&amp;&amp;(m?w=&quot;\n&quot;:v=&quot;\n&quot;),r&amp;&amp;g==&quot;br&quot;&amp;&amp;(w=&quot;\n&quot;);if(_BLOCK_TAG_MAP[g]&amp;&amp;!_PRE_TAG_MAP[g])if(r){m&amp;&amp;a.length&gt;0&amp;&amp;a[a.length-1]===g?a.pop():a.push(g),v=&quot;\n&quot;,w=&quot;\n&quot;;for(var E=0,S=m?a.length:a.length-1;E&lt;S;E++)v+=i,m||(w+=i);b?a.pop():m||(w+=i)}else v=w=&quot;&quot;;if(y!==&quot;&quot;){var x=_getAttrList(d);if(g===&quot;font&quot;){var T={},N=&quot;&quot;;_each(x,function(e,t){e===&quot;color&quot;&amp;&amp;(T.color=t,delete x[e]),e===&quot;size&quot;&amp;&amp;(T[&quot;font-size&quot;]=s[parseInt(t,10)-1]||&quot;&quot;,delete x[e]),e===&quot;face&quot;&amp;&amp;(T[&quot;font-family&quot;]=t,delete x[e]),e===&quot;style&quot;&amp;&amp;(N=t)}),N&amp;&amp;!/;$/.test(N)&amp;&amp;(N+=&quot;;&quot;),_each(T,function(e,t){if(t===&quot;&quot;)return;/\s/.test(t)&amp;&amp;(t=&quot;&#x27;&quot;+t+&quot;&#x27;&quot;),N+=e+&quot;:&quot;+t+&quot;;&quot;}),x.style=N}_each(x,function(e,r){_FILL_ATTR_MAP[e]&amp;&amp;(x[e]=e),_inArray(e,[&quot;src&quot;,&quot;href&quot;])&gt;=0&amp;&amp;(x[e]=_formatUrl(r,n)),(t&amp;&amp;e!==&quot;style&quot;&amp;&amp;!o[g][&quot;*&quot;]&amp;&amp;!o[g][e]||g===&quot;body&quot;&amp;&amp;e===&quot;contenteditable&quot;||/^kindeditor_\d+$/.test(e))&amp;&amp;delete x[e];if(e===&quot;style&quot;&amp;&amp;r!==&quot;&quot;){var i=_getCssList(r);_each(i,function(e,n){t&amp;&amp;!o[g].style&amp;&amp;!o[g][&quot;.&quot;+e]&amp;&amp;delete i[e]});var s=&quot;&quot;;_each(i,function(e,t){s+=e+&quot;:&quot;+t+&quot;;&quot;}),x.style=s}}),y=&quot;&quot;,_each(x,function(e,t){if(e===&quot;style&quot;&amp;&amp;t===&quot;&quot;)return;t=t.replace(/&quot;/g,&quot;&amp;quot;&quot;),y+=&quot; &quot;+e+&#x27;=&quot;&#x27;+t+&#x27;&quot;&#x27;})}return g===&quot;font&quot;&amp;&amp;(g=&quot;span&quot;),v+&quot;&lt;&quot;+m+g+y+b+&quot;&gt;&quot;+w}),e=e.replace(/(&lt;(?:pre|pre\s[^&gt;]*)&gt;)([\s\S]*?)(&lt;\/pre&gt;)/ig,function(e,t,n,r){return t+n.replace(/\n/g,&#x27;&lt;span id=&quot;__kindeditor_pre_newline__&quot;&gt;\n&#x27;)+r}),e=e.replace(/\n\s*\n/g,&quot;\n&quot;),e=e.replace(/&lt;span id=&quot;__kindeditor_pre_newline__&quot;&gt;\n/g,&quot;\n&quot;),_trim(e)}function _clearMsWord(e,t){return e=e.replace(/&lt;meta[\s\S]*?&gt;/ig,&quot;&quot;).replace(/&lt;![\s\S]*?&gt;/ig,&quot;&quot;).replace(/&lt;style[^&gt;]*&gt;[\s\S]*?&lt;\/style&gt;/ig,&quot;&quot;).replace(/&lt;script[^&gt;]*&gt;[\s\S]*?&lt;\/script&gt;/ig,&quot;&quot;).replace(/&lt;w:[^&gt;]+&gt;[\s\S]*?&lt;\/w:[^&gt;]+&gt;/ig,&quot;&quot;).replace(/&lt;o:[^&gt;]+&gt;[\s\S]*?&lt;\/o:[^&gt;]+&gt;/ig,&quot;&quot;).replace(/&lt;xml&gt;[\s\S]*?&lt;\/xml&gt;/ig,&quot;&quot;).replace(/&lt;(?:table|td)[^&gt;]*&gt;/ig,function(e){return e.replace(/border-bottom:([#\w\s]+)/ig,&quot;border:$1&quot;)}),_formatHtml(e,t)}function _mediaType(e){return/\.(rm|rmvb)(\?|$)/i.test(e)?&quot;audio/x-pn-realaudio-plugin&quot;:/\.(swf|flv)(\?|$)/i.test(e)?&quot;application/x-shockwave-flash&quot;:&quot;video/x-ms-asf-plugin&quot;}function _mediaClass(e){return/realaudio/i.test(e)?&quot;ke-rm&quot;:/flash/i.test(e)?&quot;ke-flash&quot;:&quot;ke-media&quot;}function _mediaAttrs(e){return _getAttrList(unescape(e))}function _mediaEmbed(e){var t=&quot;&lt;embed &quot;;return _each(e,function(e,n){t+=e+&#x27;=&quot;&#x27;+n+&#x27;&quot; &#x27;}),t+=&quot;/&gt;&quot;,t}function _mediaImg(e,t){var n=t.width,r=t.height,i=t.type||_mediaType(t.src),s=_mediaEmbed(t),o=&quot;&quot;;/\D/.test(n)?o+=&quot;width:&quot;+n+&quot;;&quot;:n&gt;0&amp;&amp;(o+=&quot;width:&quot;+n+&quot;px;&quot;),/\D/.test(r)?o+=&quot;height:&quot;+r+&quot;;&quot;:r&gt;0&amp;&amp;(o+=&quot;height:&quot;+r+&quot;px;&quot;);var u=&#x27;&lt;img class=&quot;&#x27;+_mediaClass(i)+&#x27;&quot; src=&quot;&#x27;+e+&#x27;&quot; &#x27;;return o!==&quot;&quot;&amp;&amp;(u+=&#x27;style=&quot;&#x27;+o+&#x27;&quot; &#x27;),u+=&#x27;data-ke-tag=&quot;&#x27;+escape(s)+&#x27;&quot; alt=&quot;&quot; /&gt;&#x27;,u}function _tmpl(e,t){var n=new Function(&quot;obj&quot;,&quot;var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push(&#x27;&quot;+e.replace(/[\r\t\n]/g,&quot; &quot;).split(&quot;&lt;%&quot;).join(&quot;	&quot;).replace(/((^|%&gt;)[^\t]*)&#x27;/g,&quot;$1\r&quot;).replace(/\t=(.*?)%&gt;/g,&quot;&#x27;,$1,&#x27;&quot;).split(&quot;	&quot;).join(&quot;&#x27;);&quot;).split(&quot;%&gt;&quot;).join(&quot;p.push(&#x27;&quot;).split(&quot;\r&quot;).join(&quot;\\&#x27;&quot;)+&quot;&#x27;);}return p.join(&#x27;&#x27;);&quot;);return t?n(t):n}function _contains(e,t){if(e.nodeType==9&amp;&amp;t.nodeType!=9)return!0;while(t=t.parentNode)if(t==e)return!0;return!1}function _getAttr(e,t){t=t.toLowerCase();var n=null;if(!_GET_SET_ATTRIBUTE&amp;&amp;e.nodeName.toLowerCase()!=&quot;script&quot;){var r=e.ownerDocument.createElement(&quot;div&quot;);r.appendChild(e.cloneNode(!1));var i=_getAttrList(_unescape(r.innerHTML));t in i&amp;&amp;(n=i[t])}else try{n=e.getAttribute(t,2)}catch(s){n=e.getAttribute(t,1)}return t===&quot;style&quot;&amp;&amp;n!==null&amp;&amp;(n=_formatCss(n)),n}function _queryAll(e,t){function i(e){return typeof e!=&quot;string&quot;?e:e.replace(/([^\w\-])/g,&quot;\\$1&quot;)}function s(e){return e.replace(/\\/g,&quot;&quot;)}function o(e,t){return e===&quot;*&quot;||e.toLowerCase()===i(t.toLowerCase())}function u(e,t,n){var r=[],i=n.ownerDocument||n,u=i.getElementById(s(e));return u&amp;&amp;o(t,u.nodeName)&amp;&amp;_contains(n,u)&amp;&amp;r.push(u),r}function a(e,t,n){var r=n.ownerDocument||n,i=[],u,a,f,l;if(n.getElementsByClassName){u=n.getElementsByClassName(s(e));for(a=0,f=u.length;a&lt;f;a++)l=u[a],o(t,l.nodeName)&amp;&amp;i.push(l)}else if(r.querySelectorAll){u=r.querySelectorAll((n.nodeName!==&quot;#document&quot;?n.nodeName+&quot; &quot;:&quot;&quot;)+t+&quot;.&quot;+e);for(a=0,f=u.length;a&lt;f;a++)l=u[a],_contains(n,l)&amp;&amp;i.push(l)}else{u=n.getElementsByTagName(t),e=&quot; &quot;+e+&quot; &quot;;for(a=0,f=u.length;a&lt;f;a++){l=u[a];if(l.nodeType==1){var c=l.className;c&amp;&amp;(&quot; &quot;+c+&quot; &quot;).indexOf(e)&gt;-1&amp;&amp;i.push(l)}}}return i}function f(e,t,n){var r=[],i=n.ownerDocument||n,u=i.getElementsByName(s(e)),a;for(var f=0,l=u.length;f&lt;l;f++)a=u[f],o(t,a.nodeName)&amp;&amp;_contains(n,a)&amp;&amp;a.getAttribute(&quot;name&quot;)!==null&amp;&amp;r.push(a);return r}function l(e,t,n,r){var s=[],o=r.getElementsByTagName(n),u;for(var a=0,f=o.length;a&lt;f;a++)u=o[a],u.nodeType==1&amp;&amp;(t===null?_getAttr(u,e)!==null&amp;&amp;s.push(u):t===i(_getAttr(u,e))&amp;&amp;s.push(u));return s}function c(e,t){var n=[],r;r=/^((?:\\.|[^.#\s\[&lt;&gt;])+)/.exec(e);var i=r?r[1]:&quot;*&quot;;if(r=/#((?:[\w\-]|\\.)+)$/.exec(e))n=u(r[1],i,t);else if(r=/\.((?:[\w\-]|\\.)+)$/.exec(e))n=a(r[1],i,t);else if(r=/\[((?:[\w\-]|\\.)+)\]/.exec(e))n=l(r[1].toLowerCase(),null,i,t);else if(r=/\[((?:[\w\-]|\\.)+)\s*=\s*[&#x27;&quot;]?((?:\\.|[^&#x27;&quot;]+)+)[&#x27;&quot;]?\]/.exec(e)){var s=r[1].toLowerCase(),o=r[2];s===&quot;id&quot;?n=u(o,i,t):s===&quot;class&quot;?n=a(o,i,t):s===&quot;name&quot;?n=f(o,i,t):n=l(s,o,i,t)}else{var c=t.getElementsByTagName(i),h;for(var p=0,d=c.length;p&lt;d;p++)h=c[p],h.nodeType==1&amp;&amp;n.push(h)}return n}var n=e.split(&quot;,&quot;);if(n.length&gt;1){var r=[];return _each(n,function(){_each(_queryAll(this,t),function(){_inArray(this,r)&lt;0&amp;&amp;r.push(this)})}),r}t=t||document;var h=[],p,d=/((?:\\.|[^\s&gt;])+|[\s&gt;])/g;while(p=d.exec(e))p[1]!==&quot; &quot;&amp;&amp;h.push(p[1]);var v=[];if(h.length==1)return c(h[0],t);var m=!1,g,y,b,w,E,S,x,T,N,C,k;for(S=0,lenth=h.length;S&lt;lenth;S++){g=h[S];if(g===&quot;&gt;&quot;){m=!0;continue}if(S&gt;0){y=[];for(x=0,C=v.length;x&lt;C;x++){w=v[x],b=c(g,w);for(T=0,k=b.length;T&lt;k;T++)E=b[T],m?w===E.parentNode&amp;&amp;y.push(E):y.push(E)}v=y}else v=c(g,t);if(v.length===0)return[]}return v}function _query(e,t){var n=_queryAll(e,t);return n.length&gt;0?n[0]:null}function _get(e){return K(e)[0]}function _getDoc(e){return e?e.ownerDocument||e.document||e:document}function _getWin(e){if(!e)return window;var t=_getDoc(e);return t.parentWindow||t.defaultView}function _setHtml(e,t){if(e.nodeType!=1)return;var n=_getDoc(e);try{e.innerHTML=&#x27;&lt;img id=&quot;__kindeditor_temp_tag__&quot; width=&quot;0&quot; height=&quot;0&quot; style=&quot;display:none;&quot; /&gt;&#x27;+t;var r=n.getElementById(&quot;__kindeditor_temp_tag__&quot;);r.parentNode.removeChild(r)}catch(i){K(e).empty(),K(&quot;@&quot;+t,n).each(function(){e.appendChild(this)})}}function _hasClass(e,t){return _inString(t,e.className,&quot; &quot;)}function _setAttr(e,t,n){_IE&amp;&amp;_V&lt;8&amp;&amp;t.toLowerCase()==&quot;class&quot;&amp;&amp;(t=&quot;className&quot;),e.setAttribute(t,&quot;&quot;+n)}function _removeAttr(e,t){_IE&amp;&amp;_V&lt;8&amp;&amp;t.toLowerCase()==&quot;class&quot;&amp;&amp;(t=&quot;className&quot;),_setAttr(e,t,&quot;&quot;),e.removeAttribute(t)}function _getNodeName(e){return!e||!e.nodeName?&quot;&quot;:e.nodeName.toLowerCase()}function _computedCss(e,t){var n=this,r=_getWin(e),i=_toCamel(t),s=&quot;&quot;;if(r.getComputedStyle){var o=r.getComputedStyle(e,null);s=o[i]||o.getPropertyValue(t)||e.style[i]}else e.currentStyle&amp;&amp;(s=e.currentStyle[i]||e.style[i]);return s}function _hasVal(e){return!!_VALUE_TAG_MAP[_getNodeName(e)]}function _docElement(e){return e=e||document,_QUIRKS?e.body:e.documentElement}function _docHeight(e){var t=_docElement(e);return Math.max(t.scrollHeight,t.clientHeight)}function _docWidth(e){var t=_docElement(e);return Math.max(t.scrollWidth,t.clientWidth)}function _getScrollPos(e){e=e||document;var t,n;return _IE||_NEWIE||_OPERA?(t=_docElement(e).scrollLeft,n=_docElement(e).scrollTop):(t=_getWin(e).scrollX,n=_getWin(e).scrollY),{x:t,y:n}}function KNode(e){this.init(e)}function _updateCollapsed(e){return e.collapsed=e.startContainer===e.endContainer&amp;&amp;e.startOffset===e.endOffset,e}function _copyAndDelete(e,t,n){function s(r,s,o){var u=r.nodeValue.length,a;if(t){var f=r.cloneNode(!0);s&gt;0?a=f.splitText(s):a=f,o&lt;u&amp;&amp;a.splitText(o-s)}if(n){var l=r;s&gt;0&amp;&amp;(l=r.splitText(s),e.setStart(r,s));if(o&lt;u){var c=l.splitText(o-s);e.setEnd(c,0)}i.push(l)}return a}function o(){n&amp;&amp;e.up().collapse(!0);for(var t=0,r=i.length;t&lt;r;t++){var s=i[t];s.parentNode&amp;&amp;s.parentNode.removeChild(s)}}function v(o,h){var p=o.firstChild,d;while(p){var m=(new KRange(r)).selectNode(p);a=m.compareBoundaryPoints(_START_TO_END,e),a&gt;=0&amp;&amp;f&lt;=0&amp;&amp;(f=m.compareBoundaryPoints(_START_TO_START,e)),f&gt;=0&amp;&amp;l&lt;=0&amp;&amp;(l=m.compareBoundaryPoints(_END_TO_END,e)),l&gt;=0&amp;&amp;c&lt;=0&amp;&amp;(c=m.compareBoundaryPoints(_END_TO_START,e));if(c&gt;=0)return!1;d=p.nextSibling;if(a&gt;0)if(p.nodeType==1)if(f&gt;=0&amp;&amp;l&lt;=0)t&amp;&amp;h.appendChild(p.cloneNode(!0)),n&amp;&amp;i.push(p);else{var g;t&amp;&amp;(g=p.cloneNode(!1),h.appendChild(g));if(v(p,g)===!1)return!1}else if(p.nodeType==3){var y;p==u.startContainer?y=s(p,u.startOffset,p.nodeValue.length):p==u.endContainer?y=s(p,0,u.endOffset):y=s(p,0,p.nodeValue.length);if(t)try{h.appendChild(y)}catch(b){}}p=d}}var r=e.doc,i=[],u=e.cloneRange().down(),a=-1,f=-1,l=-1,c=-1,h=e.commonAncestor(),p=r.createDocumentFragment();if(h.nodeType==3){var d=s(h,e.startOffset,e.endOffset);return t&amp;&amp;p.appendChild(d),o(),t?p:e}v(h,p),n&amp;&amp;e.up().collapse(!0);for(var m=0,g=i.length;m&lt;g;m++){var y=i[m];y.parentNode&amp;&amp;y.parentNode.removeChild(y)}return t?p:e}function _moveToElementText(e,t){var n=t;while(n){var r=K(n);if(r.name==&quot;marquee&quot;||r.name==&quot;select&quot;)return;n=n.parentNode}try{e.moveToElementText(t)}catch(i){}}function _getStartEnd(e,t){var n=e.parentElement().ownerDocument,r=e.duplicate();r.collapse(t);var i=r.parentElement(),s=i.childNodes;if(s.length===0)return{node:i.parentNode,offset:K(i).index()};var o=n,u=0,a=-1,f=e.duplicate();_moveToElementText(f,i);for(var l=0,c=s.length;l&lt;c;l++){var h=s[l];a=f.compareEndPoints(&quot;StartToStart&quot;,r);if(a===0)return{node:h.parentNode,offset:l};if(h.nodeType==1){var p=e.duplicate(),d,v=K(h),m=h;v.isControl()&amp;&amp;(d=n.createElement(&quot;span&quot;),v.after(d),m=d,u+=v.text().replace(/\r\n|\n|\r/g,&quot;&quot;).length),_moveToElementText(p,m),f.setEndPoint(&quot;StartToEnd&quot;,p),a&gt;0?u+=p.text.replace(/\r\n|\n|\r/g,&quot;&quot;).length:u=0,d&amp;&amp;K(d).remove()}else h.nodeType==3&amp;&amp;(f.moveStart(&quot;character&quot;,h.nodeValue.length),u+=h.nodeValue.length);a&lt;0&amp;&amp;(o=h)}if(a&lt;0&amp;&amp;o.nodeType==1)return{node:i,offset:K(i.lastChild).index()+1};if(a&gt;0)while(o.nextSibling&amp;&amp;o.nodeType==1)o=o.nextSibling;f=e.duplicate(),_moveToElementText(f,i),f.setEndPoint(&quot;StartToEnd&quot;,r),u-=f.text.replace(/\r\n|\n|\r/g,&quot;&quot;).length;if(a&gt;0&amp;&amp;o.nodeType==3){var g=o.previousSibling;while(g&amp;&amp;g.nodeType==3)u-=g.nodeValue.length,g=g.previousSibling}return{node:o,offset:u}}function _getEndRange(e,t){var n=e.ownerDocument||e,r=n.body.createTextRange();if(n==e)return r.collapse(!0),r;if(e.nodeType==1&amp;&amp;e.childNodes.length&gt;0){var i=e.childNodes,s,o;t===0?(o=i[0],s=!0):(o=i[t-1],s=!1);if(!o)return r;if(K(o).name===&quot;head&quot;)return t===1&amp;&amp;(s=!0),t===2&amp;&amp;(s=!1),r.collapse(s),r;if(o.nodeType==1){var u=K(o),a;return u.isControl()&amp;&amp;(a=n.createElement(&quot;span&quot;),s?u.before(a):u.after(a),o=a),_moveToElementText(r,o),r.collapse(s),a&amp;&amp;K(a).remove(),r}e=o,t=s?0:o.nodeValue.length}var f=n.createElement(&quot;span&quot;);return K(e).before(f),_moveToElementText(r,f),r.moveStart(&quot;character&quot;,t),K(f).remove(),r}function _toRange(e){function r(e){K(e.node).name==&quot;tr&quot;&amp;&amp;(e.node=e.node.cells[e.offset],e.offset=0)}var t,n;if(_IERANGE){if(e.item)return t=_getDoc(e.item(0)),n=new KRange(t),n.selectNode(e.item(0)),n;t=e.parentElement().ownerDocument;var i=_getStartEnd(e,!0),s=_getStartEnd(e,!1);return r(i),r(s),n=new KRange(t),n.setStart(i.node,i.offset),n.setEnd(s.node,s.offset),n}var o=e.startContainer;return t=o.ownerDocument||o,n=new KRange(t),n.setStart(o,e.startOffset),n.setEnd(e.endContainer,e.endOffset),n}function KRange(e){this.init(e)}function _range(e){return e.nodeName?new KRange(e):e.constructor===KRange?e:_toRange(e)}function _nativeCommand(e,t,n){try{e.execCommand(t,!1,n)}catch(r){}}function _nativeCommandValue(e,t){var n=&quot;&quot;;try{n=e.queryCommandValue(t)}catch(r){}return typeof n!=&quot;string&quot;&amp;&amp;(n=&quot;&quot;),n}function _getSel(e){var t=_getWin(e);return _IERANGE?e.selection:t.getSelection()}function _getRng(e){var t=_getSel(e),n;try{t.rangeCount&gt;0?n=t.getRangeAt(0):n=t.createRange()}catch(r){}return _IERANGE&amp;&amp;(!n||!n.item&amp;&amp;n.parentElement().ownerDocument!==e)?null:n}function _singleKeyMap(e){var t={},n,r;return _each(e,function(e,i){n=e.split(&quot;,&quot;);for(var s=0,o=n.length;s&lt;o;s++)r=n[s],t[r]=i}),t}function _hasAttrOrCss(e,t){return _hasAttrOrCssByKey(e,t,&quot;*&quot;)||_hasAttrOrCssByKey(e,t)}function _hasAttrOrCssByKey(e,t,n){n=n||e.name;if(e.type!==1)return!1;var r=_singleKeyMap(t);if(!r[n])return!1;var i=r[n].split(&quot;,&quot;);for(var s=0,o=i.length;s&lt;o;s++){var u=i[s];if(u===&quot;*&quot;)return!0;var a=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(u),f=a[1]?&quot;css&quot;:&quot;attr&quot;;u=a[2];var l=a[3]||&quot;&quot;;if(l===&quot;&quot;&amp;&amp;e[f](u)!==&quot;&quot;)return!0;if(l!==&quot;&quot;&amp;&amp;e[f](u)===l)return!0}return!1}function _removeAttrOrCss(e,t){if(e.type!=1)return;_removeAttrOrCssByKey(e,t,&quot;*&quot;),_removeAttrOrCssByKey(e,t)}function _removeAttrOrCssByKey(e,t,n){n=n||e.name;if(e.type!==1)return;var r=_singleKeyMap(t);if(!r[n])return;var i=r[n].split(&quot;,&quot;),s=!1;for(var o=0,u=i.length;o&lt;u;o++){var a=i[o];if(a===&quot;*&quot;){s=!0;break}var f=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(a);a=f[2],f[1]?(a=_toCamel(a),e[0].style[a]&amp;&amp;(e[0].style[a]=&quot;&quot;)):e.removeAttr(a)}s&amp;&amp;e.remove(!0)}function _getInnerNode(e){var t=e;while(t.first())t=t.first();return t}function _isEmptyNode(e){return e.type!=1||e.isSingle()?!1:e.html().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;)===&quot;&quot;}function _mergeWrapper(e,t){e=e.clone(!0);var n=_getInnerNode(e),r=e,i=!1;while(t){while(r)r.name===t.name&amp;&amp;(_mergeAttrs(r,t.attr(),t.css()),i=!0),r=r.first();i||n.append(t.clone(!1)),i=!1,t=t.first()}return e}function _wrapNode(e,t){t=t.clone(!0);if(e.type==3)return _getInnerNode(t).append(e.clone(!1)),e.replaceWith(t),t;var n=e,r;while((r=e.first())&amp;&amp;r.children().length==1)e=r;r=e.first();var i=e.doc.createDocumentFragment();while(r)i.appendChild(r[0]),r=r.next();return t=_mergeWrapper(n,t),i.firstChild&amp;&amp;_getInnerNode(t).append(i),n.replaceWith(t),t}function _mergeAttrs(e,t,n){_each(t,function(t,n){t!==&quot;style&quot;&amp;&amp;e.attr(t,n)}),_each(n,function(t,n){e.css(t,n)})}function _inPreElement(e){while(e&amp;&amp;e.name!=&quot;body&quot;){if(_PRE_TAG_MAP[e.name]||e.name==&quot;div&quot;&amp;&amp;e.hasClass(&quot;ke-script&quot;))return!0;e=e.parent()}return!1}function KCmd(e){this.init(e)}function _cmd(e){if(e.nodeName){var t=_getDoc(e);e=_range(t).selectNodeContents(t.body).collapse(!1)}return new KCmd(e)}function _drag(e){var t=e.moveEl,n=e.moveFn,r=e.clickEl||t,i=e.beforeDrag,s=e.iframeFix===undefined?!0:e.iframeFix,o=[document];s&amp;&amp;K(&quot;iframe&quot;).each(function(){var e=_formatUrl(this.src||&quot;&quot;,&quot;absolute&quot;);if(/^https?:\/\//.test(e))return;var t;try{t=_iframeDoc(this)}catch(n){}if(t){var r=K(this).pos();K(t).data(&quot;pos-x&quot;,r.x),K(t).data(&quot;pos-y&quot;,r.y),o.push(t)}}),r.mousedown(function(e){function p(e){e.preventDefault();var t=K(_getDoc(e.target)),i=_round((t.data(&quot;pos-x&quot;)||0)+e.pageX-c),s=_round((t.data(&quot;pos-y&quot;)||0)+e.pageY-h);n.call(r,u,a,f,l,i,s)}function d(e){e.preventDefault()}function v(e){e.preventDefault(),K(o).unbind(&quot;mousemove&quot;,p).unbind(&quot;mouseup&quot;,v).unbind(&quot;selectstart&quot;,d),s.releaseCapture&amp;&amp;s.releaseCapture()}e.stopPropagation();var s=r.get(),u=_removeUnit(t.css(&quot;left&quot;)),a=_removeUnit(t.css(&quot;top&quot;)),f=t.width(),l=t.height(),c=e.pageX,h=e.pageY;i&amp;&amp;i(),K(o).mousemove(p).mouseup(v).bind(&quot;selectstart&quot;,d),s.setCapture&amp;&amp;s.setCapture()})}function KWidget(e){this.init(e)}function _widget(e){return new KWidget(e)}function _iframeDoc(e){return e=_get(e),e.contentDocument||e.contentWindow.document}function _getInitHtml(e,t,n,r){var i=[_direction===&quot;&quot;?&quot;&lt;html&gt;&quot;:&#x27;&lt;html dir=&quot;&#x27;+_direction+&#x27;&quot;&gt;&#x27;,&#x27;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot; /&gt;&lt;title&gt;&lt;/title&gt;&#x27;,&quot;&lt;style&gt;&quot;,&quot;html {margin:0;padding:0;}&quot;,&quot;body {margin:0;padding:5px;}&quot;,&#x27;body, td {font:12px/1.5 &quot;sans serif&quot;,tahoma,verdana,helvetica;}&#x27;,&quot;body, p, div {word-wrap: break-word;}&quot;,&quot;p {margin:5px 0;}&quot;,&quot;table {border-collapse:collapse;}&quot;,&quot;img {border:0;}&quot;,&quot;noscript {display:none;}&quot;,&quot;table.ke-zeroborder td {border:1px dotted #AAA;}&quot;,&quot;img.ke-flash {&quot;,&quot;	border:1px solid #AAA;&quot;,&quot;	background-image:url(&quot;+e+&quot;common/flash.gif);&quot;,&quot;	background-position:center center;&quot;,&quot;	background-repeat:no-repeat;&quot;,&quot;	width:100px;&quot;,&quot;	height:100px;&quot;,&quot;}&quot;,&quot;img.ke-rm {&quot;,&quot;	border:1px solid #AAA;&quot;,&quot;	background-image:url(&quot;+e+&quot;common/rm.gif);&quot;,&quot;	background-position:center center;&quot;,&quot;	background-repeat:no-repeat;&quot;,&quot;	width:100px;&quot;,&quot;	height:100px;&quot;,&quot;}&quot;,&quot;img.ke-media {&quot;,&quot;	border:1px solid #AAA;&quot;,&quot;	background-image:url(&quot;+e+&quot;common/media.gif);&quot;,&quot;	background-position:center center;&quot;,&quot;	background-repeat:no-repeat;&quot;,&quot;	width:100px;&quot;,&quot;	height:100px;&quot;,&quot;}&quot;,&quot;img.ke-anchor {&quot;,&quot;	border:1px dashed #666;&quot;,&quot;	width:16px;&quot;,&quot;	height:16px;&quot;,&quot;}&quot;,&quot;.ke-script, .ke-noscript, .ke-display-none {&quot;,&quot;	display:none;&quot;,&quot;	font-size:0;&quot;,&quot;	width:0;&quot;,&quot;	height:0;&quot;,&quot;}&quot;,&quot;.ke-pagebreak {&quot;,&quot;	border:1px dotted #AAA;&quot;,&quot;	font-size:0;&quot;,&quot;	height:2px;&quot;,&quot;}&quot;,&quot;&lt;/style&gt;&quot;];return _isArray(n)||(n=[n]),_each(n,function(e,t){t&amp;&amp;i.push(&#x27;&lt;link href=&quot;&#x27;+t+&#x27;&quot; rel=&quot;stylesheet&quot; /&gt;&#x27;)}),r&amp;&amp;i.push(&quot;&lt;style&gt;&quot;+r+&quot;&lt;/style&gt;&quot;),i.push(&quot;&lt;/head&gt;&lt;body &quot;+(t?&#x27;class=&quot;&#x27;+t+&#x27;&quot;&#x27;:&quot;&quot;)+&quot;&gt;&lt;/body&gt;&lt;/html&gt;&quot;),i.join(&quot;\n&quot;)}function _elementVal(e,t){if(e.hasVal()){if(t===undefined){var n=e.val();return n=n.replace(/(&lt;(?:p|p\s[^&gt;]*)&gt;) *(&lt;\/p&gt;)/ig,&quot;&quot;),n}return e.val(t)}return e.html(t)}function KEdit(e){this.init(e)}function _edit(e){return new KEdit(e)}function _selectToolbar(e,t){var n=this,r=n.get(e);if(r){if(r.hasClass(&quot;ke-disabled&quot;))return;t(r)}}function KToolbar(e){this.init(e)}function _toolbar(e){return new KToolbar(e)}function KMenu(e){this.init(e)}function _menu(e){return new KMenu(e)}function KColorPicker(e){this.init(e)}function _colorpicker(e){return new KColorPicker(e)}function KUploadButton(e){this.init(e)}function _uploadbutton(e){return new KUploadButton(e)}function _createButton(e){e=e||{};var t=e.name||&quot;&quot;,n=K(&#x27;&lt;span class=&quot;ke-button-common ke-button-outer&quot; title=&quot;&#x27;+t+&#x27;&quot;&gt;&lt;/span&gt;&#x27;),r=K(&#x27;&lt;input class=&quot;ke-button-common ke-button&quot; type=&quot;button&quot; value=&quot;&#x27;+t+&#x27;&quot; /&gt;&#x27;);return e.click&amp;&amp;r.click(e.click),n.append(r),n}function KDialog(e){this.init(e)}function _dialog(e){return new KDialog(e)}function _tabs(e){var t=_widget(e),n=t.remove,r=e.afterSelect,i=t.div,s=[];i.addClass(&quot;ke-tabs&quot;).bind(&quot;contextmenu,mousedown,mousemove&quot;,function(e){e.preventDefault()});var o=K(&#x27;&lt;ul class=&quot;ke-tabs-ul ke-clearfix&quot;&gt;&lt;/ul&gt;&#x27;);return i.append(o),t.add=function(e){var t=K(&#x27;&lt;li class=&quot;ke-tabs-li&quot;&gt;&#x27;+e.title+&quot;&lt;/li&gt;&quot;);t.data(&quot;tab&quot;,e),s.push(t),o.append(t)},t.selectedIndex=0,t.select=function(e){t.selectedIndex=e,_each(s,function(n,r){r.unbind(),n===e?(r.addClass(&quot;ke-tabs-li-selected&quot;),K(r.data(&quot;tab&quot;).panel).show(&quot;&quot;)):(r.removeClass(&quot;ke-tabs-li-selected&quot;).removeClass(&quot;ke-tabs-li-on&quot;).mouseover(function(){K(this).addClass(&quot;ke-tabs-li-on&quot;)}).mouseout(function(){K(this).removeClass(&quot;ke-tabs-li-on&quot;)}).click(function(){t.select(n)}),K(r.data(&quot;tab&quot;).panel).hide())}),r&amp;&amp;r.call(t,e)},t.remove=function(){_each(s,function(){this.remove()}),o.remove(),n.call(t)},t}function _loadScript(e,t){var n=document.getElementsByTagName(&quot;head&quot;)[0]||(_QUIRKS?document.body:document.documentElement),r=document.createElement(&quot;script&quot;);n.appendChild(r),r.src=e,r.charset=&quot;utf-8&quot;,r.onload=r.onreadystatechange=function(){if(!this.readyState||this.readyState===&quot;loaded&quot;)t&amp;&amp;t(),r.onload=r.onreadystatechange=null,n.removeChild(r)}}function _chopQuery(e){var t=e.indexOf(&quot;?&quot;);return t&gt;0?e.substr(0,t):e}function _loadStyle(e){var t=document.getElementsByTagName(&quot;head&quot;)[0]||(_QUIRKS?document.body:document.documentElement),n=document.createElement(&quot;link&quot;),r=_chopQuery(_formatUrl(e,&quot;absolute&quot;)),i=K(&#x27;link[rel=&quot;stylesheet&quot;]&#x27;,t);for(var s=0,o=i.length;s&lt;o;s++)if(_chopQuery(_formatUrl(i[s].href,&quot;absolute&quot;))===r)return;t.appendChild(n),n.href=e,n.rel=&quot;stylesheet&quot;}function _ajax(e,t,n,r,i){n=n||&quot;GET&quot;,i=i||&quot;json&quot;;var s=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);s.open(n,e,!0),s.onreadystatechange=function(){if(s.readyState==4&amp;&amp;s.status==200&amp;&amp;t){var e=_trim(s.responseText);i==&quot;json&quot;&amp;&amp;(e=_json(e)),t(e)}};if(n==&quot;POST&quot;){var o=[];_each(r,function(e,t){o.push(encodeURIComponent(e)+&quot;=&quot;+encodeURIComponent(t))});try{s.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;)}catch(u){}s.send(o.join(&quot;&amp;&quot;))}else s.send(null)}function _plugin(e,t){if(e===undefined)return _plugins;if(!t)return _plugins[e];_plugins[e]=t}function _parseLangKey(e){var t,n=&quot;core&quot;;if(t=/^(\w+)\.(\w+)$/.exec(e))n=t[1],e=t[2];return{ns:n,key:e}}function _lang(e,t){t=t===undefined?K.options.langType:t;if(typeof e==&quot;string&quot;){if(!_language[t])return&quot;no language&quot;;var n=e.length-1;if(e.substr(n)===&quot;.&quot;)return _language[t][e.substr(0,n)];var r=_parseLangKey(e);return _language[t][r.ns][r.key]}_each(e,function(e,n){var r=_parseLangKey(e);_language[t]||(_language[t]={}),_language[t][r.ns]||(_language[t][r.ns]={}),_language[t][r.ns][r.key]=n})}function _getImageFromRange(e,t){if(e.collapsed)return;e=e.cloneRange().up();var n=e.startContainer,r=e.startOffset;if(!_WEBKIT&amp;&amp;!e.isControl())return;var i=K(n.childNodes[r]);if(!i||i.name!=&quot;img&quot;)return;if(t(i))return i}function _bindContextmenuEvent(){var e=this,t=e.edit.doc;K(t).contextmenu(function(t){e.menu&amp;&amp;e.hideMenu();if(!e.useContextmenu){t.preventDefault();return}if(e._contextmenus.length===0)return;var n=0,r=[];_each(e._contextmenus,function(){if(this.title==&quot;-&quot;){r.push(this);return}this.cond&amp;&amp;this.cond()&amp;&amp;(r.push(this),this.width&amp;&amp;this.width&gt;n&amp;&amp;(n=this.width))});while(r.length&gt;0&amp;&amp;r[0].title==&quot;-&quot;)r.shift();while(r.length&gt;0&amp;&amp;r[r.length-1].title==&quot;-&quot;)r.pop();var i=null;_each(r,function(e){this.title==&quot;-&quot;&amp;&amp;i.title==&quot;-&quot;&amp;&amp;delete r[e],i=this});if(r.length&gt;0){t.preventDefault();var s=K(e.edit.iframe).pos(),o=_menu({x:s.x+t.clientX,y:s.y+t.clientY,width:n,css:{visibility:&quot;hidden&quot;},shadowMode:e.shadowMode});_each(r,function(){this.title&amp;&amp;o.addItem(this)});var u=_docElement(o.doc),a=o.div.height();t.clientY+a&gt;=u.clientHeight-100&amp;&amp;o.pos(o.x,_removeUnit(o.y)-a),o.div.css(&quot;visibility&quot;,&quot;visible&quot;),e.menu=o}})}function _bindNewlineEvent(){function s(e){var t=K(e.commonAncestor());while(t){if(t.type==1&amp;&amp;!t.isStyle())break;t=t.parent()}return t.name}var e=this,t=e.edit.doc,n=e.newlineTag;if(_IE&amp;&amp;n!==&quot;br&quot;)return;if(_GECKO&amp;&amp;_V&lt;3&amp;&amp;n!==&quot;p&quot;)return;if(_OPERA&amp;&amp;_V&lt;9)return;var r=_toMap(&quot;h1,h2,h3,h4,h5,h6,pre,li&quot;),i=_toMap(&quot;p,h1,h2,h3,h4,h5,h6,pre,li,blockquote&quot;);K(t).keydown(function(o){if(o.which!=13||o.shiftKey||o.ctrlKey||o.altKey)return;e.cmd.selection();var u=s(e.cmd.range);if(u==&quot;marquee&quot;||u==&quot;select&quot;)return;if(n===&quot;br&quot;&amp;&amp;!r[u]){o.preventDefault(),e.insertHtml(&quot;&lt;br /&gt;&quot;+(_IE&amp;&amp;_V&lt;9?&quot;&quot;:&quot;​&quot;));return}i[u]||_nativeCommand(t,&quot;formatblock&quot;,&quot;&lt;p&gt;&quot;)}),K(t).keyup(function(r){if(r.which!=13||r.shiftKey||r.ctrlKey||r.altKey)return;if(n==&quot;br&quot;)return;if(_GECKO){var o=e.cmd.commonAncestor(&quot;p&quot;),u=e.cmd.commonAncestor(&quot;a&quot;);u&amp;&amp;u.text()==&quot;&quot;&amp;&amp;(u.remove(!0),e.cmd.range.selectNodeContents(o[0]).collapse(!0),e.cmd.select());return}e.cmd.selection();var a=s(e.cmd.range);if(a==&quot;marquee&quot;||a==&quot;select&quot;)return;i[a]||_nativeCommand(t,&quot;formatblock&quot;,&quot;&lt;p&gt;&quot;);var f=e.cmd.commonAncestor(&quot;div&quot;);if(f){var l=K(&quot;&lt;p&gt;&lt;/p&gt;&quot;),c=f[0].firstChild;while(c){var h=c.nextSibling;l.append(c),c=h}f.before(l),f.remove(),e.cmd.range.selectNodeContents(l[0]),e.cmd.select()}})}function _bindTabEvent(){var e=this,t=e.edit.doc;K(t).keydown(function(n){if(n.which==9){n.preventDefault();if(e.afterTab){e.afterTab.call(e,n);return}var r=e.cmd,i=r.range;i.shrink(),i.collapsed&amp;&amp;i.startContainer.nodeType==1&amp;&amp;(i.insertNode(K(&quot;@&amp;nbsp;&quot;,t)[0]),r.select()),e.insertHtml(&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;)}})}function _bindFocusEvent(){var e=this;K(e.edit.textarea[0],e.edit.win).focus(function(t){e.afterFocus&amp;&amp;e.afterFocus.call(e,t)}).blur(function(t){e.afterBlur&amp;&amp;e.afterBlur.call(e,t)})}function _removeBookmarkTag(e){return _trim(e.replace(/&lt;span [^&gt;]*id=&quot;?__kindeditor_bookmark_\w+_\d+__&quot;?[^&gt;]*&gt;&lt;\/span&gt;/ig,&quot;&quot;))}function _removeTempTag(e){return e.replace(/&lt;div[^&gt;]+class=&quot;?__kindeditor_paste__&quot;?[^&gt;]*&gt;[\s\S]*?&lt;\/div&gt;/ig,&quot;&quot;)}function _addBookmarkToStack(e,t){if(e.length===0){e.push(t);return}var n=e[e.length-1];_removeBookmarkTag(t.html)!==_removeBookmarkTag(n.html)&amp;&amp;e.push(t)}function _undoToRedo(e,t){var n=this,r=n.edit,i=r.doc.body,s,o;if(e.length===0)return n;r.designMode?(s=n.cmd.range,o=s.createBookmark(!0),o.html=i.innerHTML):o={html:i.innerHTML},_addBookmarkToStack(t,o);var u=e.pop();return _removeBookmarkTag(o.html)===_removeBookmarkTag(u.html)&amp;&amp;e.length&gt;0&amp;&amp;(u=e.pop()),r.designMode?(r.html(u.html),u.start&amp;&amp;(s.moveToBookmark(u),n.select())):K(i).html(_removeBookmarkTag(u.html)),n}function KEditor(e){function n(e,n){KEditor.prototype[e]===undefined&amp;&amp;(t[e]=n),t.options[e]=n}var t=this;t.options={},_each(e,function(t,r){n(t,e[t])}),_each(K.options,function(e,r){t[e]===undefined&amp;&amp;n(e,r)});var r=K(t.srcElement||&quot;&lt;textarea/&gt;&quot;);t.width||(t.width=r[0].style.width||r.width()),t.height||(t.height=r[0].style.height||r.height()),n(&quot;width&quot;,_undef(t.width,t.minWidth)),n(&quot;height&quot;,_undef(t.height,t.minHeight)),n(&quot;width&quot;,_addUnit(t.width)),n(&quot;height&quot;,_addUnit(t.height)),_MOBILE&amp;&amp;(!_IOS||_V&lt;534)&amp;&amp;(t.designMode=!1),t.srcElement=r,t.initContent=&quot;&quot;,t.plugin={},t.isCreated=!1,t._handlers={},t._contextmenus=[],t._undoStack=[],t._redoStack=[],t._firstAddBookmark=!0,t.menu=t.contextmenu=null,t.dialogs=[]}function _editor(e){return new KEditor(e)}function _create(e,t){function r(e){return _each(_plugins,function(t,n){_isFunction(n)&amp;&amp;n.call(e,KindEditor)}),e.create()}t=t||{},t.basePath=_undef(t.basePath,K.basePath),t.themesPath=_undef(t.themesPath,t.basePath+&quot;themes/&quot;),t.langPath=_undef(t.langPath,t.basePath+&quot;lang/&quot;),t.pluginsPath=_undef(t.pluginsPath,t.basePath+&quot;plugins/&quot;);if(_undef(t.loadStyleMode,K.options.loadStyleMode)){var n=_undef(t.themeType,K.options.themeType);_loadStyle(t.themesPath+&quot;default/default.css&quot;),_loadStyle(t.themesPath+n+&quot;/&quot;+n+&quot;.css&quot;)}var i=K(e);if(!i||i.length===0)return;if(i.length&gt;1)return i.each(function(){_create(this,t)}),_instances[0];t.srcElement=i[0];var s=new KEditor(t);return _instances.push(s),_language[s.langType]?r(s):(_loadScript(s.langPath+s.langType+&quot;.js?ver=&quot;+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){r(s)}),s)}function _eachEditor(e,t){K(e).each(function(e,n){K.each(_instances,function(e,r){if(r&amp;&amp;r.srcElement[0]==n)return t.call(r,e),!1})})}if(window.KindEditor)return;window.console||(window.console={}),console.log||(console.log=function(){});var _VERSION=&quot;4.1.10 (2014-02-17)&quot;,_ua=navigator.userAgent.toLowerCase(),_IE=_ua.indexOf(&quot;msie&quot;)&gt;-1&amp;&amp;_ua.indexOf(&quot;opera&quot;)==-1,_NEWIE=_ua.indexOf(&quot;msie&quot;)==-1&amp;&amp;_ua.indexOf(&quot;trident&quot;)&gt;-1,_GECKO=_ua.indexOf(&quot;gecko&quot;)&gt;-1&amp;&amp;_ua.indexOf(&quot;khtml&quot;)==-1,_WEBKIT=_ua.indexOf(&quot;applewebkit&quot;)&gt;-1,_OPERA=_ua.indexOf(&quot;opera&quot;)&gt;-1,_MOBILE=_ua.indexOf(&quot;mobile&quot;)&gt;-1,_IOS=/ipad|iphone|ipod/.test(_ua),_QUIRKS=document.compatMode!=&quot;CSS1Compat&quot;,_IERANGE=!window.getSelection,_matches=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(_ua),_V=_matches?_matches[1]:&quot;0&quot;,_TIME=(new Date).getTime(),_round=Math.round,K={DEBUG:!1,VERSION:_VERSION,IE:_IE,GECKO:_GECKO,WEBKIT:_WEBKIT,OPERA:_OPERA,V:_V,TIME:_TIME,each:_each,isArray:_isArray,isFunction:_isFunction,inArray:_inArray,inString:_inString,trim:_trim,addUnit:_addUnit,removeUnit:_removeUnit,escape:_escape,unescape:_unescape,toCamel:_toCamel,toHex:_toHex,toMap:_toMap,toArray:_toArray,undef:_undef,invalidUrl:_invalidUrl,addParam:_addParam,extend:_extend,json:_json},_INLINE_TAG_MAP=_toMap(&quot;a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var&quot;),_BLOCK_TAG_MAP=_toMap(&quot;address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul&quot;),_SINGLE_TAG_MAP=_toMap(&quot;area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed&quot;),_STYLE_TAG_MAP=_toMap(&quot;b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u&quot;),_CONTROL_TAG_MAP=_toMap(&quot;img,table,input,textarea,button&quot;),_PRE_TAG_MAP=_toMap(&quot;pre,style,script&quot;),_NOSPLIT_TAG_MAP=_toMap(&quot;html,head,body,td,tr,table,ol,ul,li&quot;),_AUTOCLOSE_TAG_MAP=_toMap(&quot;colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr&quot;),_FILL_ATTR_MAP=_toMap(&quot;checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected&quot;),_VALUE_TAG_MAP=_toMap(&quot;input,button,textarea,select&quot;);K.basePath=_getBasePath(),K.options={designMode:!0,fullscreenMode:!1,filterMode:!0,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,basePath:K.basePath,themesPath:K.basePath+&quot;themes/&quot;,langPath:K.basePath+&quot;lang/&quot;,pluginsPath:K.basePath+&quot;plugins/&quot;,themeType:&quot;default&quot;,langType:&quot;zh_CN&quot;,urlType:&quot;&quot;,newlineTag:&quot;p&quot;,resizeType:2,syncType:&quot;form&quot;,pasteType:2,dialogAlignType:&quot;page&quot;,useContextmenu:!0,fullscreenShortcut:!1,bodyClass:&quot;ke-content&quot;,indentChar:&quot;	&quot;,cssPath:&quot;&quot;,cssData:&quot;&quot;,minWidth:650,minHeight:100,minChangeSize:50,zIndex:811213,items:[&quot;source&quot;,&quot;|&quot;,&quot;undo&quot;,&quot;redo&quot;,&quot;|&quot;,&quot;preview&quot;,&quot;print&quot;,&quot;template&quot;,&quot;code&quot;,&quot;cut&quot;,&quot;copy&quot;,&quot;paste&quot;,&quot;plainpaste&quot;,&quot;wordpaste&quot;,&quot;|&quot;,&quot;justifyleft&quot;,&quot;justifycenter&quot;,&quot;justifyright&quot;,&quot;justifyfull&quot;,&quot;insertorderedlist&quot;,&quot;insertunorderedlist&quot;,&quot;indent&quot;,&quot;outdent&quot;,&quot;subscript&quot;,&quot;superscript&quot;,&quot;clearhtml&quot;,&quot;quickformat&quot;,&quot;selectall&quot;,&quot;|&quot;,&quot;fullscreen&quot;,&quot;/&quot;,&quot;formatblock&quot;,&quot;fontname&quot;,&quot;fontsize&quot;,&quot;|&quot;,&quot;forecolor&quot;,&quot;hilitecolor&quot;,&quot;bold&quot;,&quot;italic&quot;,&quot;underline&quot;,&quot;strikethrough&quot;,&quot;lineheight&quot;,&quot;removeformat&quot;,&quot;|&quot;,&quot;image&quot;,&quot;multiimage&quot;,&quot;flash&quot;,&quot;media&quot;,&quot;insertfile&quot;,&quot;table&quot;,&quot;hr&quot;,&quot;emoticons&quot;,&quot;baidumap&quot;,&quot;pagebreak&quot;,&quot;anchor&quot;,&quot;link&quot;,&quot;unlink&quot;,&quot;|&quot;,&quot;about&quot;],noDisableItems:[&quot;source&quot;,&quot;fullscreen&quot;],colorTable:[[&quot;#E53333&quot;,&quot;#E56600&quot;,&quot;#FF9900&quot;,&quot;#64451D&quot;,&quot;#DFC5A4&quot;,&quot;#FFE500&quot;],[&quot;#009900&quot;,&quot;#006600&quot;,&quot;#99BB00&quot;,&quot;#B8D100&quot;,&quot;#60D978&quot;,&quot;#00D5FF&quot;],[&quot;#337FE5&quot;,&quot;#003399&quot;,&quot;#4C33E5&quot;,&quot;#9933E5&quot;,&quot;#CC33E5&quot;,&quot;#EE33EE&quot;],[&quot;#FFFFFF&quot;,&quot;#CCCCCC&quot;,&quot;#999999&quot;,&quot;#666666&quot;,&quot;#333333&quot;,&quot;#000000&quot;]],fontSizeTable:[&quot;9px&quot;,&quot;10px&quot;,&quot;12px&quot;,&quot;14px&quot;,&quot;16px&quot;,&quot;18px&quot;,&quot;24px&quot;,&quot;32px&quot;],htmlTags:{font:[&quot;id&quot;,&quot;class&quot;,&quot;color&quot;,&quot;size&quot;,&quot;face&quot;,&quot;.background-color&quot;],span:[&quot;id&quot;,&quot;class&quot;,&quot;.color&quot;,&quot;.background-color&quot;,&quot;.font-size&quot;,&quot;.font-family&quot;,&quot;.background&quot;,&quot;.font-weight&quot;,&quot;.font-style&quot;,&quot;.text-decoration&quot;,&quot;.vertical-align&quot;,&quot;.line-height&quot;],div:[&quot;id&quot;,&quot;class&quot;,&quot;align&quot;,&quot;.border&quot;,&quot;.margin&quot;,&quot;.padding&quot;,&quot;.text-align&quot;,&quot;.color&quot;,&quot;.background-color&quot;,&quot;.font-size&quot;,&quot;.font-family&quot;,&quot;.font-weight&quot;,&quot;.background&quot;,&quot;.font-style&quot;,&quot;.text-decoration&quot;,&quot;.vertical-align&quot;,&quot;.margin-left&quot;],table:[&quot;id&quot;,&quot;class&quot;,&quot;border&quot;,&quot;cellspacing&quot;,&quot;cellpadding&quot;,&quot;width&quot;,&quot;height&quot;,&quot;align&quot;,&quot;bordercolor&quot;,&quot;.padding&quot;,&quot;.margin&quot;,&quot;.border&quot;,&quot;bgcolor&quot;,&quot;.text-align&quot;,&quot;.color&quot;,&quot;.background-color&quot;,&quot;.font-size&quot;,&quot;.font-family&quot;,&quot;.font-weight&quot;,&quot;.font-style&quot;,&quot;.text-decoration&quot;,&quot;.background&quot;,&quot;.width&quot;,&quot;.height&quot;,&quot;.border-collapse&quot;],&quot;td,th&quot;:[&quot;id&quot;,&quot;class&quot;,&quot;align&quot;,&quot;valign&quot;,&quot;width&quot;,&quot;height&quot;,&quot;colspan&quot;,&quot;rowspan&quot;,&quot;bgcolor&quot;,&quot;.text-align&quot;,&quot;.color&quot;,&quot;.background-color&quot;,&quot;.font-size&quot;,&quot;.font-family&quot;,&quot;.font-weight&quot;,&quot;.font-style&quot;,&quot;.text-decoration&quot;,&quot;.vertical-align&quot;,&quot;.background&quot;,&quot;.border&quot;],a:[&quot;id&quot;,&quot;class&quot;,&quot;href&quot;,&quot;target&quot;,&quot;name&quot;],embed:[&quot;id&quot;,&quot;class&quot;,&quot;src&quot;,&quot;width&quot;,&quot;height&quot;,&quot;type&quot;,&quot;loop&quot;,&quot;autostart&quot;,&quot;quality&quot;,&quot;.width&quot;,&quot;.height&quot;,&quot;align&quot;,&quot;allowscriptaccess&quot;],img:[&quot;id&quot;,&quot;class&quot;,&quot;src&quot;,&quot;width&quot;,&quot;height&quot;,&quot;border&quot;,&quot;alt&quot;,&quot;title&quot;,&quot;align&quot;,&quot;.width&quot;,&quot;.height&quot;,&quot;.border&quot;],&quot;p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6&quot;:[&quot;id&quot;,&quot;class&quot;,&quot;align&quot;,&quot;.text-align&quot;,&quot;.color&quot;,&quot;.background-color&quot;,&quot;.font-size&quot;,&quot;.font-family&quot;,&quot;.background&quot;,&quot;.font-weight&quot;,&quot;.font-style&quot;,&quot;.text-decoration&quot;,&quot;.vertical-align&quot;,&quot;.text-indent&quot;,&quot;.margin-left&quot;],pre:[&quot;id&quot;,&quot;class&quot;],hr:[&quot;id&quot;,&quot;class&quot;,&quot;.page-break-after&quot;],&quot;br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del&quot;:[&quot;id&quot;,&quot;class&quot;],iframe:[&quot;id&quot;,&quot;class&quot;,&quot;src&quot;,&quot;frameborder&quot;,&quot;width&quot;,&quot;height&quot;,&quot;.width&quot;,&quot;.height&quot;]},layout:&#x27;&lt;div class=&quot;container&quot;&gt;&lt;div class=&quot;toolbar&quot;&gt;&lt;/div&gt;&lt;div class=&quot;edit&quot;&gt;&lt;/div&gt;&lt;div class=&quot;statusbar&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;};var _useCapture=!1,_INPUT_KEY_MAP=_toMap(&quot;8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222&quot;),_CURSORMOVE_KEY_MAP=_toMap(&quot;33..40&quot;),_CHANGE_KEY_MAP={};_each(_INPUT_KEY_MAP,function(e,t){_CHANGE_KEY_MAP[e]=t}),_each(_CURSORMOVE_KEY_MAP,function(e,t){_CHANGE_KEY_MAP[e]=t});var _EVENT_PROPS=&quot;altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which&quot;.split(&quot;,&quot;);_extend(KEvent,{init:function(e,t){var n=this,r=e.ownerDocument||e.document||e;n.event=t,_each(_EVENT_PROPS,function(e,r){n[r]=t[r]}),n.target||(n.target=n.srcElement||r),n.target.nodeType===3&amp;&amp;(n.target=n.target.parentNode),!n.relatedTarget&amp;&amp;n.fromElement&amp;&amp;(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement);if(n.pageX==null&amp;&amp;n.clientX!=null){var i=r.documentElement,s=r.body;n.pageX=n.clientX+(i&amp;&amp;i.scrollLeft||s&amp;&amp;s.scrollLeft||0)-(i&amp;&amp;i.clientLeft||s&amp;&amp;s.clientLeft||0),n.pageY=n.clientY+(i&amp;&amp;i.scrollTop||s&amp;&amp;s.scrollTop||0)-(i&amp;&amp;i.clientTop||s&amp;&amp;s.clientTop||0)}!n.which&amp;&amp;(n.charCode||n.charCode===0?n.charCode:n.keyCode)&amp;&amp;(n.which=n.charCode||n.keyCode),!n.metaKey&amp;&amp;n.ctrlKey&amp;&amp;(n.metaKey=n.ctrlKey),!n.which&amp;&amp;n.button!==undefined&amp;&amp;(n.which=n.button&amp;1?1:n.button&amp;2?3:n.button&amp;4?2:0);switch(n.which){case 186:n.which=59;break;case 187:case 107:case 43:n.which=61;break;case 189:case 45:n.which=109;break;case 42:n.which=106;break;case 47:n.which=111;break;case 78:n.which=110}n.which&gt;=96&amp;&amp;n.which&lt;=105&amp;&amp;(n.which-=48)},preventDefault:function(){var e=this.event;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},stop:function(){this.preventDefault(),this.stopPropagation()}});var _eventExpendo=&quot;kindeditor_&quot;+_TIME,_eventId=0,_eventData={},_readyFinished=!1;_IE&amp;&amp;window.attachEvent(&quot;onunload&quot;,function(){_each(_eventData,function(e,t){t.el&amp;&amp;_unbind(t.el)})}),K.ctrl=_ctrl,K.ready=_ready,K.formatUrl=_formatUrl,K.formatHtml=_formatHtml,K.getCssList=_getCssList,K.getAttrList=_getAttrList,K.mediaType=_mediaType,K.mediaAttrs=_mediaAttrs,K.mediaEmbed=_mediaEmbed,K.mediaImg=_mediaImg,K.clearMsWord=_clearMsWord,K.tmpl=_tmpl;var _getSetAttrDiv=document.createElement(&quot;div&quot;);_getSetAttrDiv.setAttribute(&quot;className&quot;,&quot;t&quot;);var _GET_SET_ATTRIBUTE=_getSetAttrDiv.className!==&quot;t&quot;;K.query=_query,K.queryAll=_queryAll,_extend(KNode,{init:function(e){var t=this;e=_isArray(e)?e:[e];var n=0;for(var r=0,i=e.length;r&lt;i;r++)e[r]&amp;&amp;(t[r]=e[r].constructor===KNode?e[r][0]:e[r],n++);t.length=n,t.doc=_getDoc(t[0]),t.name=_getNodeName(t[0]),t.type=t.length&gt;0?t[0].nodeType:null,t.win=_getWin(t[0])},each:function(e){var t=this;for(var n=0;n&lt;t.length;n++)if(e.call(t[n],n,t[n])===!1)return t;return t},bind:function(e,t){return this.each(function(){_bind(this,e,t)}),this},unbind:function(e,t){return this.each(function(){_unbind(this,e,t)}),this},fire:function(e){return this.length&lt;1?this:(_fire(this[0],e),this)},hasAttr:function(e){return this.length&lt;1?!1:!!_getAttr(this[0],e)},attr:function(e,t){var n=this;return e===undefined?_getAttrList(n.outer()):typeof e==&quot;object&quot;?(_each(e,function(e,t){n.attr(e,t)}),n):t===undefined?(t=n.length&lt;1?null:_getAttr(n[0],e),t===null?&quot;&quot;:t):(n.each(function(){_setAttr(this,e,t)}),n)},removeAttr:function(e){return this.each(function(){_removeAttr(this,e)}),this},get:function(e){return this.length&lt;1?null:this[e||0]},eq:function(e){return this.length&lt;1?null:this[e]?new KNode(this[e]):null},hasClass:function(e){return this.length&lt;1?!1:_hasClass(this[0],e)},addClass:function(e){return this.each(function(){_hasClass(this,e)||(this.className=_trim(this.className+&quot; &quot;+e))}),this},removeClass:function(e){return this.each(function(){_hasClass(this,e)&amp;&amp;(this.className=_trim(this.className.replace(new RegExp(&quot;(^|\\s)&quot;+e+&quot;(\\s|$)&quot;),&quot; &quot;)))}),this},html:function(e){var t=this;return e===undefined?t.length&lt;1||t.type!=1?&quot;&quot;:_formatHtml(t[0].innerHTML):(t.each(function(){_setHtml(this,e)}),t)},text:function(){var e=this;return e.length&lt;1?&quot;&quot;:_IE?e[0].innerText:e[0].textContent},hasVal:function(){return this.length&lt;1?!1:_hasVal(this[0])},val:function(e){var t=this;return e===undefined?t.length&lt;1?&quot;&quot;:t.hasVal()?t[0].value:t.attr(&quot;value&quot;):(t.each(function(){_hasVal(this)?this.value=e:_setAttr(this,&quot;value&quot;,e)}),t)},css:function(e,t){var n=this;return e===undefined?_getCssList(n.attr(&quot;style&quot;)):typeof e==&quot;object&quot;?(_each(e,function(e,t){n.css(e,t)}),n):t===undefined?n.length&lt;1?&quot;&quot;:n[0].style[_toCamel(e)]||_computedCss(n[0],e)||&quot;&quot;:(n.each(function(){this.style[_toCamel(e)]=t}),n)},width:function(e){var t=this;return e===undefined?t.length&lt;1?0:t[0].offsetWidth:t.css(&quot;width&quot;,_addUnit(e))},height:function(e){var t=this;return e===undefined?t.length&lt;1?0:t[0].offsetHeight:t.css(&quot;height&quot;,_addUnit(e))},opacity:function(e){return this.each(function(){this.style.opacity===undefined?this.style.filter=e==1?&quot;&quot;:&quot;alpha(opacity=&quot;+e*100+&quot;)&quot;:this.style.opacity=e==1?&quot;&quot;:e}),this},data:function(e,t){var n=this;return e=&quot;kindeditor_data_&quot;+e,t===undefined?n.length&lt;1?null:n[0][e]:(this.each(function(){this[e]=t}),n)},pos:function(){var e=this,t=e[0],n=0,r=0;if(t)if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),s=_getScrollPos(e.doc);n=i.left+s.x,r=i.top+s.y}else while(t)n+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{x:_round(n),y:_round(r)}},clone:function(e){return this.length&lt;1?new KNode([]):new KNode(this[0].cloneNode(e))},append:function(e){return this.each(function(){this.appendChild&amp;&amp;this.appendChild(_get(e))}),this},appendTo:function(e){return this.each(function(){_get(e).appendChild(this)}),this},before:function(e){return this.each(function(){this.parentNode.insertBefore(_get(e),this)}),this},after:function(e){return this.each(function(){this.nextSibling?this.parentNode.insertBefore(_get(e),this.nextSibling):this.parentNode.appendChild(_get(e))}),this},replaceWith:function(e){var t=[];return this.each(function(n,r){_unbind(r);var i=_get(e);r.parentNode.replaceChild(i,r),t.push(i)}),K(t)},empty:function(){var e=this;return e.each(function(e,t){var n=t.firstChild;while(n){if(!t.parentNode)return;var r=n.nextSibling;n.parentNode.removeChild(n),n=r}}),e},remove:function(e){var t=this;return t.each(function(n,r){if(!r.parentNode)return;_unbind(r);if(e){var i=r.firstChild;while(i){var s=i.nextSibling;r.parentNode.insertBefore(i,r),i=s}}r.parentNode.removeChild(r),delete t[n]}),t.length=0,t},show:function(e){var t=this;return e===undefined&amp;&amp;(e=t._originDisplay||&quot;&quot;),t.css(&quot;display&quot;)!=&quot;none&quot;?t:t.css(&quot;display&quot;,e)},hide:function(){var e=this;return e.length&lt;1?e:(e._originDisplay=e[0].style.display,e.css(&quot;display&quot;,&quot;none&quot;))},outer:function(){var e=this;if(e.length&lt;1)return&quot;&quot;;var t=e.doc.createElement(&quot;div&quot;),n;return t.appendChild(e[0].cloneNode(!0)),n=_formatHtml(t.innerHTML),t=null,n},isSingle:function(){return!!_SINGLE_TAG_MAP[this.name]},isInline:function(){return!!_INLINE_TAG_MAP[this.name]},isBlock:function(){return!!_BLOCK_TAG_MAP[this.name]},isStyle:function(){return!!_STYLE_TAG_MAP[this.name]},isControl:function(){return!!_CONTROL_TAG_MAP[this.name]},contains:function(e){return this.length&lt;1?!1:_contains(this[0],_get(e))},parent:function(){if(this.length&lt;1)return null;var e=this[0].parentNode;return e?new KNode(e):null},children:function(){if(this.length&lt;1)return new KNode([]);var e=[],t=this[0].firstChild;while(t)(t.nodeType!=3||_trim(t.nodeValue)!==&quot;&quot;)&amp;&amp;e.push(t),t=t.nextSibling;return new KNode(e)},first:function(){var e=this.children();return e.length&gt;0?e.eq(0):null},last:function(){var e=this.children();return e.length&gt;0?e.eq(e.length-1):null},index:function(){if(this.length&lt;1)return-1;var e=-1,t=this[0];while(t)e++,t=t.previousSibling;return e},prev:function(){if(this.length&lt;1)return null;var e=this[0].previousSibling;return e?new KNode(e):null},next:function(){if(this.length&lt;1)return null;var e=this[0].nextSibling;return e?new KNode(e):null},scan:function(e,t){function n(r){var i=t?r.firstChild:r.lastChild;while(i){var s=t?i.nextSibling:i.previousSibling;if(e(i)===!1)return!1;if(n(i)===!1)return!1;i=s}}if(this.length&lt;1)return;return t=t===undefined?!0:t,n(this[0]),this}}),_each(&quot;blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu&quot;.split(&quot;,&quot;),function(e,t){KNode.prototype[t]=function(e){return e?this.bind(t,e):this.fire(t)}});var _K=K;K=function(e,t){function n(e){return e[0]||(e=[]),new KNode(e)}if(e===undefined||e===null)return;if(typeof e==&quot;string&quot;){t&amp;&amp;(t=_get(t));var r=e.length;e.charAt(0)===&quot;@&quot;&amp;&amp;(e=e.substr(1));if(e.length!==r||/&lt;.+&gt;/.test(e)){var i=t?t.ownerDocument||t:document,s=i.createElement(&quot;div&quot;),o=[];s.innerHTML=&#x27;&lt;img id=&quot;__kindeditor_temp_tag__&quot; width=&quot;0&quot; height=&quot;0&quot; style=&quot;display:none;&quot; /&gt;&#x27;+e;for(var u=0,a=s.childNodes.length;u&lt;a;u++){var f=s.childNodes[u];if(f.id==&quot;__kindeditor_temp_tag__&quot;)continue;o.push(f)}return n(o)}return n(_queryAll(e,t))}return e&amp;&amp;e.constructor===KNode?e:(e.toArray&amp;&amp;(e=e.toArray()),_isArray(e)?n(e):n(_toArray(arguments)))},_each(_K,function(e,t){K[e]=t}),K.NodeClass=KNode,window.KindEditor=K;var _START_TO_START=0,_START_TO_END=1,_END_TO_END=2,_END_TO_START=3,_BOOKMARK_ID=0;_extend(KRange,{init:function(e){var t=this;t.startContainer=e,t.startOffset=0,t.endContainer=e,t.endOffset=0,t.collapsed=!0,t.doc=e},commonAncestor:function(){function e(e){var t=[];while(e)t.push(e),e=e.parentNode;return t}var t=e(this.startContainer),n=e(this.endContainer),r=0,i=t.length,s=n.length,o,u;while(++r){o=t[i-r],u=n[s-r];if(!o||!u||o!==u)break}return t[i-r+1]},setStart:function(e,t){var n=this,r=n.doc;return n.startContainer=e,n.startOffset=t,n.endContainer===r&amp;&amp;(n.endContainer=e,n.endOffset=t),_updateCollapsed(this)},setEnd:function(e,t){var n=this,r=n.doc;return n.endContainer=e,n.endOffset=t,n.startContainer===r&amp;&amp;(n.startContainer=e,n.startOffset=t),_updateCollapsed(this)},setStartBefore:function(e){return this.setStart(e.parentNode||this.doc,K(e).index())},setStartAfter:function(e){return this.setStart(e.parentNode||this.doc,K(e).index()+1)},setEndBefore:function(e){return this.setEnd(e.parentNode||this.doc,K(e).index())},setEndAfter:function(e){return this.setEnd(e.parentNode||this.doc,K(e).index()+1)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){var t=K(e);if(t.type==3||t.isSingle())return this.selectNode(e);var n=t.children();return n.length&gt;0?this.setStartBefore(n[0]).setEndAfter(n[n.length-1]):this.setStart(e,0).setEnd(e,0)},collapse:function(e){return e?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(e,t){var n=this.get(),r=t.get();if(!_IERANGE)return n.compareBoundaryPoints(e,r);var i={};i[_START_TO_START]=&quot;StartToStart&quot;,i[_START_TO_END]=&quot;EndToStart&quot;,i[_END_TO_END]=&quot;EndToEnd&quot;,i[_END_TO_START]=&quot;StartToEnd&quot;;var s=n.compareEndPoints(i[e],r);if(s!==0)return s;var o,u,a,f,l;if(e===_START_TO_START||e===_END_TO_START)o=this.startContainer,f=this.startOffset;if(e===_START_TO_END||e===_END_TO_END)o=this.endContainer,f=this.endOffset;if(e===_START_TO_START||e===_START_TO_END)u=t.startContainer,l=t.startOffset;if(e===_END_TO_END||e===_END_TO_START)u=t.endContainer,l=t.endOffset;if(o===u){var c=f-l;return c&gt;0?1:c&lt;0?-1:0}a=u;while(a&amp;&amp;a.parentNode!==o)a=a.parentNode;if(a)return K(a).index()&gt;=f?-1:1;a=o;while(a&amp;&amp;a.parentNode!==u)a=a.parentNode;if(a)return K(a).index()&gt;=l?1:-1;a=K(u).next();if(a&amp;&amp;a.contains(o))return 1;a=K(o).next();if(a&amp;&amp;a.contains(u))return-1},cloneRange:function(){return(new KRange(this.doc)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var e=this.get(),t=_IERANGE?e.text:e.toString();return t.replace(/\r\n|\n|\r/g,&quot;&quot;)},cloneContents:function(){return _copyAndDelete(this,!0,!1)},deleteContents:function(){return _copyAndDelete(this,!1,!0)},extractContents:function(){return _copyAndDelete(this,!0,!0)},insertNode:function(e){var t=this,n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o,u,a,f=1;return e.nodeName.toLowerCase()===&quot;#document-fragment&quot;&amp;&amp;(o=e.firstChild,u=e.lastChild,f=e.childNodes.length),n.nodeType==1?(a=n.childNodes[r],a?(n.insertBefore(e,a),n===i&amp;&amp;(s+=f)):n.appendChild(e)):n.nodeType==3&amp;&amp;(r===0?(n.parentNode.insertBefore(e,n),n.parentNode===i&amp;&amp;(s+=f)):r&gt;=n.nodeValue.length?n.nextSibling?n.parentNode.insertBefore(e,n.nextSibling):n.parentNode.appendChild(e):(r&gt;0?a=n.splitText(r):a=n,n.parentNode.insertBefore(e,a),n===i&amp;&amp;(i=a,s-=r))),o?t.setStartBefore(o).setEndAfter(u):t.selectNode(e),t.compareBoundaryPoints(_END_TO_END,t.cloneRange().setEnd(i,s))&gt;=1?t:t.setEnd(i,s)},surroundContents:function(e){return e.appendChild(this.extractContents()),this.insertNode(e).selectNode(e)},isControl:function(){var e=this,t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset,s;return t.nodeType==1&amp;&amp;t===r&amp;&amp;n+1===i&amp;&amp;K(t.childNodes[n]).isControl()},get:function(e){var t=this,n=t.doc,r,i;if(!_IERANGE){i=n.createRange();try{i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset)}catch(s){}return i}if(e&amp;&amp;t.isControl())return i=n.body.createControlRange(),i.addElement(t.startContainer.childNodes[t.startOffset]),i;var o=t.cloneRange().down();return i=n.body.createTextRange(),i.setEndPoint(&quot;StartToStart&quot;,_getEndRange(o.startContainer,o.startOffset)),i.setEndPoint(&quot;EndToStart&quot;,_getEndRange(o.endContainer,o.endOffset)),i},html:function(){return K(this.cloneContents()).outer()},down:function(){function t(t,n,r){if(t.nodeType!=1)return;var i=K(t).children();if(i.length===0)return;var s,o,u,a;n&gt;0&amp;&amp;(s=i.eq(n-1)),n&lt;i.length&amp;&amp;(o=i.eq(n)),s&amp;&amp;s.type==3&amp;&amp;(u=s[0],a=u.nodeValue.length),o&amp;&amp;o.type==3&amp;&amp;(u=o[0],a=0);if(!u)return;r?e.setStart(u,a):e.setEnd(u,a)}var e=this;return t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1),e},up:function(){function t(t,n,r){if(t.nodeType!=3)return;n===0?r?e.setStartBefore(t):e.setEndBefore(t):n==t.nodeValue.length&amp;&amp;(r?e.setStartAfter(t):e.setEndAfter(t))}var e=this;return t(e.startContainer,e.startOffset,!0),t(e.endContainer,e.endOffset,!1),e},enlarge:function(e){function n(n,r,i){var s=K(n),o;if(s.type==3||_NOSPLIT_TAG_MAP[s.name]||!e&amp;&amp;s.isBlock())return;if(r===0){while(!s.prev()){o=s.parent();if(!o||_NOSPLIT_TAG_MAP[o.name]||!e&amp;&amp;o.isBlock())break;s=o}i?t.setStartBefore(s[0]):t.setEndBefore(s[0])}else if(r==s.children().length){while(!s.next()){o=s.parent();if(!o||_NOSPLIT_TAG_MAP[o.name]||!e&amp;&amp;o.isBlock())break;s=o}i?t.setStartAfter(s[0]):t.setEndAfter(s[0])}}var t=this;return t.up(),n(t.startContainer,t.startOffset,!0),n(t.endContainer,t.endOffset,!1),t},shrink:function(){var e=this,t,n=e.collapsed;while(e.startContainer.nodeType==1&amp;&amp;(t=e.startContainer.childNodes[e.startOffset])&amp;&amp;t.nodeType==1&amp;&amp;!K(t).isSingle())e.setStart(t,0);if(n)return e.collapse(n);while(e.endContainer.nodeType==1&amp;&amp;e.endOffset&gt;0&amp;&amp;(t=e.endContainer.childNodes[e.endOffset-1])&amp;&amp;t.nodeType==1&amp;&amp;!K(t).isSingle())e.setEnd(t,t.childNodes.length);return e},createBookmark:function(e){var t=this,n=t.doc,r,i=K(&#x27;&lt;span style=&quot;display:none;&quot;&gt;&lt;/span&gt;&#x27;,n)[0];return i.id=&quot;__kindeditor_bookmark_start_&quot;+_BOOKMARK_ID++ +&quot;__&quot;,t.collapsed||(r=i.cloneNode(!0),r.id=&quot;__kindeditor_bookmark_end_&quot;+_BOOKMARK_ID++ +&quot;__&quot;),r&amp;&amp;t.cloneRange().collapse(!1).insertNode(r).setEndBefore(r),t.insertNode(i).setStartAfter(i),{start:e?&quot;#&quot;+i.id:i,end:r?e?&quot;#&quot;+r.id:r:null}},moveToBookmark:function(e){var t=this,n=t.doc,r=K(e.start,n),i=e.end?K(e.end,n):null;return!r||r.length&lt;1?t:(t.setStartBefore(r[0]),r.remove(),i&amp;&amp;i.length&gt;0?(t.setEndBefore(i[0]),i.remove()):t.collapse(!0),t)},dump:function(){console.log(&quot;--------------------&quot;),console.log(this.startContainer.nodeType==3?this.startContainer.nodeValue:this.startContainer,this.startOffset),console.log(this.endContainer.nodeType==3?this.endContainer.nodeValue:this.endContainer,this.endOffset)}}),K.RangeClass=KRange,K.range=_range,K.START_TO_START=_START_TO_START,K.START_TO_END=_START_TO_END,K.END_TO_END=_END_TO_END,K.END_TO_START=_END_TO_START,_extend(KCmd,{init:function(e){var t=this,n=e.doc;t.doc=n,t.win=_getWin(n),t.sel=_getSel(n),t.range=e},selection:function(e){var t=this,n=t.doc,r=_getRng(n);return t.sel=_getSel(n),r?(t.range=_range(r),K(t.range.startContainer).name==&quot;html&quot;&amp;&amp;t.range.selectNodeContents(n.body).collapse(!1),t):(e&amp;&amp;t.range.selectNodeContents(n.body).collapse(!1),t)},select:function(e){e=_undef(e,!0);var t=this,n=t.sel,r=t.range.cloneRange().shrink(),i=r.startContainer,s=r.startOffset,o=r.endContainer,u=r.endOffset,a=_getDoc(i),f=t.win,l,c=!1;if(e&amp;&amp;i.nodeType==1&amp;&amp;r.collapsed){if(_IERANGE){var h=K(&quot;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&quot;,a);r.insertNode(h[0]),l=a.body.createTextRange();try{l.moveToElementText(h[0])}catch(p){}return l.collapse(!1),l.select(),h.remove(),f.focus(),t}if(_WEBKIT){var d=i.childNodes;if(K(i).isInline()||s&gt;0&amp;&amp;K(d[s-1]).isInline()||d[s]&amp;&amp;K(d[s]).isInline())r.insertNode(a.createTextNode(&quot;​&quot;)),c=!0}}if(_IERANGE)try{l=r.get(!0),l.select()}catch(v){}else{c&amp;&amp;r.collapse(!1),l=r.get(!0),n.removeAllRanges(),n.addRange(l);if(a!==document){var m=K(l.endContainer).pos();f.scrollTo(m.x,m.y)}}return f.focus(),t},wrap:function(e){var t=this,n=t.doc,r=t.range,i;i=K(e,n);if(r.collapsed)return r.shrink(),r.insertNode(i[0]).selectNodeContents(i[0]),t;if(i.isBlock()){var s=i.clone(!0),o=s;while(o.first())o=o.first();return o.append(r.extractContents()),r.insertNode(s[0]).selectNode(s[0]),t}r.enlarge();var u=r.createBookmark(),a=r.commonAncestor(),f=!1;return K(a).scan(function(e){if(!f&amp;&amp;e==u.start){f=!0;return}if(f){if(e==u.end)return!1;var t=K(e);if(_inPreElement(t))return;if(t.type==3&amp;&amp;_trim(e.nodeValue).length&gt;0){var n;while((n=t.parent())&amp;&amp;n.isStyle()&amp;&amp;n.children().length==1)t=n;_wrapNode(t,i)}}}),r.moveToBookmark(u),t},split:function(e,t){var n=this.range,r=n.doc,i=n.cloneRange().collapse(e),s=i.startContainer,o=i.startOffset,u=s.nodeType==3?s.parentNode:s,a=!1,f;while(u&amp;&amp;u.parentNode){f=K(u);if(t){if(!f.isStyle())break;if(!_hasAttrOrCss(f,t))break}else if(_NOSPLIT_TAG_MAP[f.name])break;a=!0,u=u.parentNode}if(a){var l=r.createElement(&quot;span&quot;);n.cloneRange().collapse(!e).insertNode(l),e?i.setStartBefore(u.firstChild).setEnd(s,o):i.setStart(s,o).setEndAfter(u.lastChild);var c=i.extractContents(),h=c.firstChild,p=c.lastChild;e?(i.insertNode(c),n.setStartAfter(p).setEndBefore(l)):(u.appendChild(c),n.setStartBefore(l).setEndBefore(h));var d=l.parentNode;if(d==n.endContainer){var v=K(l).prev(),m=K(l).next();v&amp;&amp;m&amp;&amp;v.type==3&amp;&amp;m.type==3?n.setEnd(v[0],v[0].nodeValue.length):e||n.setEnd(n.endContainer,n.endOffset-1)}d.removeChild(l)}return this},remove:function(e){var t=this,n=t.doc,r=t.range;r.enlarge();if(r.startOffset===0){var i=K(r.startContainer),s;while((s=i.parent())&amp;&amp;s.isStyle()&amp;&amp;s.children().length==1)i=s;r.setStart(i[0],0),i=K(r.startContainer),i.isBlock()&amp;&amp;_removeAttrOrCss(i,e);var o=i.parent();o&amp;&amp;o.isBlock()&amp;&amp;_removeAttrOrCss(o,e)}var u,a;if(r.collapsed){t.split(!0,e),u=r.startContainer,a=r.startOffset;if(a&gt;0){var f=K(u.childNodes[a-1]);f&amp;&amp;_isEmptyNode(f)&amp;&amp;(f.remove(),r.setStart(u,a-1))}var l=K(u.childNodes[a]);return l&amp;&amp;_isEmptyNode(l)&amp;&amp;l.remove(),_isEmptyNode(u)&amp;&amp;(r.startBefore(u),u.remove()),r.collapse(!0),t}t.split(!0,e),t.split(!1,e);var c=n.createElement(&quot;span&quot;),h=n.createElement(&quot;span&quot;);r.cloneRange().collapse(!1).insertNode(h),r.cloneRange().collapse(!0).insertNode(c);var p=[],d=!1;K(r.commonAncestor()).scan(function(e){if(!d&amp;&amp;e==c){d=!0;return}if(e==h)return!1;d&amp;&amp;p.push(e)}),K(c).remove(),K(h).remove(),u=r.startContainer,a=r.startOffset;var v=r.endContainer,m=r.endOffset;if(a&gt;0){var g=K(u.childNodes[a-1]);g&amp;&amp;_isEmptyNode(g)&amp;&amp;(g.remove(),r.setStart(u,a-1),u==v&amp;&amp;r.setEnd(v,m-1));var y=K(u.childNodes[a]);y&amp;&amp;_isEmptyNode(y)&amp;&amp;(y.remove(),u==v&amp;&amp;r.setEnd(v,m-1))}var b=K(v.childNodes[r.endOffset]);b&amp;&amp;_isEmptyNode(b)&amp;&amp;b.remove();var w=r.createBookmark(!0);return _each(p,function(t,n){_removeAttrOrCss(K(n),e)}),r.moveToBookmark(w),t},commonNode:function(e){function s(t){var n=t,r=t;while(r){if(_hasAttrOrCss(K(r),e))return K(r);r=r.parentNode}while(n&amp;&amp;(n=n.lastChild))if(_hasAttrOrCss(K(n),e))return K(n);return null}var t=this.range,n=t.endContainer,r=t.endOffset,i=n.nodeType==3||r===0?n:n.childNodes[r-1],o=s(i);if(o)return o;if(i.nodeType==1||n.nodeType==3&amp;&amp;r===0){var u=K(i).prev();if(u)return s(u)}return null},commonAncestor:function(e){function a(t){while(t){if(t.nodeType==1&amp;&amp;t.tagName.toLowerCase()===e)return t;t=t.parentNode}return null}var t=this.range,n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=n.nodeType==3||r===0?n:n.childNodes[r-1],u=i.nodeType==3||s===0?i:i.childNodes[s-1],f=a(o),l=a(u);return f&amp;&amp;l&amp;&amp;f===l?K(f):null},state:function(e){var t=this,n=t.doc,r=!1;try{r=n.queryCommandState(e)}catch(i){}return r},val:function(e){function i(e){return e.toLowerCase()}var t=this,n=t.doc,r=t.range;e=i(e);var s=&quot;&quot;,o;return e===&quot;fontfamily&quot;||e===&quot;fontname&quot;?(s=_nativeCommandValue(n,&quot;fontname&quot;),s=s.replace(/[&#x27;&quot;]/g,&quot;&quot;),i(s)):e===&quot;formatblock&quot;?(s=_nativeCommandValue(n,e),s===&quot;&quot;&amp;&amp;(o=t.commonNode({&quot;h1,h2,h3,h4,h5,h6,p,div,pre,address&quot;:&quot;*&quot;}),o&amp;&amp;(s=o.name)),s===&quot;Normal&quot;&amp;&amp;(s=&quot;p&quot;),i(s)):e===&quot;fontsize&quot;?(o=t.commonNode({&quot;*&quot;:&quot;.font-size&quot;}),o&amp;&amp;(s=o.css(&quot;font-size&quot;)),i(s)):e===&quot;forecolor&quot;?(o=t.commonNode({&quot;*&quot;:&quot;.color&quot;}),o&amp;&amp;(s=o.css(&quot;color&quot;)),s=_toHex(s),s===&quot;&quot;&amp;&amp;(s=&quot;default&quot;),i(s)):e===&quot;hilitecolor&quot;?(o=t.commonNode({&quot;*&quot;:&quot;.background-color&quot;}),o&amp;&amp;(s=o.css(&quot;background-color&quot;)),s=_toHex(s),s===&quot;&quot;&amp;&amp;(s=&quot;default&quot;),i(s)):s},toggle:function(e,t){var n=this;return n.commonNode(t)?n.remove(t):n.wrap(e),n.select()},bold:function(){return this.toggle(&quot;&lt;strong&gt;&lt;/strong&gt;&quot;,{span:&quot;.font-weight=bold&quot;,strong:&quot;*&quot;,b:&quot;*&quot;})},italic:function(){return this.toggle(&quot;&lt;em&gt;&lt;/em&gt;&quot;,{span:&quot;.font-style=italic&quot;,em:&quot;*&quot;,i:&quot;*&quot;})},underline:function(){return this.toggle(&quot;&lt;u&gt;&lt;/u&gt;&quot;,{span:&quot;.text-decoration=underline&quot;,u:&quot;*&quot;})},strikethrough:function(){return this.toggle(&quot;&lt;s&gt;&lt;/s&gt;&quot;,{span:&quot;.text-decoration=line-through&quot;,s:&quot;*&quot;})},forecolor:function(e){return this.wrap(&#x27;&lt;span style=&quot;color:&#x27;+e+&#x27;;&quot;&gt;&lt;/span&gt;&#x27;).select()},hilitecolor:function(e){return this.wrap(&#x27;&lt;span style=&quot;background-color:&#x27;+e+&#x27;;&quot;&gt;&lt;/span&gt;&#x27;).select()},fontsize:function(e){return this.wrap(&#x27;&lt;span style=&quot;font-size:&#x27;+e+&#x27;;&quot;&gt;&lt;/span&gt;&#x27;).select()},fontname:function(e){return this.fontfamily(e)},fontfamily:function(e){return this.wrap(&#x27;&lt;span style=&quot;font-family:&#x27;+e+&#x27;;&quot;&gt;&lt;/span&gt;&#x27;).select()},removeformat:function(){var e={&quot;*&quot;:&quot;.font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent&quot;},t=_STYLE_TAG_MAP;return _each(t,function(t,n){e[t]=&quot;*&quot;}),this.remove(e),this.select()},inserthtml:function(e,t){function i(e,t){t=&#x27;&lt;img id=&quot;__kindeditor_temp_tag__&quot; width=&quot;0&quot; height=&quot;0&quot; style=&quot;display:none;&quot; /&gt;&#x27;+t;var r=e.get();r.item?r.item(0).outerHTML=t:r.pasteHTML(t);var i=e.doc.getElementById(&quot;__kindeditor_temp_tag__&quot;);i.parentNode.removeChild(i);var s=_toRange(r);e.setEnd(s.endContainer,s.endOffset),e.collapse(!1),n.select(!1)}function s(e,t){var r=e.doc,i=r.createDocumentFragment();K(&quot;@&quot;+t,r).each(function(){i.appendChild(this)}),e.deleteContents(),e.insertNode(i),e.collapse(!1),n.select(!1)}var n=this,r=n.range;if(e===&quot;&quot;)return n;if(_IERANGE&amp;&amp;t){try{i(r,e)}catch(o){s(r,e)}return n}return s(r,e),n},hr:function(){return this.inserthtml(&quot;&lt;hr /&gt;&quot;)},print:function(){return this.win.print(),this},insertimage:function(e,t,n,r,i,s){t=_undef(t,&quot;&quot;),i=_undef(i,0);var o=&#x27;&lt;img src=&quot;&#x27;+_escape(e)+&#x27;&quot; data-ke-src=&quot;&#x27;+_escape(e)+&#x27;&quot; &#x27;;return n&amp;&amp;(o+=&#x27;width=&quot;&#x27;+_escape(n)+&#x27;&quot; &#x27;),r&amp;&amp;(o+=&#x27;height=&quot;&#x27;+_escape(r)+&#x27;&quot; &#x27;),t&amp;&amp;(o+=&#x27;title=&quot;&#x27;+_escape(t)+&#x27;&quot; &#x27;),s&amp;&amp;(o+=&#x27;align=&quot;&#x27;+_escape(s)+&#x27;&quot; &#x27;),o+=&#x27;alt=&quot;&#x27;+_escape(t)+&#x27;&quot; &#x27;,o+=&quot;/&gt;&quot;,this.inserthtml(o)},createlink:function(e,t){function a(e,t,n){K(e).attr(&quot;href&quot;,t).attr(&quot;data-ke-src&quot;,t),n?K(e).attr(&quot;target&quot;,n):K(e).removeAttr(&quot;target&quot;)}var n=this,r=n.doc,i=n.range;n.select();var s=n.commonNode({a:&quot;*&quot;});s&amp;&amp;!i.isControl()&amp;&amp;(i.selectNode(s.get()),n.select());var o=&#x27;&lt;a href=&quot;&#x27;+_escape(e)+&#x27;&quot; data-ke-src=&quot;&#x27;+_escape(e)+&#x27;&quot; &#x27;;t&amp;&amp;(o+=&#x27; target=&quot;&#x27;+_escape(t)+&#x27;&quot;&#x27;);if(i.collapsed)return o+=&quot;&gt;&quot;+_escape(e)+&quot;&lt;/a&gt;&quot;,n.inserthtml(o);if(i.isControl()){var u=K(i.startContainer.childNodes[i.startOffset]);return o+=&quot;&gt;&lt;/a&gt;&quot;,u.after(K(o,r)),u.next().append(u),i.selectNode(u[0]),n.select()}var f=i.startContainer,l=i.startOffset,c=i.endContainer,h=i.endOffset;if(f.nodeType==1&amp;&amp;f===c&amp;&amp;l+1===h){var p=f.childNodes[l];if(p.nodeName.toLowerCase()==&quot;a&quot;)return a(p,e,t),n}return _nativeCommand(r,&quot;createlink&quot;,&quot;__kindeditor_temp_url__&quot;),K(&#x27;a[href=&quot;__kindeditor_temp_url__&quot;]&#x27;,r).each(function(){a(this,e,t)}),n},unlink:function(){var e=this,t=e.doc,n=e.range;e.select();if(n.collapsed){var r=e.commonNode({a:&quot;*&quot;});r&amp;&amp;(n.selectNode(r.get()),e.select()),_nativeCommand(t,&quot;unlink&quot;,null);if(_WEBKIT&amp;&amp;K(n.startContainer).name===&quot;img&quot;){var i=K(n.startContainer).parent();i.name===&quot;a&quot;&amp;&amp;i.remove(!0)}}else _nativeCommand(t,&quot;unlink&quot;,null);return e}}),_each(&quot;formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript&quot;.split(&quot;,&quot;),function(e,t){KCmd.prototype[t]=function(e){var n=this;return n.select(),_nativeCommand(n.doc,t,e),_IERANGE&amp;&amp;_inArray(t,&quot;justifyleft,justifycenter,justifyright,justifyfull&quot;.split(&quot;,&quot;))&gt;=0&amp;&amp;n.selection(),(!_IERANGE||_inArray(t,&quot;formatblock,selectall,insertorderedlist,insertunorderedlist&quot;.split(&quot;,&quot;))&gt;=0)&amp;&amp;n.selection(),n}}),_each(&quot;cut,copy,paste&quot;.split(&quot;,&quot;),function(e,t){KCmd.prototype[t]=function(){var e=this;if(!e.doc.queryCommandSupported(t))throw&quot;not supported&quot;;return e.select(),_nativeCommand(e.doc,t,null),e}}),K.CmdClass=KCmd,K.cmd=_cmd,_extend(KWidget,{init:function(e){var t=this;t.name=e.name||&quot;&quot;,t.doc=e.doc||document,t.win=_getWin(t.doc),t.x=_addUnit(e.x),t.y=_addUnit(e.y),t.z=e.z,t.width=_addUnit(e.width),t.height=_addUnit(e.height),t.div=K(&#x27;&lt;div style=&quot;display:block;&quot;&gt;&lt;/div&gt;&#x27;),t.options=e,t._alignEl=e.alignEl,t.width&amp;&amp;t.div.css(&quot;width&quot;,t.width),t.height&amp;&amp;t.div.css(&quot;height&quot;,t.height),t.z&amp;&amp;t.div.css({position:&quot;absolute&quot;,left:t.x,top:t.y,&quot;z-index&quot;:t.z}),t.z&amp;&amp;(t.x===undefined||t.y===undefined)&amp;&amp;t.autoPos(t.width,t.height),e.cls&amp;&amp;t.div.addClass(e.cls),e.shadowMode&amp;&amp;t.div.addClass(&quot;ke-shadow&quot;),e.css&amp;&amp;t.div.css(e.css),e.src?K(e.src).replaceWith(t.div):K(t.doc.body).append(t.div),e.html&amp;&amp;t.div.html(e.html);if(e.autoScroll)if(_IE&amp;&amp;_V&lt;7||_QUIRKS){var n=_getScrollPos();K(t.win).bind(&quot;scroll&quot;,function(e){var r=_getScrollPos(),i=r.x-n.x,s=r.y-n.y;t.pos(_removeUnit(t.x)+i,_removeUnit(t.y)+s,!1)})}else t.div.css(&quot;position&quot;,&quot;fixed&quot;)},pos:function(e,t,n){var r=this;return n=_undef(n,!0),e!==null&amp;&amp;(e=e&lt;0?0:_addUnit(e),r.div.css(&quot;left&quot;,e),n&amp;&amp;(r.x=e)),t!==null&amp;&amp;(t=t&lt;0?0:_addUnit(t),r.div.css(&quot;top&quot;,t),n&amp;&amp;(r.y=t)),r},autoPos:function(e,t){var n=this,r=_removeUnit(e)||0,i=_removeUnit(t)||0,s=_getScrollPos();if(n._alignEl){var o=K(n._alignEl),u=o.pos(),a=_round(o[0].clientWidth/2-r/2),f=_round(o[0].clientHeight/2-i/2);x=a&lt;0?u.x:u.x+a,y=f&lt;0?u.y:u.y+f}else{var l=_docElement(n.doc);x=_round(s.x+(l.clientWidth-r)/2),y=_round(s.y+(l.clientHeight-i)/2)}return _IE&amp;&amp;_V&lt;7||_QUIRKS||(x-=s.x,y-=s.y),n.pos(x,y)},remove:function(){var e=this;return(_IE&amp;&amp;_V&lt;7||_QUIRKS)&amp;&amp;K(e.win).unbind(&quot;scroll&quot;),e.div.remove(),_each(e,function(t){e[t]=null}),this},show:function(){return this.div.show(),this},hide:function(){return this.div.hide(),this},draggable:function(e){var t=this;return e=e||{},e.moveEl=t.div,e.moveFn=function(e,n,r,i,s,o){(e+=s)&lt;0&amp;&amp;(e=0),(n+=o)&lt;0&amp;&amp;(n=0),t.pos(e,n)},_drag(e),t}}),K.WidgetClass=KWidget,K.widget=_widget;var html,_direction=&quot;&quot;;if(html=document.getElementsByTagName(&quot;html&quot;))_direction=html[0].dir;_extend(KEdit,KWidget,{init:function(e){function f(){var u=_iframeDoc(t.iframe);u.open(),o&amp;&amp;(u.domain=document.domain),u.write(_getInitHtml(n,r,i,s)),u.close(),t.win=t.iframe[0].contentWindow,t.doc=u;var a=_cmd(u);t.afterChange(function(e){a.selection()}),_WEBKIT&amp;&amp;K(u).click(function(e){K(e.target).name===&quot;img&quot;&amp;&amp;(a.selection(!0),a.range.selectNode(e.target),a.select())}),_IE&amp;&amp;(t._mousedownHandler=function(){var e=a.range.cloneRange();e.shrink(),e.isControl()&amp;&amp;t.blur()},K(document).mousedown(t._mousedownHandler),K(u).keydown(function(e){if(e.which==8){a.selection();var t=a.range;t.isControl()&amp;&amp;(t.collapse(!0),K(t.startContainer.childNodes[t.startOffset]).remove(),e.preventDefault())}})),t.cmd=a,t.html(_elementVal(t.srcElement)),_IE?(u.body.disabled=!0,u.body.contentEditable=!0,u.body.removeAttribute(&quot;disabled&quot;)):u.designMode=&quot;on&quot;,e.afterCreate&amp;&amp;e.afterCreate.call(t)}var t=this;KEdit.parent.init.call(t,e),t.srcElement=K(e.srcElement),t.div.addClass(&quot;ke-edit&quot;),t.designMode=_undef(e.designMode,!0),t.beforeGetHtml=e.beforeGetHtml,t.beforeSetHtml=e.beforeSetHtml,t.afterSetHtml=e.afterSetHtml;var n=_undef(e.themesPath,&quot;&quot;),r=e.bodyClass,i=e.cssPath,s=e.cssData,o=location.protocol!=&quot;res:&quot;&amp;&amp;location.host.replace(/:\d+/,&quot;&quot;)!==document.domain,u=&quot;document.open();&quot;+(o?&#x27;document.domain=&quot;&#x27;+document.domain+&#x27;&quot;;&#x27;:&quot;&quot;)+&quot;document.close();&quot;,a=_IE?&#x27; src=&quot;javascript:void(function(){&#x27;+encodeURIComponent(u)+&#x27;}())&quot;&#x27;:&quot;&quot;;t.iframe=K(&#x27;&lt;iframe class=&quot;ke-edit-iframe&quot; hidefocus=&quot;true&quot; frameborder=&quot;0&quot;&#x27;+a+&quot;&gt;&lt;/iframe&gt;&quot;).css(&quot;width&quot;,&quot;100%&quot;),t.textarea=K(&#x27;&lt;textarea class=&quot;ke-edit-textarea&quot; hidefocus=&quot;true&quot;&gt;&lt;/textarea&gt;&#x27;).css(&quot;width&quot;,&quot;100%&quot;),t.tabIndex=isNaN(parseInt(e.tabIndex,10))?t.srcElement.attr(&quot;tabindex&quot;):parseInt(e.tabIndex,10),t.iframe.attr(&quot;tabindex&quot;,t.tabIndex),t.textarea.attr(&quot;tabindex&quot;,t.tabIndex),t.width&amp;&amp;t.setWidth(t.width),t.height&amp;&amp;t.setHeight(t.height),t.designMode?t.textarea.hide():t.iframe.hide(),o&amp;&amp;t.iframe.bind(&quot;load&quot;,function(e){t.iframe.unbind(&quot;load&quot;),_IE?f():setTimeout(f,0)}),t.div.append(t.iframe),t.div.append(t.textarea),t.srcElement.hide(),!o&amp;&amp;f()},setWidth:function(e){var t=this;return e=_addUnit(e),t.width=e,t.div.css(&quot;width&quot;,e),t},setHeight:function(e){var t=this;e=_addUnit(e),t.height=e,t.div.css(&quot;height&quot;,e),t.iframe.css(&quot;height&quot;,e);if(_IE&amp;&amp;_V&lt;8||_QUIRKS)e=_addUnit(_removeUnit(e)-2);return t.textarea.css(&quot;height&quot;,e),t},remove:function(){var e=this,t=e.doc;K(t.body).unbind(),K(t).unbind(),K(e.win).unbind(),e._mousedownHandler&amp;&amp;K(document).unbind(&quot;mousedown&quot;,e._mousedownHandler),_elementVal(e.srcElement,e.html()),e.srcElement.show(),e.iframe.unbind(),e.textarea.unbind(),KEdit.parent.remove.call(e)},html:function(e,t){var n=this,r=n.doc;if(n.designMode){var i=r.body;return e===undefined?(t?e=&quot;&lt;!doctype html&gt;&lt;html&gt;&quot;+i.parentNode.innerHTML+&quot;&lt;/html&gt;&quot;:e=i.innerHTML,n.beforeGetHtml&amp;&amp;(e=n.beforeGetHtml(e)),_GECKO&amp;&amp;e==&quot;&lt;br /&gt;&quot;&amp;&amp;(e=&quot;&quot;),e):(n.beforeSetHtml&amp;&amp;(e=n.beforeSetHtml(e)),_IE&amp;&amp;_V&gt;=9&amp;&amp;(e=e.replace(/(&lt;.*?checked=&quot;)checked(&quot;.*&gt;)/ig,&quot;$1$2&quot;)),K(i).html(e),n.afterSetHtml&amp;&amp;n.afterSetHtml(),n)}return e===undefined?n.textarea.val():(n.textarea.val(e),n)},design:function(e){var t=this,n;return(e===undefined?!t.designMode:e)?t.designMode||(n=t.html(),t.designMode=!0,t.html(n),t.textarea.hide(),t.iframe.show()):t.designMode&amp;&amp;(n=t.html(),t.designMode=!1,t.html(n),t.iframe.hide(),t.textarea.show()),t.focus()},focus:function(){var e=this;return e.designMode?e.win.focus():e.textarea[0].focus(),e},blur:function(){var e=this;if(_IE){var t=K(&#x27;&lt;input type=&quot;text&quot; style=&quot;float:left;width:0;height:0;padding:0;margin:0;border:0;&quot; value=&quot;&quot; /&gt;&#x27;,e.div);e.div.append(t),t[0].focus(),t.remove()}else e.designMode?e.win.blur():e.textarea[0].blur();return e},afterChange:function(e){function i(t){setTimeout(function(){e(t)},1)}var t=this,n=t.doc,r=n.body;return K(n).keyup(function(t){!t.ctrlKey&amp;&amp;!t.altKey&amp;&amp;_CHANGE_KEY_MAP[t.which]&amp;&amp;e(t)}),K(n).mouseup(e).contextmenu(e),K(t.win).blur(e),K(r).bind(&quot;paste&quot;,i),K(r).bind(&quot;cut&quot;,i),t}}),K.EditClass=KEdit,K.edit=_edit,K.iframeDoc=_iframeDoc,_extend(KToolbar,KWidget,{init:function(e){function n(e){var t=K(e);if(t.hasClass(&quot;ke-outline&quot;))return t;if(t.hasClass(&quot;ke-toolbar-icon&quot;))return t.parent()}function r(e,t){var r=n(e.target);if(r){if(r.hasClass(&quot;ke-disabled&quot;))return;if(r.hasClass(&quot;ke-selected&quot;))return;r[t](&quot;ke-on&quot;)}}var t=this;KToolbar.parent.init.call(t,e),t.disableMode=_undef(e.disableMode,!1),t.noDisableItemMap=_toMap(_undef(e.noDisableItems,[])),t._itemMap={},t.div.addClass(&quot;ke-toolbar&quot;).bind(&quot;contextmenu,mousedown,mousemove&quot;,function(e){e.preventDefault()}).attr(&quot;unselectable&quot;,&quot;on&quot;),t.div.mouseover(function(e){r(e,&quot;addClass&quot;)}).mouseout(function(e){r(e,&quot;removeClass&quot;)}).click(function(e){var r=n(e.target);if(r){if(r.hasClass(&quot;ke-disabled&quot;))return;t.options.click.call(this,e,r.attr(&quot;data-name&quot;))}})},get:function(e){return this._itemMap[e]?this._itemMap[e]:this._itemMap[e]=K(&quot;span.ke-icon-&quot;+e,this.div).parent()},select:function(e){return _selectToolbar.call(this,e,function(e){e.addClass(&quot;ke-selected&quot;)}),self},unselect:function(e){return _selectToolbar.call(this,e,function(e){e.removeClass(&quot;ke-selected&quot;).removeClass(&quot;ke-on&quot;)}),self},enable:function(e){var t=this,n=e.get?e:t.get(e);return n&amp;&amp;(n.removeClass(&quot;ke-disabled&quot;),n.opacity(1)),t},disable:function(e){var t=this,n=e.get?e:t.get(e);return n&amp;&amp;(n.removeClass(&quot;ke-selected&quot;).addClass(&quot;ke-disabled&quot;),n.opacity(.5)),t},disableAll:function(e,t){var n=this,r=n.noDisableItemMap,i;return t&amp;&amp;(r=_toMap(t)),(e===undefined?!n.disableMode:e)?(K(&quot;span.ke-outline&quot;,n.div).each(function(){var e=K(this),t=e[0].getAttribute(&quot;data-name&quot;,2);r[t]||n.disable(e)}),n.disableMode=!0):(K(&quot;span.ke-outline&quot;,n.div).each(function(){var e=K(this),t=e[0].getAttribute(&quot;data-name&quot;,2);r[t]||n.enable(e)}),n.disableMode=!1),n}}),K.ToolbarClass=KToolbar,K.toolbar=_toolbar,_extend(KMenu,KWidget,{init:function(e){var t=this;e.z=e.z||811213,KMenu.parent.init.call(t,e),t.centerLineMode=_undef(e.centerLineMode,!0),t.div.addClass(&quot;ke-menu&quot;).bind(&quot;click,mousedown&quot;,function(e){e.stopPropagation()}).attr(&quot;unselectable&quot;,&quot;on&quot;)},addItem:function(e){var t=this;if(e.title===&quot;-&quot;){t.div.append(K(&#x27;&lt;div class=&quot;ke-menu-separator&quot;&gt;&lt;/div&gt;&#x27;));return}var n=K(&#x27;&lt;div class=&quot;ke-menu-item&quot; unselectable=&quot;on&quot;&gt;&lt;/div&gt;&#x27;),r=K(&#x27;&lt;div class=&quot;ke-inline-block ke-menu-item-left&quot;&gt;&lt;/div&gt;&#x27;),i=K(&#x27;&lt;div class=&quot;ke-inline-block ke-menu-item-right&quot;&gt;&lt;/div&gt;&#x27;),s=_addUnit(e.height),o=_undef(e.iconClass,&quot;&quot;);t.div.append(n),s&amp;&amp;(n.css(&quot;height&quot;,s),i.css(&quot;line-height&quot;,s));var u;return t.centerLineMode&amp;&amp;(u=K(&#x27;&lt;div class=&quot;ke-inline-block ke-menu-item-center&quot;&gt;&lt;/div&gt;&#x27;),s&amp;&amp;u.css(&quot;height&quot;,s)),n.mouseover(function(e){K(this).addClass(&quot;ke-menu-item-on&quot;),u&amp;&amp;u.addClass(&quot;ke-menu-item-center-on&quot;)}).mouseout(function(e){K(this).removeClass(&quot;ke-menu-item-on&quot;),u&amp;&amp;u.removeClass(&quot;ke-menu-item-center-on&quot;)}).click(function(t){e.click.call(K(this)),t.stopPropagation()}).append(r),u&amp;&amp;n.append(u),n.append(i),e.checked&amp;&amp;(o=&quot;ke-icon-checked&quot;),o!==&quot;&quot;&amp;&amp;r.html(&#x27;&lt;span class=&quot;ke-inline-block ke-toolbar-icon ke-toolbar-icon-url &#x27;+o+&#x27;&quot;&gt;&lt;/span&gt;&#x27;),i.html(e.title),t},remove:function(){var e=this;return e.options.beforeRemove&amp;&amp;e.options.beforeRemove.call(e),K(&quot;.ke-menu-item&quot;,e.div[0]).unbind(),KMenu.parent.remove.call(e),e}}),K.MenuClass=KMenu,K.menu=_menu,_extend(KColorPicker,KWidget,{init:function(e){var t=this;e.z=e.z||811213,KColorPicker.parent.init.call(t,e);var n=e.colors||[[&quot;#E53333&quot;,&quot;#E56600&quot;,&quot;#FF9900&quot;,&quot;#64451D&quot;,&quot;#DFC5A4&quot;,&quot;#FFE500&quot;],[&quot;#009900&quot;,&quot;#006600&quot;,&quot;#99BB00&quot;,&quot;#B8D100&quot;,&quot;#60D978&quot;,&quot;#00D5FF&quot;],[&quot;#337FE5&quot;,&quot;#003399&quot;,&quot;#4C33E5&quot;,&quot;#9933E5&quot;,&quot;#CC33E5&quot;,&quot;#EE33EE&quot;],[&quot;#FFFFFF&quot;,&quot;#CCCCCC&quot;,&quot;#999999&quot;,&quot;#666666&quot;,&quot;#333333&quot;,&quot;#000000&quot;]];t.selectedColor=(e.selectedColor||&quot;&quot;).toLowerCase(),t._cells=[],t.div.addClass(&quot;ke-colorpicker&quot;).bind(&quot;click,mousedown&quot;,function(e){e.stopPropagation()}).attr(&quot;unselectable&quot;,&quot;on&quot;);var r=t.doc.createElement(&quot;table&quot;);t.div.append(r),r.className=&quot;ke-colorpicker-table&quot;,r.cellPadding=0,r.cellSpacing=0,r.border=0;var i=r.insertRow(0),s=i.insertCell(0);s.colSpan=n[0].length,t._addAttr(s,&quot;&quot;,&quot;ke-colorpicker-cell-top&quot;);for(var o=0;o&lt;n.length;o++){i=r.insertRow(o+1);for(var u=0;u&lt;n[o].length;u++)s=i.insertCell(u),t._addAttr(s,n[o][u],&quot;ke-colorpicker-cell&quot;)}},_addAttr:function(e,t,n){var r=this;e=K(e).addClass(n),r.selectedColor===t.toLowerCase()&amp;&amp;e.addClass(&quot;ke-colorpicker-cell-selected&quot;),e.attr(&quot;title&quot;,t||r.options.noColor),e.mouseover(function(e){K(this).addClass(&quot;ke-colorpicker-cell-on&quot;)}),e.mouseout(function(e){K(this).removeClass(&quot;ke-colorpicker-cell-on&quot;)}),e.click(function(e){e.stop(),r.options.click.call(K(this),t)}),t?e.append(K(&#x27;&lt;div class=&quot;ke-colorpicker-cell-color&quot; unselectable=&quot;on&quot;&gt;&lt;/div&gt;&#x27;).css(&quot;background-color&quot;,t)):e.html(r.options.noColor),K(e).attr(&quot;unselectable&quot;,&quot;on&quot;),r._cells.push(e)},remove:function(){var e=this;return _each(e._cells,function(){this.unbind()}),KColorPicker.parent.remove.call(e),e}}),K.ColorPickerClass=KColorPicker,K.colorpicker=_colorpicker,_extend(KUploadButton,{init:function(e){var t=this,n=K(e.button),r=e.fieldName||&quot;file&quot;,i=e.url||&quot;&quot;,s=n.val(),o=e.extraParams||{},u=n[0].className||&quot;&quot;,a=e.target||&quot;kindeditor_upload_iframe_&quot;+(new Date).getTime();e.afterError=e.afterError||function(e){alert(e)};var f=[];for(var l in o)f.push(&#x27;&lt;input type=&quot;hidden&quot; name=&quot;&#x27;+l+&#x27;&quot; value=&quot;&#x27;+o[l]+&#x27;&quot; /&gt;&#x27;);var c=[&#x27;&lt;div class=&quot;ke-inline-block &#x27;+u+&#x27;&quot;&gt;&#x27;,e.target?&quot;&quot;:&#x27;&lt;iframe name=&quot;&#x27;+a+&#x27;&quot; style=&quot;display:none;&quot;&gt;&lt;/iframe&gt;&#x27;,e.form?&#x27;&lt;div class=&quot;ke-upload-area&quot;&gt;&#x27;:&#x27;&lt;form class=&quot;ke-upload-area ke-form&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; target=&quot;&#x27;+a+&#x27;&quot; action=&quot;&#x27;+i+&#x27;&quot;&gt;&#x27;,&#x27;&lt;span class=&quot;ke-button-common&quot;&gt;&#x27;,f.join(&quot;&quot;),&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-button-common ke-button&quot; value=&quot;&#x27;+s+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&#x27;&lt;input type=&quot;file&quot; class=&quot;ke-upload-file&quot; name=&quot;&#x27;+r+&#x27;&quot; tabindex=&quot;-1&quot; /&gt;&#x27;,e.form?&quot;&lt;/div&gt;&quot;:&quot;&lt;/form&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),h=K(c,n.doc);n.hide(),n.before(h),t.div=h,t.button=n,t.iframe=e.target?K(&#x27;iframe[name=&quot;&#x27;+a+&#x27;&quot;]&#x27;):K(&quot;iframe&quot;,h),t.form=e.form?K(e.form):K(&quot;form&quot;,h),t.fileBox=K(&quot;.ke-upload-file&quot;,h);var p=e.width||K(&quot;.ke-button-common&quot;,h).width();K(&quot;.ke-upload-area&quot;,h).width(p),t.options=e},submit:function(){var e=this,t=e.iframe;return t.bind(&quot;load&quot;,function(){t.unbind();var n=document.createElement(&quot;form&quot;);e.fileBox.before(n),K(n).append(e.fileBox),n.reset(),K(n).remove(!0);var r=K.iframeDoc(t),i=r.getElementsByTagName(&quot;pre&quot;)[0],s=&quot;&quot;,o;i?s=i.innerHTML:s=r.body.innerHTML,s=_unescape(s),t[0].src=&quot;javascript:false&quot;;try{o=K.json(s)}catch(u){e.options.afterError.call(e,&quot;&lt;!doctype html&gt;&lt;html&gt;&quot;+r.body.parentNode.innerHTML+&quot;&lt;/html&gt;&quot;)}o&amp;&amp;e.options.afterUpload.call(e,o)}),e.form[0].submit(),e},remove:function(){var e=this;return e.fileBox&amp;&amp;e.fileBox.unbind(),e.iframe.remove(),e.div.remove(),e.button.show(),e}}),K.UploadButtonClass=KUploadButton,K.uploadbutton=_uploadbutton,_extend(KDialog,KWidget,{init:function(e){var t=this,n=_undef(e.shadowMode,!0);e.z=e.z||811213,e.shadowMode=!1,e.autoScroll=_undef(e.autoScroll,!0),KDialog.parent.init.call(t,e);var r=e.title,i=K(e.body,t.doc),s=e.previewBtn,o=e.yesBtn,u=e.noBtn,a=e.closeBtn,f=_undef(e.showMask,!0);t.div.addClass(&quot;ke-dialog&quot;).bind(&quot;click,mousedown&quot;,function(e){e.stopPropagation()});var l=K(&#x27;&lt;div class=&quot;ke-dialog-content&quot;&gt;&lt;/div&gt;&#x27;).appendTo(t.div);_IE&amp;&amp;_V&lt;7?t.iframeMask=K(&#x27;&lt;iframe src=&quot;about:blank&quot; class=&quot;ke-dialog-shadow&quot;&gt;&lt;/iframe&gt;&#x27;).appendTo(t.div):n&amp;&amp;K(&#x27;&lt;div class=&quot;ke-dialog-shadow&quot;&gt;&lt;/div&gt;&#x27;).appendTo(t.div);var c=K(&#x27;&lt;div class=&quot;ke-dialog-header&quot;&gt;&lt;/div&gt;&#x27;);l.append(c),c.html(r),t.closeIcon=K(&#x27;&lt;span class=&quot;ke-dialog-icon-close&quot; title=&quot;&#x27;+a.name+&#x27;&quot;&gt;&lt;/span&gt;&#x27;).click(a.click),c.append(t.closeIcon),t.draggable({clickEl:c,beforeDrag:e.beforeDrag});var h=K(&#x27;&lt;div class=&quot;ke-dialog-body&quot;&gt;&lt;/div&gt;&#x27;);l.append(h),h.append(i);var p=K(&#x27;&lt;div class=&quot;ke-dialog-footer&quot;&gt;&lt;/div&gt;&#x27;);(s||o||u)&amp;&amp;l.append(p),_each([{btn:s,name:&quot;preview&quot;},{btn:o,name:&quot;yes&quot;},{btn:u,name:&quot;no&quot;}],function(){if(this.btn){var e=_createButton(this.btn);e.addClass(&quot;ke-dialog-&quot;+this.name),p.append(e)}}),t.height&amp;&amp;h.height(_removeUnit(t.height)-c.height()-p.height()),t.div.width(t.div.width()),t.div.height(t.div.height()),t.mask=null;if(f){var d=_docElement(t.doc),v=Math.max(d.scrollWidth,d.clientWidth),m=Math.max(d.scrollHeight,d.clientHeight);t.mask=_widget({x:0,y:0,z:t.z-1,cls:&quot;ke-dialog-mask&quot;,width:v,height:m})}t.autoPos(t.div.width(),t.div.height()),t.footerDiv=p,t.bodyDiv=h,t.headerDiv=c,t.isLoading=!1},setMaskIndex:function(e){var t=this;t.mask.div.css(&quot;z-index&quot;,e)},showLoading:function(e){e=_undef(e,&quot;&quot;);var t=this,n=t.bodyDiv;return t.loading=K(&#x27;&lt;div class=&quot;ke-dialog-loading&quot;&gt;&lt;div class=&quot;ke-inline-block ke-dialog-loading-content&quot; style=&quot;margin-top:&#x27;+Math.round(n.height()/3)+&#x27;px;&quot;&gt;&#x27;+e+&quot;&lt;/div&gt;&lt;/div&gt;&quot;).width(n.width()).height(n.height()).css(&quot;top&quot;,t.headerDiv.height()+&quot;px&quot;),n.css(&quot;visibility&quot;,&quot;hidden&quot;).after(t.loading),t.isLoading=!0,t},hideLoading:function(){return this.loading&amp;&amp;this.loading.remove(),this.bodyDiv.css(&quot;visibility&quot;,&quot;visible&quot;),this.isLoading=!1,this},remove:function(){var e=this;return e.options.beforeRemove&amp;&amp;e.options.beforeRemove.call(e),e.mask&amp;&amp;e.mask.remove(),e.iframeMask&amp;&amp;e.iframeMask.remove(),e.closeIcon.unbind(),K(&quot;input&quot;,e.div).unbind(),K(&quot;button&quot;,e.div).unbind(),e.footerDiv.unbind(),e.bodyDiv.unbind(),e.headerDiv.unbind(),K(&quot;iframe&quot;,e.div).each(function(){K(this).remove()}),KDialog.parent.remove.call(e),e}}),K.DialogClass=KDialog,K.dialog=_dialog,K.tabs=_tabs,K.loadScript=_loadScript,K.loadStyle=_loadStyle,K.ajax=_ajax;var _plugins={},_language={};KEditor.prototype={lang:function(e){return _lang(e,this.langType)},loadPlugin:function(e,t){var n=this;return _plugins[e]?_isFunction(_plugins[e])?(_plugins[e].call(n,KindEditor),t&amp;&amp;t.call(n),n):(setTimeout(function(){n.loadPlugin(e,t)},100),n):(_plugins[e]=&quot;loading&quot;,_loadScript(n.pluginsPath+e+&quot;/&quot;+e+&quot;.js?ver=&quot;+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){setTimeout(function(){_plugins[e]&amp;&amp;n.loadPlugin(e,t)},0)}),n)},handler:function(e,t){var n=this;return n._handlers[e]||(n._handlers[e]=[]),_isFunction(t)?(n._handlers[e].push(t),n):(_each(n._handlers[e],function(){t=this.call(n,t)}),t)},clickToolbar:function(e,t){var n=this,r=&quot;clickToolbar&quot;+e;return t===undefined?n._handlers[r]?n.handler(r):(n.loadPlugin(e,function(){n.handler(r)}),n):n.handler(r,t)},updateState:function(){var e=this;return _each(&quot;justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough&quot;.split(&quot;,&quot;),function(t,n){e.cmd.state(n)?e.toolbar.select(n):e.toolbar.unselect(n)}),e},addContextmenu:function(e){return this._contextmenus.push(e),this},afterCreate:function(e){return this.handler(&quot;afterCreate&quot;,e)},beforeRemove:function(e){return this.handler(&quot;beforeRemove&quot;,e)},beforeGetHtml:function(e){return this.handler(&quot;beforeGetHtml&quot;,e)},beforeSetHtml:function(e){return this.handler(&quot;beforeSetHtml&quot;,e)},afterSetHtml:function(e){return this.handler(&quot;afterSetHtml&quot;,e)},create:function(){function h(){if(u.height()===0){setTimeout(h,100);return}e.resize(n,r,!1)}var e=this,t=e.fullscreenMode;if(e.isCreated)return e;if(e.srcElement.data(&quot;kindeditor&quot;))return e;e.srcElement.data(&quot;kindeditor&quot;,&quot;true&quot;),t?_docElement().style.overflow=&quot;hidden&quot;:_docElement().style.overflow=&quot;&quot;;var n=t?_docElement().clientWidth+&quot;px&quot;:e.width,r=t?_docElement().clientHeight+&quot;px&quot;:e.height;if(_IE&amp;&amp;_V&lt;8||_QUIRKS)r=_addUnit(_removeUnit(r)+2);var i=e.container=K(e.layout);t?K(document.body).append(i):e.srcElement.before(i);var s=K(&quot;.toolbar&quot;,i),o=K(&quot;.edit&quot;,i),u=e.statusbar=K(&quot;.statusbar&quot;,i);i.removeClass(&quot;container&quot;).addClass(&quot;ke-container ke-container-&quot;+e.themeType).css(&quot;width&quot;,n),t?(i.css({position:&quot;absolute&quot;,left:0,top:0,&quot;z-index&quot;:811211}),_GECKO||(e._scrollPos=_getScrollPos()),window.scrollTo(0,0),K(document.body).css({height:&quot;1px&quot;,overflow:&quot;hidden&quot;}),K(document.body.parentNode).css(&quot;overflow&quot;,&quot;hidden&quot;),e._fullscreenExecuted=!0):(e._fullscreenExecuted&amp;&amp;(K(document.body).css({height:&quot;&quot;,overflow:&quot;&quot;}),K(document.body.parentNode).css(&quot;overflow&quot;,&quot;&quot;)),e._scrollPos&amp;&amp;window.scrollTo(e._scrollPos.x,e._scrollPos.y));var a=[];K.each(e.items,function(t,n){n==&quot;|&quot;?a.push(&#x27;&lt;span class=&quot;ke-inline-block ke-separator&quot;&gt;&lt;/span&gt;&#x27;):n==&quot;/&quot;?a.push(&#x27;&lt;div class=&quot;ke-hr&quot;&gt;&lt;/div&gt;&#x27;):(a.push(&#x27;&lt;span class=&quot;ke-outline&quot; data-name=&quot;&#x27;+n+&#x27;&quot; title=&quot;&#x27;+e.lang(n)+&#x27;&quot; unselectable=&quot;on&quot;&gt;&#x27;),a.push(&#x27;&lt;span class=&quot;ke-toolbar-icon ke-toolbar-icon-url ke-icon-&#x27;+n+&#x27;&quot; unselectable=&quot;on&quot;&gt;&lt;/span&gt;&lt;/span&gt;&#x27;))});var f=e.toolbar=_toolbar({src:s,html:a.join(&quot;&quot;),noDisableItems:e.noDisableItems,click:function(t,n){t.stop();if(e.menu){var r=e.menu.name;e.hideMenu();if(r===n)return}e.clickToolbar(n)}}),l=_removeUnit(r)-f.div.height(),c=e.edit=_edit({height:l&gt;0&amp;&amp;_removeUnit(r)&gt;e.minHeight?l:e.minHeight,src:o,srcElement:e.srcElement,designMode:e.designMode,themesPath:e.themesPath,bodyClass:e.bodyClass,cssPath:e.cssPath,cssData:e.cssData,beforeGetHtml:function(t){return t=e.beforeGetHtml(t),t=_removeBookmarkTag(_removeTempTag(t)),_formatHtml(t,e.filterMode?e.htmlTags:null,e.urlType,e.wellFormatMode,e.indentChar)},beforeSetHtml:function(t){return t=_formatHtml(t,e.filterMode?e.htmlTags:null,&quot;&quot;,!1),e.beforeSetHtml(t)},afterSetHtml:function(){e.edit=c=this,e.afterSetHtml()},afterCreate:function(){e.edit=c=this,e.cmd=c.cmd,e._docMousedownFn=function(t){e.menu&amp;&amp;e.hideMenu()},K(c.doc,document).mousedown(e._docMousedownFn),_bindContextmenuEvent.call(e),_bindNewlineEvent.call(e),_bindTabEvent.call(e),_bindFocusEvent.call(e),c.afterChange(function(t){if(!c.designMode)return;e.updateState(),e.addBookmark(),e.options.afterChange&amp;&amp;e.options.afterChange.call(e)}),c.textarea.keyup(function(t){!t.ctrlKey&amp;&amp;!t.altKey&amp;&amp;_INPUT_KEY_MAP[t.which]&amp;&amp;e.options.afterChange&amp;&amp;e.options.afterChange.call(e)}),e.readonlyMode&amp;&amp;e.readonly(),e.isCreated=!0,e.initContent===&quot;&quot;&amp;&amp;(e.initContent=e.html());if(e._undoStack.length&gt;0){var t=e._undoStack.pop();t.start&amp;&amp;(e.html(t.html),c.cmd.range.moveToBookmark(t),e.select())}e.afterCreate(),e.options.afterCreate&amp;&amp;e.options.afterCreate.call(e)}});return u.removeClass(&quot;statusbar&quot;).addClass(&quot;ke-statusbar&quot;).append(&#x27;&lt;span class=&quot;ke-inline-block ke-statusbar-center-icon&quot;&gt;&lt;/span&gt;&#x27;).append(&#x27;&lt;span class=&quot;ke-inline-block ke-statusbar-right-icon&quot;&gt;&lt;/span&gt;&#x27;),e._fullscreenResizeHandler&amp;&amp;(K(window).unbind(&quot;resize&quot;,e._fullscreenResizeHandler),e._fullscreenResizeHandler=null),h(),t?(e._fullscreenResizeHandler=function(t){e.isCreated&amp;&amp;e.resize(_docElement().clientWidth,_docElement().clientHeight,!1)},K(window).bind(&quot;resize&quot;,e._fullscreenResizeHandler),f.select(&quot;fullscreen&quot;),u.first().css(&quot;visibility&quot;,&quot;hidden&quot;),u.last().css(&quot;visibility&quot;,&quot;hidden&quot;)):(_GECKO&amp;&amp;K(window).bind(&quot;scroll&quot;,function(t){e._scrollPos=_getScrollPos()}),e.resizeType&gt;0?_drag({moveEl:i,clickEl:u,moveFn:function(t,n,r,i,s,o){i+=o,e.resize(null,i)}}):u.first().css(&quot;visibility&quot;,&quot;hidden&quot;),e.resizeType===2?_drag({moveEl:i,clickEl:u.last(),moveFn:function(t,n,r,i,s,o){r+=s,i+=o,e.resize(r,i)}}):u.last().css(&quot;visibility&quot;,&quot;hidden&quot;)),e},remove:function(){var e=this;return e.isCreated?(e.beforeRemove(),e.srcElement.data(&quot;kindeditor&quot;,&quot;&quot;),e.menu&amp;&amp;e.hideMenu(),_each(e.dialogs,function(){e.hideDialog()}),K(document).unbind(&quot;mousedown&quot;,e._docMousedownFn),e.toolbar.remove(),e.edit.remove(),e.statusbar.last().unbind(),e.statusbar.unbind(),e.container.remove(),e.container=e.toolbar=e.edit=e.menu=null,e.dialogs=[],e.isCreated=!1,e):e},resize:function(e,t,n){var r=this;return n=_undef(n,!0),e&amp;&amp;(/%/.test(e)||(e=_removeUnit(e),e=e&lt;r.minWidth?r.minWidth:e),r.container.css(&quot;width&quot;,_addUnit(e)),n&amp;&amp;(r.width=_addUnit(e))),t&amp;&amp;(t=_removeUnit(t),editHeight=_removeUnit(t)-r.toolbar.div.height()-r.statusbar.height(),editHeight=editHeight&lt;r.minHeight?r.minHeight:editHeight,r.edit.setHeight(editHeight),n&amp;&amp;(r.height=_addUnit(t))),r},select:function(){return this.isCreated&amp;&amp;this.cmd.select(),this},html:function(e){var t=this;return e===undefined?t.isCreated?t.edit.html():_elementVal(t.srcElement):(t.isCreated?t.edit.html(e):_elementVal(t.srcElement,e),t.isCreated&amp;&amp;t.cmd.selection(),t)},fullHtml:function(){return this.isCreated?this.edit.html(undefined,!0):&quot;&quot;},text:function(e){var t=this;return e===undefined?_trim(t.html().replace(/&lt;(?!img|embed).*?&gt;/ig,&quot;&quot;).replace(/&amp;nbsp;/ig,&quot; &quot;)):t.html(_escape(e))},isEmpty:function(){return _trim(this.text().replace(/\r\n|\n|\r/,&quot;&quot;))===&quot;&quot;},isDirty:function(){return _trim(this.initContent.replace(/\r\n|\n|\r|t/g,&quot;&quot;))!==_trim(this.html().replace(/\r\n|\n|\r|t/g,&quot;&quot;))},selectedHtml:function(){var e=this.isCreated?this.cmd.range.html():&quot;&quot;;return e=_removeBookmarkTag(_removeTempTag(e)),e},count:function(e){var t=this;return e=(e||&quot;html&quot;).toLowerCase(),e===&quot;html&quot;?t.html().length:e===&quot;text&quot;?t.text().replace(/&lt;(?:img|embed).*?&gt;/ig,&quot;K&quot;).replace(/\r\n|\n|\r/g,&quot;&quot;).length:0},exec:function(e){e=e.toLowerCase();var t=this,n=t.cmd,r=_inArray(e,&quot;selectall,copy,paste,print&quot;.split(&quot;,&quot;))&lt;0;return r&amp;&amp;t.addBookmark(!1),n[e].apply(n,_toArray(arguments,1)),r&amp;&amp;(t.updateState(),t.addBookmark(!1),t.options.afterChange&amp;&amp;t.options.afterChange.call(t)),t},insertHtml:function(e,t){return this.isCreated?(e=this.beforeSetHtml(e),this.exec(&quot;inserthtml&quot;,e,t),this):this},appendHtml:function(e){this.html(this.html()+e);if(this.isCreated){var t=this.cmd;t.range.selectNodeContents(t.doc.body).collapse(!1),t.select()}return this},sync:function(){return _elementVal(this.srcElement,this.html()),this},focus:function(){return this.isCreated?this.edit.focus():this.srcElement[0].focus(),this},blur:function(){return this.isCreated?this.edit.blur():this.srcElement[0].blur(),this},addBookmark:function(e){e=_undef(e,!0);var t=this,n=t.edit,r=n.doc.body,i=_removeTempTag(r.innerHTML),s;if(e&amp;&amp;t._undoStack.length&gt;0){var o=t._undoStack[t._undoStack.length-1];if(Math.abs(i.length-_removeBookmarkTag(o.html).length)&lt;t.minChangeSize)return t}if(n.designMode&amp;&amp;!t._firstAddBookmark){var u=t.cmd.range;s=u.createBookmark(!0),s.html=_removeTempTag(r.innerHTML),u.moveToBookmark(s)}else s={html:i};return t._firstAddBookmark=!1,_addBookmarkToStack(t._undoStack,s),t},undo:function(){return _undoToRedo.call(this,this._undoStack,this._redoStack)},redo:function(){return _undoToRedo.call(this,this._redoStack,this._undoStack)},fullscreen:function(e){return this.fullscreenMode=e===undefined?!this.fullscreenMode:e,this.addBookmark(!1),this.remove().create()},readonly:function(e){e=_undef(e,!0);var t=this,n=t.edit,r=n.doc;t.designMode?t.toolbar.disableAll(e,[]):_each(t.noDisableItems,function(){t.toolbar[e?&quot;disable&quot;:&quot;enable&quot;](this)}),_IE?r.body.contentEditable=!e:r.designMode=e?&quot;off&quot;:&quot;on&quot;,n.textarea[0].disabled=e},createMenu:function(e){var t=this,n=e.name,r=t.toolbar.get(n),i=r.pos();return e.x=i.x,e.y=i.y+r.height(),e.z=t.options.zIndex,e.shadowMode=_undef(e.shadowMode,t.shadowMode),e.selectedColor!==undefined?(e.cls=&quot;ke-colorpicker-&quot;+t.themeType,e.noColor=t.lang(&quot;noColor&quot;),t.menu=_colorpicker(e)):(e.cls=&quot;ke-menu-&quot;+t.themeType,e.centerLineMode=!1,t.menu=_menu(e)),t.menu},hideMenu:function(){return this.menu.remove(),this.menu=null,this},hideContextmenu:function(){return this.contextmenu.remove(),this.contextmenu=null,this},createDialog:function(e){var t=this,n=e.name;e.z=t.options.zIndex,e.shadowMode=_undef(e.shadowMode,t.shadowMode),e.closeBtn=_undef(e.closeBtn,{name:t.lang(&quot;close&quot;),click:function(e){t.hideDialog(),_IE&amp;&amp;t.cmd&amp;&amp;t.cmd.select()}}),e.noBtn=_undef(e.noBtn,{name:t.lang(e.yesBtn?&quot;no&quot;:&quot;close&quot;),click:function(e){t.hideDialog(),_IE&amp;&amp;t.cmd&amp;&amp;t.cmd.select()}}),t.dialogAlignType!=&quot;page&quot;&amp;&amp;(e.alignEl=t.container),e.cls=&quot;ke-dialog-&quot;+t.themeType;if(t.dialogs.length&gt;0){var r=t.dialogs[0],i=t.dialogs[t.dialogs.length-1];r.setMaskIndex(i.z+2),e.z=i.z+3,e.showMask=!1}var s=_dialog(e);return t.dialogs.push(s),s},hideDialog:function(){var e=this;e.dialogs.length&gt;0&amp;&amp;e.dialogs.pop().remove();if(e.dialogs.length&gt;0){var t=e.dialogs[0],n=e.dialogs[e.dialogs.length-1];t.setMaskIndex(n.z-1)}return e},errorDialog:function(e){var t=this,n=t.createDialog({width:750,title:t.lang(&quot;uploadError&quot;),body:&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&lt;iframe frameborder=&quot;0&quot; style=&quot;width:708px;height:400px;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&#x27;}),r=K(&quot;iframe&quot;,n.div),i=K.iframeDoc(r);return i.open(),i.write(e),i.close(),K(i.body).css(&quot;background-color&quot;,&quot;#FFF&quot;),r[0].contentWindow.focus(),t}},_instances=[],K.remove=function(e){_eachEditor(e,function(e){this.remove(),_instances.splice(e,1)})},K.sync=function(e){_eachEditor(e,function(){this.sync()})},K.html=function(e,t){_eachEditor(e,function(){this.html(t)})},K.insertHtml=function(e,t){_eachEditor(e,function(){this.insertHtml(t)})},K.appendHtml=function(e,t){_eachEditor(e,function(){this.appendHtml(t)})},_IE&amp;&amp;_V&lt;7&amp;&amp;_nativeCommand(document,&quot;BackgroundImageCache&quot;,!0),K.EditorClass=KEditor,K.editor=_editor,K.create=_create,K.instances=_instances,K.plugin=_plugin,K.lang=_lang,_plugin(&quot;core&quot;,function(e){var t=this,n={undo:&quot;Z&quot;,redo:&quot;Y&quot;,bold:&quot;B&quot;,italic:&quot;I&quot;,underline:&quot;U&quot;,print:&quot;P&quot;,selectall:&quot;A&quot;};t.afterSetHtml(function(){t.options.afterChange&amp;&amp;t.options.afterChange.call(t)}),t.afterCreate(function(){if(t.syncType!=&quot;form&quot;)return;var n=e(t.srcElement),r=!1;while(n=n.parent())if(n.name==&quot;form&quot;){r=!0;break}if(r){n.bind(&quot;submit&quot;,function(n){t.sync(),e(window).bind(&quot;unload&quot;,function(){t.edit.textarea.remove()})});var i=e(&#x27;[type=&quot;reset&quot;]&#x27;,n);i.click(function(){t.html(t.initContent),t.cmd.selection()}),t.beforeRemove(function(){n.unbind(),i.unbind()})}}),t.clickToolbar(&quot;source&quot;,function(){t.edit.designMode?(t.toolbar.disableAll(!0),t.edit.design(!1),t.toolbar.select(&quot;source&quot;)):(t.toolbar.disableAll(!1),t.edit.design(!0),t.toolbar.unselect(&quot;source&quot;),_GECKO?setTimeout(function(){t.cmd.selection()},0):t.cmd.selection()),t.designMode=t.edit.designMode}),t.afterCreate(function(){t.designMode||t.toolbar.disableAll(!0).select(&quot;source&quot;)}),t.clickToolbar(&quot;fullscreen&quot;,function(){t.fullscreen()});if(t.fullscreenShortcut){var r=!1;t.afterCreate(function(){e(t.edit.doc,t.edit.textarea).keyup(function(e){e.which==27&amp;&amp;setTimeout(function(){t.fullscreen()},0)});if(r){if(_IE&amp;&amp;!t.designMode)return;t.focus()}r||(r=!0)})}_each(&quot;undo,redo&quot;.split(&quot;,&quot;),function(e,r){n[r]&amp;&amp;t.afterCreate(function(){_ctrl(this.edit.doc,n[r],function(){t.clickToolbar(r)})}),t.clickToolbar(r,function(){t[r]()})}),t.clickToolbar(&quot;formatblock&quot;,function(){var e=t.lang(&quot;formatblock.formatBlock&quot;),n={h1:28,h2:24,h3:18,H4:14,p:12},r=t.cmd.val(&quot;formatblock&quot;),i=t.createMenu({name:&quot;formatblock&quot;,width:t.langType==&quot;en&quot;?200:150});_each(e,function(e,s){var o=&quot;font-size:&quot;+n[e]+&quot;px;&quot;;e.charAt(0)===&quot;h&quot;&amp;&amp;(o+=&quot;font-weight:bold;&quot;),i.addItem({title:&#x27;&lt;span style=&quot;&#x27;+o+&#x27;&quot; unselectable=&quot;on&quot;&gt;&#x27;+s+&quot;&lt;/span&gt;&quot;,height:n[e]+12,checked:r===e||r===s,click:function(){t.select().exec(&quot;formatblock&quot;,&quot;&lt;&quot;+e+&quot;&gt;&quot;).hideMenu()}})})}),t.clickToolbar(&quot;fontname&quot;,function(){var e=t.cmd.val(&quot;fontname&quot;),n=t.createMenu({name:&quot;fontname&quot;,width:150});_each(t.lang(&quot;fontname.fontName&quot;),function(r,i){n.addItem({title:&#x27;&lt;span style=&quot;font-family: &#x27;+r+&#x27;;&quot; unselectable=&quot;on&quot;&gt;&#x27;+i+&quot;&lt;/span&gt;&quot;,checked:e===r.toLowerCase()||e===i.toLowerCase(),click:function(){t.exec(&quot;fontname&quot;,r).hideMenu()}})})}),t.clickToolbar(&quot;fontsize&quot;,function(){var e=t.cmd.val(&quot;fontsize&quot;),n=t.createMenu({name:&quot;fontsize&quot;,width:150});_each(t.fontSizeTable,function(r,i){n.addItem({title:&#x27;&lt;span style=&quot;font-size:&#x27;+i+&#x27;;&quot; unselectable=&quot;on&quot;&gt;&#x27;+i+&quot;&lt;/span&gt;&quot;,height:_removeUnit(i)+12,checked:e===i,click:function(){t.exec(&quot;fontsize&quot;,i).hideMenu()}})})}),_each(&quot;forecolor,hilitecolor&quot;.split(&quot;,&quot;),function(e,n){t.clickToolbar(n,function(){t.createMenu({name:n,selectedColor:t.cmd.val(n)||&quot;default&quot;,colors:t.colorTable,click:function(e){t.exec(n,e).hideMenu()}})})}),_each(&quot;cut,copy,paste&quot;.split(&quot;,&quot;),function(e,n){t.clickToolbar(n,function(){t.focus();try{t.exec(n,null)}catch(e){alert(t.lang(n+&quot;Error&quot;))}})}),t.clickToolbar(&quot;about&quot;,function(){var e=&#x27;&lt;div style=&quot;margin:20px;&quot;&gt;&lt;div&gt;KindEditor &#x27;+_VERSION+&quot;&lt;/div&gt;&quot;+&#x27;&lt;div&gt;Copyright &amp;copy; &lt;a href=&quot;http://www.kindsoft.net/&quot; target=&quot;_blank&quot;&gt;kindsoft.net&lt;/a&gt; All rights reserved.&lt;/div&gt;&#x27;+&quot;&lt;/div&gt;&quot;;t.createDialog({name:&quot;about&quot;,width:350,title:t.lang(&quot;about&quot;),body:e})}),t.plugin.getSelectedLink=function(){return t.cmd.commonAncestor(&quot;a&quot;)},t.plugin.getSelectedImage=function(){return _getImageFromRange(t.edit.cmd.range,function(e){return!/^ke-\w+$/i.test(e[0].className)})},t.plugin.getSelectedFlash=function(){return _getImageFromRange(t.edit.cmd.range,function(e){return e[0].className==&quot;ke-flash&quot;})},t.plugin.getSelectedMedia=function(){return _getImageFromRange(t.edit.cmd.range,function(e){return e[0].className==&quot;ke-media&quot;||e[0].className==&quot;ke-rm&quot;})},t.plugin.getSelectedAnchor=function(){return _getImageFromRange(t.edit.cmd.range,function(e){return e[0].className==&quot;ke-anchor&quot;})},_each(&quot;link,image,flash,media,anchor&quot;.split(&quot;,&quot;),function(e,n){var r=n.charAt(0).toUpperCase()+n.substr(1);_each(&quot;edit,delete&quot;.split(&quot;,&quot;),function(e,i){t.addContextmenu({title:t.lang(i+r),click:function(){t.loadPlugin(n,function(){t.plugin[n][i](),t.hideMenu()})},cond:t.plugin[&quot;getSelected&quot;+r],width:150,iconClass:i==&quot;edit&quot;?&quot;ke-icon-&quot;+n:undefined})}),t.addContextmenu({title:&quot;-&quot;})}),t.plugin.getSelectedTable=function(){return t.cmd.commonAncestor(&quot;table&quot;)},t.plugin.getSelectedRow=function(){return t.cmd.commonAncestor(&quot;tr&quot;)},t.plugin.getSelectedCell=function(){return t.cmd.commonAncestor(&quot;td&quot;)},_each(&quot;prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,rowsplit,colsplit,coldelete,rowdelete,insert,delete&quot;.split(&quot;,&quot;),function(e,n){var r=_inArray(n,[&quot;prop&quot;,&quot;delete&quot;])&lt;0?t.plugin.getSelectedCell:t.plugin.getSelectedTable;t.addContextmenu({title:t.lang(&quot;table&quot;+n),click:function(){t.loadPlugin(&quot;table&quot;,function(){t.plugin.table[n](),t.hideMenu()})},cond:r,width:170,iconClass:&quot;ke-icon-table&quot;+n})}),t.addContextmenu({title:&quot;-&quot;}),_each(&quot;selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink&quot;.split(&quot;,&quot;),function(e,r){n[r]&amp;&amp;t.afterCreate(function(){_ctrl(this.edit.doc,n[r],function(){t.cmd.selection(),t.clickToolbar(r)})}),t.clickToolbar(r,function(){t.focus().exec(r,null)})}),t.afterCreate(function(){function a(){r.range.moveToBookmark(i),r.select(),_WEBKIT&amp;&amp;(e(&quot;div.&quot;+o,s).each(function(){e(this).after(&quot;&lt;br /&gt;&quot;).remove(!0)}),e(&quot;span.Apple-style-span&quot;,s).remove(!0),e(&quot;span.Apple-tab-span&quot;,s).remove(!0),e(&quot;span[style]&quot;,s).each(function(){e(this).css(&quot;white-space&quot;)==&quot;nowrap&quot;&amp;&amp;e(this).remove(!0)}),e(&quot;meta&quot;,s).remove());var n=s[0].innerHTML;s.remove();if(n===&quot;&quot;)return;_WEBKIT&amp;&amp;(n=n.replace(/(&lt;br&gt;)\1/ig,&quot;$1&quot;)),t.pasteType===2&amp;&amp;(n=n.replace(/(&lt;(?:p|p\s[^&gt;]*)&gt;) *(&lt;\/p&gt;)/ig,&quot;&quot;),/schemas-microsoft-com|worddocument|mso-\w+/i.test(n)?n=_clearMsWord(n,t.filterMode?t.htmlTags:e.options.htmlTags):(n=_formatHtml(n,t.filterMode?t.htmlTags:null),n=t.beforeSetHtml(n))),t.pasteType===1&amp;&amp;(n=n.replace(/&amp;nbsp;/ig,&quot; &quot;),n=n.replace(/\n\s*\n/g,&quot;\n&quot;),n=n.replace(/&lt;br[^&gt;]*&gt;/ig,&quot;\n&quot;),n=n.replace(/&lt;\/p&gt;&lt;p[^&gt;]*&gt;/ig,&quot;\n&quot;),n=n.replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;),n=n.replace(/ {2}/g,&quot; &amp;nbsp;&quot;),t.newlineTag==&quot;p&quot;?/\n/.test(n)&amp;&amp;(n=n.replace(/^/,&quot;&lt;p&gt;&quot;).replace(/$/,&quot;&lt;br /&gt;&lt;/p&gt;&quot;).replace(/\n/g,&quot;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&quot;)):n=n.replace(/\n/g,&quot;&lt;br /&gt;$&amp;&quot;)),t.insertHtml(n,!0)}var n=t.edit.doc,r,i,s,o=&quot;__kindeditor_paste__&quot;,u=!1;e(n.body).bind(&quot;paste&quot;,function(f){if(t.pasteType===0){f.stop();return}if(u)return;u=!0,e(&quot;div.&quot;+o,n).remove(),r=t.cmd.selection(),i=r.range.createBookmark(),s=e(&#x27;&lt;div class=&quot;&#x27;+o+&#x27;&quot;&gt;&lt;/div&gt;&#x27;,n).css({position:&quot;absolute&quot;,width:&quot;1px&quot;,height:&quot;1px&quot;,overflow:&quot;hidden&quot;,left:&quot;-1981px&quot;,top:e(i.start).pos().y+&quot;px&quot;,&quot;white-space&quot;:&quot;nowrap&quot;}),e(n.body).append(s);if(_IE){var l=r.range.get(!0);l.moveToElementText(s[0]),l.select(),l.execCommand(&quot;paste&quot;),f.preventDefault()}else r.range.selectNodeContents(s[0]),r.select();setTimeout(function(){a(),u=!1},0)})}),t.beforeGetHtml(function(e){return _IE&amp;&amp;_V&lt;=8&amp;&amp;(e=e.replace(/&lt;div\s+[^&gt;]*data-ke-input-tag=&quot;([^&quot;]*)&quot;[^&gt;]*&gt;([\s\S]*?)&lt;\/div&gt;/ig,function(e,t){return unescape(t)}),e=e.replace(/(&lt;input)((?:\s+[^&gt;]*)?&gt;)/ig,function(e,t,n){return/\s+type=&quot;[^&quot;]+&quot;/i.test(e)?e:t+&#x27; type=&quot;text&quot;&#x27;+n})),e.replace(/(&lt;(?:noscript|noscript\s[^&gt;]*)&gt;)([\s\S]*?)(&lt;\/noscript&gt;)/ig,function(e,t,n,r){return t+_unescape(n).replace(/\s+/g,&quot; &quot;)+r}).replace(/&lt;img[^&gt;]*class=&quot;?ke-(flash|rm|media)&quot;?[^&gt;]*&gt;/ig,function(e){var t=_getAttrList(e),n=_getCssList(t.style||&quot;&quot;),r=_mediaAttrs(t[&quot;data-ke-tag&quot;]),i=_undef(n.width,&quot;&quot;),s=_undef(n.height,&quot;&quot;);return/px/i.test(i)&amp;&amp;(i=_removeUnit(i)),/px/i.test(s)&amp;&amp;(s=_removeUnit(s)),r.width=_undef(t.width,i),r.height=_undef(t.height,s),_mediaEmbed(r)}).replace(/&lt;img[^&gt;]*class=&quot;?ke-anchor&quot;?[^&gt;]*&gt;/ig,function(e){var t=_getAttrList(e);return&#x27;&lt;a name=&quot;&#x27;+unescape(t[&quot;data-ke-name&quot;])+&#x27;&quot;&gt;&lt;/a&gt;&#x27;}).replace(/&lt;div\s+[^&gt;]*data-ke-script-attr=&quot;([^&quot;]*)&quot;[^&gt;]*&gt;([\s\S]*?)&lt;\/div&gt;/ig,function(e,t,n){return&quot;&lt;script&quot;+unescape(t)+&quot;&gt;&quot;+unescape(n)+&quot;&lt;/script&gt;&quot;}).replace(/&lt;div\s+[^&gt;]*data-ke-noscript-attr=&quot;([^&quot;]*)&quot;[^&gt;]*&gt;([\s\S]*?)&lt;\/div&gt;/ig,function(e,t,n){return&quot;&lt;noscript&quot;+unescape(t)+&quot;&gt;&quot;+unescape(n)+&quot;&lt;/noscript&gt;&quot;}).replace(/(&lt;[^&gt;]*)data-ke-src=&quot;([^&quot;]*)&quot;([^&gt;]*&gt;)/ig,function(e,t,n,r){return e=e.replace(/(\s+(?:href|src)=&quot;)[^&quot;]*(&quot;)/i,function(e,t,r){return t+_unescape(n)+r}),e=e.replace(/\s+data-ke-src=&quot;[^&quot;]*&quot;/i,&quot;&quot;),e}).replace(/(&lt;[^&gt;]+\s)data-ke-(on\w+=&quot;[^&quot;]*&quot;[^&gt;]*&gt;)/ig,function(e,t,n){return t+n})}),t.beforeSetHtml(function(e){return _IE&amp;&amp;_V&lt;=8&amp;&amp;(e=e.replace(/&lt;input[^&gt;]*&gt;|&lt;(select|button)[^&gt;]*&gt;[\s\S]*?&lt;\/\1&gt;/ig,function(e){var t=_getAttrList(e),n=_getCssList(t.style||&quot;&quot;);return n.display==&quot;none&quot;?&#x27;&lt;div class=&quot;ke-display-none&quot; data-ke-input-tag=&quot;&#x27;+escape(e)+&#x27;&quot;&gt;&lt;/div&gt;&#x27;:e})),e.replace(/&lt;embed[^&gt;]*type=&quot;([^&quot;]+)&quot;[^&gt;]*&gt;(?:&lt;\/embed&gt;)?/ig,function(e){var n=_getAttrList(e);return n.src=_undef(n.src,&quot;&quot;),n.width=_undef(n.width,0),n.height=_undef(n.height,0),_mediaImg(t.themesPath+&quot;common/blank.gif&quot;,n)}).replace(/&lt;a[^&gt;]*name=&quot;([^&quot;]+)&quot;[^&gt;]*&gt;(?:&lt;\/a&gt;)?/ig,function(e){var n=_getAttrList(e);return n.href!==undefined?e:&#x27;&lt;img class=&quot;ke-anchor&quot; src=&quot;&#x27;+t.themesPath+&#x27;common/anchor.gif&quot; data-ke-name=&quot;&#x27;+escape(n.name)+&#x27;&quot; /&gt;&#x27;}).replace(/&lt;script([^&gt;]*)&gt;([\s\S]*?)&lt;\/script&gt;/ig,function(e,t,n){return&#x27;&lt;div class=&quot;ke-script&quot; data-ke-script-attr=&quot;&#x27;+escape(t)+&#x27;&quot;&gt;&#x27;+escape(n)+&quot;&lt;/div&gt;&quot;}).replace(/&lt;noscript([^&gt;]*)&gt;([\s\S]*?)&lt;\/noscript&gt;/ig,function(e,t,n){return&#x27;&lt;div class=&quot;ke-noscript&quot; data-ke-noscript-attr=&quot;&#x27;+escape(t)+&#x27;&quot;&gt;&#x27;+escape(n)+&quot;&lt;/div&gt;&quot;}).replace(/(&lt;[^&gt;]*)(href|src)=&quot;([^&quot;]*)&quot;([^&gt;]*&gt;)/ig,function(e,t,n,r,i){return e.match(/\sdata-ke-src=&quot;[^&quot;]*&quot;/i)?e:(e=t+n+&#x27;=&quot;&#x27;+r+&#x27;&quot;&#x27;+&#x27; data-ke-src=&quot;&#x27;+_escape(r)+&#x27;&quot;&#x27;+i,e)}).replace(/(&lt;[^&gt;]+\s)(on\w+=&quot;[^&quot;]*&quot;[^&gt;]*&gt;)/ig,function(e,t,n){return t+&quot;data-ke-&quot;+n}).replace(/&lt;table[^&gt;]*\s+border=&quot;0&quot;[^&gt;]*&gt;/ig,function(e){return e.indexOf(&quot;ke-zeroborder&quot;)&gt;=0?e:_addClassToTag(e,&quot;ke-zeroborder&quot;)})})})})(window),KindEditor.lang({source:&quot;Source&quot;,preview:&quot;Preview&quot;,undo:&quot;Undo(Ctrl+Z)&quot;,redo:&quot;Redo(Ctrl+Y)&quot;,cut:&quot;Cut(Ctrl+X)&quot;,copy:&quot;Copy(Ctrl+C)&quot;,paste:&quot;Paste(Ctrl+V)&quot;,plainpaste:&quot;Paste as plain text&quot;,wordpaste:&quot;Paste from Word&quot;,selectall:&quot;Select all&quot;,justifyleft:&quot;Align left&quot;,justifycenter:&quot;Align center&quot;,justifyright:&quot;Align right&quot;,justifyfull:&quot;Align full&quot;,insertorderedlist:&quot;Ordered list&quot;,insertunorderedlist:&quot;Unordered list&quot;,indent:&quot;Increase indent&quot;,outdent:&quot;Decrease indent&quot;,subscript:&quot;Subscript&quot;,superscript:&quot;Superscript&quot;,formatblock:&quot;Paragraph format&quot;,fontname:&quot;Font family&quot;,fontsize:&quot;Font size&quot;,forecolor:&quot;Text color&quot;,hilitecolor:&quot;Highlight color&quot;,bold:&quot;Bold(Ctrl+B)&quot;,italic:&quot;Italic(Ctrl+I)&quot;,underline:&quot;Underline(Ctrl+U)&quot;,strikethrough:&quot;Strikethrough&quot;,removeformat:&quot;Remove format&quot;,image:&quot;Image&quot;,multiimage:&quot;Multi image&quot;,flash:&quot;Flash&quot;,media:&quot;Embeded media&quot;,table:&quot;Table&quot;,tablecell:&quot;Cell&quot;,hr:&quot;Insert horizontal line&quot;,emoticons:&quot;Insert emoticon&quot;,link:&quot;Link&quot;,unlink:&quot;Unlink&quot;,fullscreen:&quot;Toggle fullscreen mode&quot;,about:&quot;About&quot;,print:&quot;Print&quot;,filemanager:&quot;File Manager&quot;,code:&quot;Insert code&quot;,map:&quot;Google Maps&quot;,baidumap:&quot;Baidu Maps&quot;,lineheight:&quot;Line height&quot;,clearhtml:&quot;Clear HTML code&quot;,pagebreak:&quot;Insert Page Break&quot;,quickformat:&quot;Quick Format&quot;,insertfile:&quot;Insert file&quot;,template:&quot;Insert Template&quot;,anchor:&quot;Anchor&quot;,yes:&quot;OK&quot;,no:&quot;Cancel&quot;,close:&quot;Close&quot;,editImage:&quot;Image properties&quot;,deleteImage:&quot;Delete image&quot;,editFlash:&quot;Flash properties&quot;,deleteFlash:&quot;Delete flash&quot;,editMedia:&quot;Media properties&quot;,deleteMedia:&quot;Delete media&quot;,editLink:&quot;Link properties&quot;,deleteLink:&quot;Unlink&quot;,tableprop:&quot;Table properties&quot;,tablecellprop:&quot;Cell properties&quot;,tableinsert:&quot;Insert table&quot;,tabledelete:&quot;Delete table&quot;,tablecolinsertleft:&quot;Insert column left&quot;,tablecolinsertright:&quot;Insert column right&quot;,tablerowinsertabove:&quot;Insert row above&quot;,tablerowinsertbelow:&quot;Insert row below&quot;,tablerowmerge:&quot;Merge down&quot;,tablecolmerge:&quot;Merge right&quot;,tablerowsplit:&quot;Split row&quot;,tablecolsplit:&quot;Split column&quot;,tablecoldelete:&quot;Delete column&quot;,tablerowdelete:&quot;Delete row&quot;,noColor:&quot;Default&quot;,pleaseSelectFile:&quot;Please select file.&quot;,invalidImg:&quot;Please type valid URL.\nAllowed file extension: jpg,gif,bmp,png&quot;,invalidMedia:&quot;Please type valid URL.\nAllowed file extension: swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb&quot;,invalidWidth:&quot;The width must be number.&quot;,invalidHeight:&quot;The height must be number.&quot;,invalidBorder:&quot;The border must be number.&quot;,invalidUrl:&quot;Please type valid URL.&quot;,invalidRows:&quot;Invalid rows.&quot;,invalidCols:&quot;Invalid columns.&quot;,invalidPadding:&quot;The padding must be number.&quot;,invalidSpacing:&quot;The spacing must be number.&quot;,invalidJson:&quot;Invalid JSON string.&quot;,uploadSuccess:&quot;Upload success.&quot;,cutError:&quot;Currently not supported by your browser, use keyboard shortcut(Ctrl+X) instead.&quot;,copyError:&quot;Currently not supported by your browser, use keyboard shortcut(Ctrl+C) instead.&quot;,pasteError:&quot;Currently not supported by your browser, use keyboard shortcut(Ctrl+V) instead.&quot;,ajaxLoading:&quot;Loading ...&quot;,uploadLoading:&quot;Uploading ...&quot;,uploadError:&quot;Upload Error&quot;,&quot;plainpaste.comment&quot;:&quot;Use keyboard shortcut(Ctrl+V) to paste the text into the window.&quot;,&quot;wordpaste.comment&quot;:&quot;Use keyboard shortcut(Ctrl+V) to paste the text into the window.&quot;,&quot;code.pleaseInput&quot;:&quot;Please input code.&quot;,&quot;link.url&quot;:&quot;URL&quot;,&quot;link.linkType&quot;:&quot;Target&quot;,&quot;link.newWindow&quot;:&quot;New window&quot;,&quot;link.selfWindow&quot;:&quot;Same window&quot;,&quot;flash.url&quot;:&quot;URL&quot;,&quot;flash.width&quot;:&quot;Width&quot;,&quot;flash.height&quot;:&quot;Height&quot;,&quot;flash.upload&quot;:&quot;Upload&quot;,&quot;flash.viewServer&quot;:&quot;Browse&quot;,&quot;media.url&quot;:&quot;URL&quot;,&quot;media.width&quot;:&quot;Width&quot;,&quot;media.height&quot;:&quot;Height&quot;,&quot;media.autostart&quot;:&quot;Auto start&quot;,&quot;media.upload&quot;:&quot;Upload&quot;,&quot;media.viewServer&quot;:&quot;Browse&quot;,&quot;image.remoteImage&quot;:&quot;Insert URL&quot;,&quot;image.localImage&quot;:&quot;Upload&quot;,&quot;image.remoteUrl&quot;:&quot;URL&quot;,&quot;image.localUrl&quot;:&quot;File&quot;,&quot;image.size&quot;:&quot;Size&quot;,&quot;image.width&quot;:&quot;Width&quot;,&quot;image.height&quot;:&quot;Height&quot;,&quot;image.resetSize&quot;:&quot;Reset dimensions&quot;,&quot;image.align&quot;:&quot;Align&quot;,&quot;image.defaultAlign&quot;:&quot;Default&quot;,&quot;image.leftAlign&quot;:&quot;Left&quot;,&quot;image.rightAlign&quot;:&quot;Right&quot;,&quot;image.imgTitle&quot;:&quot;Title&quot;,&quot;image.upload&quot;:&quot;Browse&quot;,&quot;image.viewServer&quot;:&quot;Browse&quot;,&quot;multiimage.uploadDesc&quot;:&quot;Allows users to upload &lt;%=uploadLimit%&gt; images, single image size not exceeding &lt;%=sizeLimit%&gt;&quot;,&quot;multiimage.startUpload&quot;:&quot;Start upload&quot;,&quot;multiimage.clearAll&quot;:&quot;Clear all&quot;,&quot;multiimage.insertAll&quot;:&quot;Insert all&quot;,&quot;multiimage.queueLimitExceeded&quot;:&quot;Queue limit exceeded.&quot;,&quot;multiimage.fileExceedsSizeLimit&quot;:&quot;File exceeds size limit.&quot;,&quot;multiimage.zeroByteFile&quot;:&quot;Zero byte file.&quot;,&quot;multiimage.invalidFiletype&quot;:&quot;Invalid file type.&quot;,&quot;multiimage.unknownError&quot;:&quot;Unknown upload error.&quot;,&quot;multiimage.pending&quot;:&quot;Pending ...&quot;,&quot;multiimage.uploadError&quot;:&quot;Upload error&quot;,&quot;filemanager.emptyFolder&quot;:&quot;Blank&quot;,&quot;filemanager.moveup&quot;:&quot;Parent folder&quot;,&quot;filemanager.viewType&quot;:&quot;Display: &quot;,&quot;filemanager.viewImage&quot;:&quot;Thumbnails&quot;,&quot;filemanager.listImage&quot;:&quot;List&quot;,&quot;filemanager.orderType&quot;:&quot;Sorting: &quot;,&quot;filemanager.fileName&quot;:&quot;By name&quot;,&quot;filemanager.fileSize&quot;:&quot;By size&quot;,&quot;filemanager.fileType&quot;:&quot;By type&quot;,&quot;insertfile.url&quot;:&quot;URL&quot;,&quot;insertfile.title&quot;:&quot;Title&quot;,&quot;insertfile.upload&quot;:&quot;Upload&quot;,&quot;insertfile.viewServer&quot;:&quot;Browse&quot;,&quot;table.cells&quot;:&quot;Cells&quot;,&quot;table.rows&quot;:&quot;Rows&quot;,&quot;table.cols&quot;:&quot;Columns&quot;,&quot;table.size&quot;:&quot;Dimensions&quot;,&quot;table.width&quot;:&quot;Width&quot;,&quot;table.height&quot;:&quot;Height&quot;,&quot;table.percent&quot;:&quot;%&quot;,&quot;table.px&quot;:&quot;px&quot;,&quot;table.space&quot;:&quot;Space&quot;,&quot;table.padding&quot;:&quot;Padding&quot;,&quot;table.spacing&quot;:&quot;Spacing&quot;,&quot;table.align&quot;:&quot;Align&quot;,&quot;table.textAlign&quot;:&quot;Horizontal&quot;,&quot;table.verticalAlign&quot;:&quot;Vertical&quot;,&quot;table.alignDefault&quot;:&quot;Default&quot;,&quot;table.alignLeft&quot;:&quot;Left&quot;,&quot;table.alignCenter&quot;:&quot;Center&quot;,&quot;table.alignRight&quot;:&quot;Right&quot;,&quot;table.alignTop&quot;:&quot;Top&quot;,&quot;table.alignMiddle&quot;:&quot;Middle&quot;,&quot;table.alignBottom&quot;:&quot;Bottom&quot;,&quot;table.alignBaseline&quot;:&quot;Baseline&quot;,&quot;table.border&quot;:&quot;Border&quot;,&quot;table.borderWidth&quot;:&quot;Width&quot;,&quot;table.borderColor&quot;:&quot;Color&quot;,&quot;table.backgroundColor&quot;:&quot;Background&quot;,&quot;map.address&quot;:&quot;Address: &quot;,&quot;map.search&quot;:&quot;Search&quot;,&quot;baidumap.address&quot;:&quot;Address: &quot;,&quot;baidumap.search&quot;:&quot;Search&quot;,&quot;baidumap.insertDynamicMap&quot;:&quot;Dynamic Map&quot;,&quot;anchor.name&quot;:&quot;Anchor name&quot;,&quot;formatblock.formatBlock&quot;:{h1:&quot;Heading 1&quot;,h2:&quot;Heading 2&quot;,h3:&quot;Heading 3&quot;,h4:&quot;Heading 4&quot;,p:&quot;Normal&quot;},&quot;fontname.fontName&quot;:{Arial:&quot;Arial&quot;,&quot;Arial Black&quot;:&quot;Arial Black&quot;,&quot;Comic Sans MS&quot;:&quot;Comic Sans MS&quot;,&quot;Courier New&quot;:&quot;Courier New&quot;,Garamond:&quot;Garamond&quot;,Georgia:&quot;Georgia&quot;,Tahoma:&quot;Tahoma&quot;,&quot;Times New Roman&quot;:&quot;Times New Roman&quot;,&quot;Trebuchet MS&quot;:&quot;Trebuchet MS&quot;,Verdana:&quot;Verdana&quot;},&quot;lineheight.lineHeight&quot;:[{1:&quot;Line height 1&quot;},{1.5:&quot;Line height 1.5&quot;},{2:&quot;Line height 2&quot;},{2.5:&quot;Line height 2.5&quot;},{3:&quot;Line height 3&quot;}],&quot;template.selectTemplate&quot;:&quot;Template&quot;,&quot;template.replaceContent&quot;:&quot;Replace current content&quot;,&quot;template.fileList&quot;:{&quot;1.html&quot;:&quot;Image and Text&quot;,&quot;2.html&quot;:&quot;Table&quot;,&quot;3.html&quot;:&quot;List&quot;}},&quot;en&quot;),KindEditor.each(KindEditor.options.items,function(e,t){t==&quot;baidumap&quot;&amp;&amp;(KindEditor.options.items[e]=&quot;map&quot;)}),KindEditor.options.langType=&quot;en&quot;,KindEditor.plugin(&quot;anchor&quot;,function(e){var t=this,n=&quot;anchor&quot;,r=t.lang(n+&quot;.&quot;);t.plugin.anchor={edit:function(){var i=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keName&quot;&gt;&#x27;+r.name+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input class=&quot;ke-input-text&quot; type=&quot;text&quot; id=&quot;keName&quot; name=&quot;name&quot; value=&quot;&quot; style=&quot;width:100px;&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),s=t.createDialog({name:n,width:300,title:t.lang(n),body:i,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(e){t.insertHtml(&#x27;&lt;a name=&quot;&#x27;+u.val()+&#x27;&quot;&gt;&#x27;).hideDialog().focus()}}}),o=s.div,u=e(&#x27;input[name=&quot;name&quot;]&#x27;,o),a=t.plugin.getSelectedAnchor();a&amp;&amp;u.val(unescape(a.attr(&quot;data-ke-name&quot;))),u[0].focus(),u[0].select()},&quot;delete&quot;:function(){t.plugin.getSelectedAnchor().remove()}},t.clickToolbar(n,t.plugin.anchor.edit)}),KindEditor.plugin(&quot;autoheight&quot;,function(e){function r(){var e=t.edit,n=e.doc.body;e.iframe[0].scroll=&quot;no&quot;,n.style.overflowY=&quot;hidden&quot;}function i(){var r=t.edit,i=r.doc.body;r.iframe.height(n),t.resize(null,Math.max((e.IE?i.scrollHeight:i.offsetHeight)+76,n))}function s(){n=e.removeUnit(t.height),t.edit.afterChange(i),r(),i()}var t=this;if(!t.autoHeightMode)return;var n;t.isCreated?s():t.afterCreate(s)}),KindEditor.plugin(&quot;baidumap&quot;,function(e){var t=this,n=&quot;baidumap&quot;,r=t.lang(n+&quot;.&quot;),i=e.undef(t.mapWidth,558),s=e.undef(t.mapHeight,360);t.clickToolbar(n,function(){function v(){h=d[0].contentWindow,p=e.iframeDoc(d)}var o=[&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-header&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-left&quot;&gt;&#x27;,r.address+&#x27; &lt;input id=&quot;kindeditor_plugin_map_address&quot; name=&quot;address&quot; class=&quot;ke-input-text&quot; value=&quot;&quot; style=&quot;width:200px;&quot; /&gt; &#x27;,&#x27;&lt;span class=&quot;ke-button-common ke-button-outer&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; name=&quot;searchBtn&quot; class=&quot;ke-button-common ke-button&quot; value=&quot;&#x27;+r.search+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-right&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;checkbox&quot; id=&quot;keInsertDynamicMap&quot; name=&quot;insertDynamicMap&quot; value=&quot;1&quot; /&gt; &lt;label for=&quot;keInsertDynamicMap&quot;&gt;&#x27;+r.insertDynamicMap+&quot;&lt;/label&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-clearfix&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-map&quot; style=&quot;width:&#x27;+i+&quot;px;height:&quot;+s+&#x27;px;&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),u=t.createDialog({name:n,width:i+42,title:t.lang(n),body:o,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(e){var n=h.map,r=n.getCenter(),o=r.lng+&quot;,&quot;+r.lat,u=n.getZoom(),a=[c[0].checked?t.pluginsPath+&quot;baidumap/index.html&quot;:&quot;http://api.map.baidu.com/staticimage&quot;,&quot;?center=&quot;+encodeURIComponent(o),&quot;&amp;zoom=&quot;+encodeURIComponent(u),&quot;&amp;width=&quot;+i,&quot;&amp;height=&quot;+s,&quot;&amp;markers=&quot;+encodeURIComponent(o),&quot;&amp;markerStyles=&quot;+encodeURIComponent(&quot;l,A&quot;)].join(&quot;&quot;);c[0].checked?t.insertHtml(&#x27;&lt;iframe src=&quot;&#x27;+a+&#x27;&quot; frameborder=&quot;0&quot; style=&quot;width:&#x27;+(i+2)+&quot;px;height:&quot;+(s+2)+&#x27;px;&quot;&gt;&lt;/iframe&gt;&#x27;):t.exec(&quot;insertimage&quot;,a),t.hideDialog().focus()}},beforeRemove:function(){l.remove(),p&amp;&amp;p.write(&quot;&quot;),d.remove()}}),a=u.div,f=e(&#x27;[name=&quot;address&quot;]&#x27;,a),l=e(&#x27;[name=&quot;searchBtn&quot;]&#x27;,a),c=e(&#x27;[name=&quot;insertDynamicMap&quot;]&#x27;,u.div),h,p,d=e(&#x27;&lt;iframe class=&quot;ke-textarea&quot; frameborder=&quot;0&quot; src=&quot;&#x27;+t.pluginsPath+&#x27;baidumap/map.html&quot; style=&quot;width:&#x27;+i+&quot;px;height:&quot;+s+&#x27;px;&quot;&gt;&lt;/iframe&gt;&#x27;);d.bind(&quot;load&quot;,function(){d.unbind(&quot;load&quot;),e.IE?v():setTimeout(v,0)}),e(&quot;.ke-map&quot;,a).replaceWith(d),l.click(function(){h.search(f.val())})})}),KindEditor.plugin(&quot;map&quot;,function(e){var t=this,n=&quot;map&quot;,r=t.lang(n+&quot;.&quot;);t.clickToolbar(n,function(){function p(){f=h[0].contentWindow,l=e.iframeDoc(h)}var i=[&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,r.address+&#x27; &lt;input id=&quot;kindeditor_plugin_map_address&quot; name=&quot;address&quot; class=&quot;ke-input-text&quot; value=&quot;&quot; style=&quot;width:200px;&quot; /&gt; &#x27;,&#x27;&lt;span class=&quot;ke-button-common ke-button-outer&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; name=&quot;searchBtn&quot; class=&quot;ke-button-common ke-button&quot; value=&quot;&#x27;+r.search+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-map&quot; style=&quot;width:558px;height:360px;&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),s=t.createDialog({name:n,width:600,title:t.lang(n),body:i,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(e){var n=f.geocoder,r=f.map,i=r.getCenter().lat()+&quot;,&quot;+r.getCenter().lng(),s=r.getZoom(),o=r.getMapTypeId(),u=&quot;http://maps.googleapis.com/maps/api/staticmap&quot;;u+=&quot;?center=&quot;+encodeURIComponent(i),u+=&quot;&amp;zoom=&quot;+encodeURIComponent(s),u+=&quot;&amp;size=558x360&quot;,u+=&quot;&amp;maptype=&quot;+encodeURIComponent(o),u+=&quot;&amp;markers=&quot;+encodeURIComponent(i),u+=&quot;&amp;language=&quot;+t.langType,u+=&quot;&amp;sensor=false&quot;,t.exec(&quot;insertimage&quot;,u).hideDialog().focus()}},beforeRemove:function(){a.remove(),l&amp;&amp;l.write(&quot;&quot;),h.remove()}}),o=s.div,u=e(&#x27;[name=&quot;address&quot;]&#x27;,o),a=e(&#x27;[name=&quot;searchBtn&quot;]&#x27;,o),f,l,c=[&quot;&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&quot;,&#x27;&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, user-scalable=no&quot; /&gt;&#x27;,&quot;&lt;style&gt;&quot;,&quot;	html { height: 100% }&quot;,&quot;	body { height: 100%; margin: 0; padding: 0; background-color: #FFF }&quot;,&quot;	#map_canvas { height: 100% }&quot;,&quot;&lt;/style&gt;&quot;,&#x27;&lt;script src=&quot;http://maps.googleapis.com/maps/api/js?sensor=false&amp;language=&#x27;+t.langType+&#x27;&quot;&gt;&lt;/script&gt;&#x27;,&quot;&lt;script&gt;&quot;,&quot;var map, geocoder;&quot;,&quot;function initialize() {&quot;,&quot;	var latlng = new google.maps.LatLng(31.230393, 121.473704);&quot;,&quot;	var options = {&quot;,&quot;		zoom: 11,&quot;,&quot;		center: latlng,&quot;,&quot;		disableDefaultUI: true,&quot;,&quot;		panControl: true,&quot;,&quot;		zoomControl: true,&quot;,&quot;		mapTypeControl: true,&quot;,&quot;		scaleControl: true,&quot;,&quot;		streetViewControl: false,&quot;,&quot;		overviewMapControl: true,&quot;,&quot;		mapTypeId: google.maps.MapTypeId.ROADMAP&quot;,&quot;	};&quot;,&#x27;	map = new google.maps.Map(document.getElementById(&quot;map_canvas&quot;), options);&#x27;,&quot;	geocoder = new google.maps.Geocoder();&quot;,&quot;	geocoder.geocode({latLng: latlng}, function(results, status) {&quot;,&quot;		if (status == google.maps.GeocoderStatus.OK) {&quot;,&quot;			if (results[3]) {&quot;,&#x27;				parent.document.getElementById(&quot;kindeditor_plugin_map_address&quot;).value = results[3].formatted_address;&#x27;,&quot;			}&quot;,&quot;		}&quot;,&quot;	});&quot;,&quot;}&quot;,&quot;function search(address) {&quot;,&quot;	if (!map) return;&quot;,&quot;	geocoder.geocode({address : address}, function(results, status) {&quot;,&quot;		if (status == google.maps.GeocoderStatus.OK) {&quot;,&quot;			map.setZoom(11);&quot;,&quot;			map.setCenter(results[0].geometry.location);&quot;,&quot;			var marker = new google.maps.Marker({&quot;,&quot;				map: map,&quot;,&quot;				position: results[0].geometry.location&quot;,&quot;			});&quot;,&quot;		} else {&quot;,&#x27;			alert(&quot;Invalid address: &quot; + address);&#x27;,&quot;		}&quot;,&quot;	});&quot;,&quot;}&quot;,&quot;&lt;/script&gt;&quot;,&quot;&lt;/head&gt;&quot;,&#x27;&lt;body onload=&quot;initialize();&quot;&gt;&#x27;,&#x27;&lt;div id=&quot;map_canvas&quot; style=&quot;width:100%; height:100%&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/body&gt;&lt;/html&gt;&quot;].join(&quot;\n&quot;),h=e(&#x27;&lt;iframe class=&quot;ke-textarea&quot; frameborder=&quot;0&quot; src=&quot;&#x27;+t.pluginsPath+&#x27;map/map.html&quot; style=&quot;width:558px;height:360px;&quot;&gt;&lt;/iframe&gt;&#x27;);h.bind(&quot;load&quot;,function(){h.unbind(&quot;load&quot;),e.IE?p():setTimeout(p,0)}),e(&quot;.ke-map&quot;,o).replaceWith(h),a.click(function(){f.search(u.val())})})}),KindEditor.plugin(&quot;clearhtml&quot;,function(e){var t=this,n=&quot;clearhtml&quot;;t.clickToolbar(n,function(){t.focus();var n=t.html();n=n.replace(/(&lt;script[^&gt;]*&gt;)([\s\S]*?)(&lt;\/script&gt;)/ig,&quot;&quot;),n=n.replace(/(&lt;style[^&gt;]*&gt;)([\s\S]*?)(&lt;\/style&gt;)/ig,&quot;&quot;),n=e.formatHtml(n,{a:[&quot;href&quot;,&quot;target&quot;],embed:[&quot;src&quot;,&quot;width&quot;,&quot;height&quot;,&quot;type&quot;,&quot;loop&quot;,&quot;autostart&quot;,&quot;quality&quot;,&quot;.width&quot;,&quot;.height&quot;,&quot;align&quot;,&quot;allowscriptaccess&quot;],img:[&quot;src&quot;,&quot;width&quot;,&quot;height&quot;,&quot;border&quot;,&quot;alt&quot;,&quot;title&quot;,&quot;.width&quot;,&quot;.height&quot;],table:[&quot;border&quot;],&quot;td,th&quot;:[&quot;rowspan&quot;,&quot;colspan&quot;],&quot;div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6&quot;:[]}),t.html(n),t.cmd.selection(!0),t.addBookmark()})}),KindEditor.plugin(&quot;code&quot;,function(e){var t=this,n=&quot;code&quot;;t.clickToolbar(n,function(){var r=t.lang(n+&quot;.&quot;),i=[&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;select class=&quot;ke-code-type&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;js&quot;&gt;JavaScript&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;html&quot;&gt;HTML&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;css&quot;&gt;CSS&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;php&quot;&gt;PHP&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;pl&quot;&gt;Perl&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;py&quot;&gt;Python&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;rb&quot;&gt;Ruby&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;java&quot;&gt;Java&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;vb&quot;&gt;ASP/VB&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;cpp&quot;&gt;C/C++&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;cs&quot;&gt;C#&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;xml&quot;&gt;XML&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;bsh&quot;&gt;Shell&lt;/option&gt;&#x27;,&#x27;&lt;option value=&quot;&quot;&gt;Other&lt;/option&gt;&#x27;,&quot;&lt;/select&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;textarea class=&quot;ke-textarea&quot; style=&quot;width:408px;height:260px;&quot;&gt;&lt;/textarea&gt;&#x27;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),s=t.createDialog({name:n,width:450,title:t.lang(n),body:i,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var i=e(&quot;.ke-code-type&quot;,s.div).val(),u=o.val(),a=i===&quot;&quot;?&quot;&quot;:&quot; lang-&quot;+i,f=&#x27;&lt;pre class=&quot;prettyprint&#x27;+a+&#x27;&quot;&gt;\n&#x27;+e.escape(u)+&quot;&lt;/pre&gt; &quot;;if(e.trim(u)===&quot;&quot;){alert(r.pleaseInput),o[0].focus();return}t.insertHtml(f).hideDialog().focus()}}}),o=e(&quot;textarea&quot;,s.div);o[0].focus()})}),KindEditor.plugin(&quot;emoticons&quot;,function(e){var t=this,n=&quot;emoticons&quot;,r=t.emoticonsPath||t.pluginsPath+&quot;emoticons/images/&quot;,i=t.allowPreviewEmoticons===undefined?!0:t.allowPreviewEmoticons,s=1;t.clickToolbar(n,function(){function y(n,i,s){m?n.mouseover(function(){i&gt;h?(m.css(&quot;left&quot;,0),m.css(&quot;right&quot;,&quot;&quot;)):(m.css(&quot;left&quot;,&quot;&quot;),m.css(&quot;right&quot;,0)),g.attr(&quot;src&quot;,r+s+&quot;.gif&quot;),e(this).addClass(&quot;ke-on&quot;)}):n.mouseover(function(){e(this).addClass(&quot;ke-on&quot;)}),n.mouseout(function(){e(this).removeClass(&quot;ke-on&quot;)}),n.click(function(e){t.insertHtml(&#x27;&lt;img src=&quot;&#x27;+r+s+&#x27;.gif&quot; border=&quot;0&quot; alt=&quot;&quot; /&gt;&#x27;).hideMenu().focus(),e.stop()})}function b(t,n){var i=document.createElement(&quot;table&quot;);n.append(i),m&amp;&amp;(e(i).mouseover(function(){m.show(&quot;block&quot;)}),e(i).mouseout(function(){m.hide()}),d.push(e(i))),i.className=&quot;ke-table&quot;,i.cellPadding=0,i.cellSpacing=0,i.border=0;var s=(t-1)*l+f;for(var a=0;a&lt;o;a++){var c=i.insertRow(a);for(var h=0;h&lt;u;h++){var p=e(c.insertCell(h));p.addClass(&quot;ke-cell&quot;),y(p,h,s);var v=e(&#x27;&lt;span class=&quot;ke-img&quot;&gt;&lt;/span&gt;&#x27;).css(&quot;background-position&quot;,&quot;-&quot;+24*s+&quot;px 0px&quot;).css(&quot;background-image&quot;,&quot;url(&quot;+r+&quot;static.gif)&quot;);p.append(v),d.push(p),s++}}return i}function E(){e.each(d,function(){this.unbind()})}function x(e,t){e.click(function(e){E(),w.parentNode.removeChild(w),S.remove(),w=b(t,p),T(t),s=t,e.stop()})}function T(t){S=e(&#x27;&lt;div class=&quot;ke-page&quot;&gt;&lt;/div&gt;&#x27;),p.append(S);for(var n=1;n&lt;=c;n++){if(t!==n){var r=e(&#x27;&lt;a href=&quot;javascript:;&quot;&gt;[&#x27;+n+&quot;]&lt;/a&gt;&quot;);x(r,n),S.append(r),d.push(r)}else S.append(e(&quot;@[&quot;+n+&quot;]&quot;));S.append(e(&quot;@&amp;nbsp;&quot;))}}var o=5,u=9,a=135,f=0,l=o*u,c=Math.ceil(a/l),h=Math.floor(u/2),p=e(&#x27;&lt;div class=&quot;ke-plugin-emoticons&quot;&gt;&lt;/div&gt;&#x27;),d=[],v=t.createMenu({name:n,beforeRemove:function(){E()}});v.div.append(p);var m,g;i&amp;&amp;(m=e(&#x27;&lt;div class=&quot;ke-preview&quot;&gt;&lt;/div&gt;&#x27;).css(&quot;right&quot;,0),g=e(&#x27;&lt;img class=&quot;ke-preview-img&quot; src=&quot;&#x27;+r+f+&#x27;.gif&quot; /&gt;&#x27;),p.append(m),m.append(g));var w=b(s,p),S;T(s)})}),KindEditor.plugin(&quot;filemanager&quot;,function(e){function o(e,t,n){return e+&quot; (&quot;+Math.ceil(t/1024)+&quot;KB, &quot;+n+&quot;)&quot;}function u(e,t){t.is_dir?e.attr(&quot;title&quot;,t.filename):e.attr(&quot;title&quot;,o(t.filename,t.filesize,t.datetime))}var t=this,n=&quot;filemanager&quot;,r=e.undef(t.fileManagerJson,t.basePath+&quot;php/file_manager_json.php&quot;),i=t.pluginsPath+n+&quot;/images/&quot;,s=t.lang(n+&quot;.&quot;);t.plugin.filemanagerDialog=function(o){function S(n,i,s){var o=&quot;path=&quot;+n+&quot;&amp;order=&quot;+i+&quot;&amp;dir=&quot;+l;d.showLoading(t.lang(&quot;ajaxLoading&quot;)),e.ajax(e.addParam(r,o+&quot;&amp;&quot;+(new Date).getTime()),function(e){d.hideLoading(),s(e)})}function T(t,n,r,i){var s=e.formatUrl(n.current_url+r.filename,&quot;absolute&quot;),o=encodeURIComponent(n.current_dir_path+r.filename+&quot;/&quot;);r.is_dir?t.click(function(e){S(o,E.val(),i)}):r.is_photo?t.click(function(e){h.call(this,s,r.filename)}):t.click(function(e){h.call(this,s,r.filename)}),x.push(t)}function N(t,n){function r(){w.val()==&quot;VIEW&quot;?S(t.current_dir_path,E.val(),k):S(t.current_dir_path,E.val(),C)}e.each(x,function(){this.unbind()}),y.unbind(),w.unbind(),E.unbind(),t.current_dir_path&amp;&amp;y.click(function(e){S(t.moveup_dir_path,E.val(),n)}),w.change(r),E.change(r),m.html(&quot;&quot;)}function C(t){N(t,C);var n=document.createElement(&quot;table&quot;);n.className=&quot;ke-table&quot;,n.cellPadding=0,n.cellSpacing=0,n.border=0,m.append(n);var r=t.file_list;for(var o=0,u=r.length;o&lt;u;o++){var a=r[o],f=e(n.insertRow(o));f.mouseover(function(t){e(this).addClass(&quot;ke-on&quot;)}).mouseout(function(t){e(this).removeClass(&quot;ke-on&quot;)});var l=i+(a.is_dir?&quot;folder-16.gif&quot;:&quot;file-16.gif&quot;),c=e(&#x27;&lt;img src=&quot;&#x27;+l+&#x27;&quot; width=&quot;16&quot; height=&quot;16&quot; alt=&quot;&#x27;+a.filename+&#x27;&quot; align=&quot;absmiddle&quot; /&gt;&#x27;),h=e(f[0].insertCell(0)).addClass(&quot;ke-cell ke-name&quot;).append(c).append(document.createTextNode(&quot; &quot;+a.filename));!a.is_dir||a.has_file?(f.css(&quot;cursor&quot;,&quot;pointer&quot;),h.attr(&quot;title&quot;,a.filename),T(h,t,a,C)):h.attr(&quot;title&quot;,s.emptyFolder),e(f[0].insertCell(1)).addClass(&quot;ke-cell ke-size&quot;).html(a.is_dir?&quot;-&quot;:Math.ceil(a.filesize/1024)+&quot;KB&quot;),e(f[0].insertCell(2)).addClass(&quot;ke-cell ke-datetime&quot;).html(a.datetime)}}function k(t){N(t,k);var n=t.file_list;for(var r=0,o=n.length;r&lt;o;r++){var a=n[r],f=e(&#x27;&lt;div class=&quot;ke-inline-block ke-item&quot;&gt;&lt;/div&gt;&#x27;);m.append(f);var l=e(&#x27;&lt;div class=&quot;ke-inline-block ke-photo&quot;&gt;&lt;/div&gt;&#x27;).mouseover(function(t){e(this).addClass(&quot;ke-on&quot;)}).mouseout(function(t){e(this).removeClass(&quot;ke-on&quot;)});f.append(l);var c=t.current_url+a.filename,h=a.is_dir?i+&quot;folder-64.gif&quot;:a.is_photo?c:i+&quot;file-64.gif&quot;,p=e(&#x27;&lt;img src=&quot;&#x27;+h+&#x27;&quot; width=&quot;80&quot; height=&quot;80&quot; alt=&quot;&#x27;+a.filename+&#x27;&quot; /&gt;&#x27;);!a.is_dir||a.has_file?(l.css(&quot;cursor&quot;,&quot;pointer&quot;),u(l,a),T(l,t,a,k)):l.attr(&quot;title&quot;,s.emptyFolder),l.append(p),f.append(&#x27;&lt;div class=&quot;ke-name&quot; title=&quot;&#x27;+a.filename+&#x27;&quot;&gt;&#x27;+a.filename+&quot;&lt;/div&gt;&quot;)}}var a=e.undef(o.width,650),f=e.undef(o.height,510),l=e.undef(o.dirName,&quot;&quot;),c=e.undef(o.viewType,&quot;VIEW&quot;).toUpperCase(),h=o.clickFn,p=[&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-plugin-filemanager-header&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-left&quot;&gt;&#x27;,&#x27;&lt;img class=&quot;ke-inline-block&quot; name=&quot;moveupImg&quot; src=&quot;&#x27;+i+&#x27;go-up.gif&quot; width=&quot;16&quot; height=&quot;16&quot; border=&quot;0&quot; alt=&quot;&quot; /&gt; &#x27;,&#x27;&lt;a class=&quot;ke-inline-block&quot; name=&quot;moveupLink&quot; href=&quot;javascript:;&quot;&gt;&#x27;+s.moveup+&quot;&lt;/a&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-right&quot;&gt;&#x27;,s.viewType+&#x27; &lt;select class=&quot;ke-inline-block&quot; name=&quot;viewType&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;VIEW&quot;&gt;&#x27;+s.viewImage+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;LIST&quot;&gt;&#x27;+s.listImage+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt; &quot;,s.orderType+&#x27; &lt;select class=&quot;ke-inline-block&quot; name=&quot;orderType&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;NAME&quot;&gt;&#x27;+s.fileName+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;SIZE&quot;&gt;&#x27;+s.fileSize+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;TYPE&quot;&gt;&#x27;+s.fileType+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-clearfix&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-plugin-filemanager-body&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),d=t.createDialog({name:n,width:a,height:f,title:t.lang(n),body:p}),v=d.div,m=e(&quot;.ke-plugin-filemanager-body&quot;,v),g=e(&#x27;[name=&quot;moveupImg&quot;]&#x27;,v),y=e(&#x27;[name=&quot;moveupLink&quot;]&#x27;,v),b=e(&#x27;[name=&quot;viewServer&quot;]&#x27;,v),w=e(&#x27;[name=&quot;viewType&quot;]&#x27;,v),E=e(&#x27;[name=&quot;orderType&quot;]&#x27;,v),x=[];return w.val(c),S(&quot;&quot;,E.val(),c==&quot;VIEW&quot;?k:C),d}}),KindEditor.plugin(&quot;flash&quot;,function(e){var t=this,n=&quot;flash&quot;,r=t.lang(n+&quot;.&quot;),i=e.undef(t.allowFlashUpload,!0),s=e.undef(t.allowFileManager,!1),o=e.undef(t.formatUploadUrl,!0),u=e.undef(t.extraFileUploadParams,{}),a=e.undef(t.filePostName,&quot;imgFile&quot;),f=e.undef(t.uploadJson,t.basePath+&quot;php/upload_json.php&quot;);t.plugin.flash={edit:function(){var l=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keUrl&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.url+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input class=&quot;ke-input-text&quot; type=&quot;text&quot; id=&quot;keUrl&quot; name=&quot;url&quot; value=&quot;&quot; style=&quot;width:160px;&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-upload-button&quot; value=&quot;&#x27;+r.upload+&#x27;&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;span class=&quot;ke-button-common ke-button-outer&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-button-common ke-button&quot; name=&quot;viewServer&quot; value=&quot;&#x27;+r.viewServer+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keWidth&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.width+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;keWidth&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;width&quot; value=&quot;550&quot; maxlength=&quot;4&quot; /&gt; &#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keHeight&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.height+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;keHeight&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;height&quot; value=&quot;400&quot; maxlength=&quot;4&quot; /&gt; &#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),c=t.createDialog({name:n,width:450,title:t.lang(n),body:l,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=e.trim(p.val()),i=v.val(),s=m.val();if(r==&quot;http://&quot;||e.invalidUrl(r)){alert(t.lang(&quot;invalidUrl&quot;)),p[0].focus();return}if(!/^\d*$/.test(i)){alert(t.lang(&quot;invalidWidth&quot;)),v[0].focus();return}if(!/^\d*$/.test(s)){alert(t.lang(&quot;invalidHeight&quot;)),m[0].focus();return}var o=e.mediaImg(t.themesPath+&quot;common/blank.gif&quot;,{src:r,type:e.mediaType(&quot;.swf&quot;),width:i,height:s,quality:&quot;high&quot;});t.insertHtml(o).hideDialog().focus()}}}),h=c.div,p=e(&#x27;[name=&quot;url&quot;]&#x27;,h),d=e(&#x27;[name=&quot;viewServer&quot;]&#x27;,h),v=e(&#x27;[name=&quot;width&quot;]&#x27;,h),m=e(&#x27;[name=&quot;height&quot;]&#x27;,h);p.val(&quot;http://&quot;);if(i){var g=e.uploadbutton({button:e(&quot;.ke-upload-button&quot;,h)[0],fieldName:a,extraParams:u,url:e.addParam(f,&quot;dir=flash&quot;),afterUpload:function(r){c.hideLoading();if(r.error===0){var i=r.url;o&amp;&amp;(i=e.formatUrl(i,&quot;absolute&quot;)),p.val(i),t.afterUpload&amp;&amp;t.afterUpload.call(t,i,r,n),alert(t.lang(&quot;uploadSuccess&quot;))}else alert(r.message)},afterError:function(e){c.hideLoading(),t.errorDialog(e)}});g.fileBox.change(function(e){c.showLoading(t.lang(&quot;uploadLoading&quot;)),g.submit()})}else e(&quot;.ke-upload-button&quot;,h).hide();s?d.click(function(n){t.loadPlugin(&quot;filemanager&quot;,function(){t.plugin.filemanagerDialog({viewType:&quot;LIST&quot;,dirName:&quot;flash&quot;,clickFn:function(n,r){t.dialogs.length&gt;1&amp;&amp;(e(&#x27;[name=&quot;url&quot;]&#x27;,h).val(n),t.afterSelectFile&amp;&amp;t.afterSelectFile.call(t,n),t.hideDialog())}})})}):d.hide();var y=t.plugin.getSelectedFlash();if(y){var b=e.mediaAttrs(y.attr(&quot;data-ke-tag&quot;));p.val(b.src),v.val(e.removeUnit(y.css(&quot;width&quot;))||b.width||0),m.val(e.removeUnit(y.css(&quot;height&quot;))||b.height||0)}p[0].focus(),p[0].select()},&quot;delete&quot;:function(){t.plugin.getSelectedFlash().remove(),t.addBookmark()}},t.clickToolbar(n,t.plugin.flash.edit)}),KindEditor.plugin(&quot;image&quot;,function(e){var t=this,n=&quot;image&quot;,r=e.undef(t.allowImageUpload,!0),i=e.undef(t.allowImageRemote,!0),s=e.undef(t.formatUploadUrl,!0),o=e.undef(t.allowFileManager,!1),u=e.undef(t.uploadJson,t.basePath+&quot;php/upload_json.php&quot;),a=e.undef(t.imageTabIndex,0),f=t.pluginsPath+&quot;image/images/&quot;,l=e.undef(t.extraFileUploadParams,{}),c=e.undef(t.filePostName,&quot;imgFile&quot;),h=e.undef(t.fillDescAfterUploadImage,!1),p=t.lang(n+&quot;.&quot;);t.plugin.imageDialog=function(r){function R(e,t){_.val(e),D.val(t),I=e,q=t}var i=r.imageUrl,a=e.undef(r.imageWidth,&quot;&quot;),d=e.undef(r.imageHeight,&quot;&quot;),v=e.undef(r.imageTitle,&quot;&quot;),m=e.undef(r.imageAlign,&quot;&quot;),g=e.undef(r.showRemote,!0),y=e.undef(r.showLocal,!0),b=e.undef(r.tabIndex,0),w=r.clickFn,E=&quot;kindeditor_upload_iframe_&quot;+(new Date).getTime(),S=[];for(var x in l)S.push(&#x27;&lt;input type=&quot;hidden&quot; name=&quot;&#x27;+x+&#x27;&quot; value=&quot;&#x27;+l[x]+&#x27;&quot; /&gt;&#x27;);var T=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;tabs&quot;&gt;&lt;/div&gt;&#x27;,&#x27;&lt;div class=&quot;tab1&quot; style=&quot;display:none;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;remoteUrl&quot; style=&quot;width:60px;&quot;&gt;&#x27;+p.remoteUrl+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;remoteUrl&quot; class=&quot;ke-input-text&quot; name=&quot;url&quot; value=&quot;&quot; style=&quot;width:200px;&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;span class=&quot;ke-button-common ke-button-outer&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-button-common ke-button&quot; name=&quot;viewServer&quot; value=&quot;&#x27;+p.viewServer+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;remoteWidth&quot; style=&quot;width:60px;&quot;&gt;&#x27;+p.size+&quot;&lt;/label&gt;&quot;,p.width+&#x27; &lt;input type=&quot;text&quot; id=&quot;remoteWidth&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;width&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &#x27;,p.height+&#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;height&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &#x27;,&#x27;&lt;img class=&quot;ke-refresh-btn&quot; src=&quot;&#x27;+f+&#x27;refresh.png&quot; width=&quot;16&quot; height=&quot;16&quot; alt=&quot;&quot; style=&quot;cursor:pointer;&quot; title=&quot;&#x27;+p.resetSize+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label style=&quot;width:60px;&quot;&gt;&#x27;+p.align+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;radio&quot; name=&quot;align&quot; class=&quot;ke-inline-block&quot; value=&quot;&quot; checked=&quot;checked&quot; /&gt; &lt;img name=&quot;defaultImg&quot; src=&quot;&#x27;+f+&#x27;align_top.gif&quot; width=&quot;23&quot; height=&quot;25&quot; alt=&quot;&quot; /&gt;&#x27;,&#x27; &lt;input type=&quot;radio&quot; name=&quot;align&quot; class=&quot;ke-inline-block&quot; value=&quot;left&quot; /&gt; &lt;img name=&quot;leftImg&quot; src=&quot;&#x27;+f+&#x27;align_left.gif&quot; width=&quot;23&quot; height=&quot;25&quot; alt=&quot;&quot; /&gt;&#x27;,&#x27; &lt;input type=&quot;radio&quot; name=&quot;align&quot; class=&quot;ke-inline-block&quot; value=&quot;right&quot; /&gt; &lt;img name=&quot;rightImg&quot; src=&quot;&#x27;+f+&#x27;align_right.gif&quot; width=&quot;23&quot; height=&quot;25&quot; alt=&quot;&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;remoteTitle&quot; style=&quot;width:60px;&quot;&gt;&#x27;+p.imgTitle+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;remoteTitle&quot; class=&quot;ke-input-text&quot; name=&quot;title&quot; value=&quot;&quot; style=&quot;width:200px;&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;tab2&quot; style=&quot;display:none;&quot;&gt;&#x27;,&#x27;&lt;iframe name=&quot;&#x27;+E+&#x27;&quot; style=&quot;display:none;&quot;&gt;&lt;/iframe&gt;&#x27;,&#x27;&lt;form class=&quot;ke-upload-area ke-form&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; target=&quot;&#x27;+E+&#x27;&quot; action=&quot;&#x27;+e.addParam(u,&quot;dir=image&quot;)+&#x27;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,S.join(&quot;&quot;),&#x27;&lt;label style=&quot;width:60px;&quot;&gt;&#x27;+p.localUrl+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; name=&quot;localUrl&quot; class=&quot;ke-input-text&quot; tabindex=&quot;-1&quot; style=&quot;width:200px;&quot; readonly=&quot;true&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-upload-button&quot; value=&quot;&#x27;+p.upload+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/form&gt;&quot;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),N=y||o?450:400,C=y&amp;&amp;g?300:250,k=t.createDialog({name:n,width:N,height:C,title:t.lang(n),body:T,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){if(k.isLoading)return;if(y&amp;&amp;g&amp;&amp;j&amp;&amp;j.selectedIndex===1||!g){if(F.fileBox.val()==&quot;&quot;){alert(t.lang(&quot;pleaseSelectFile&quot;));return}k.showLoading(t.lang(&quot;uploadLoading&quot;)),F.submit(),O.val(&quot;&quot;);return}var r=e.trim(A.val()),i=_.val(),s=D.val(),o=H.val(),u=&quot;&quot;;B.each(function(){if(this.checked)return u=this.value,!1});if(r==&quot;http://&quot;||e.invalidUrl(r)){alert(t.lang(&quot;invalidUrl&quot;)),A[0].focus();return}if(!/^\d*$/.test(i)){alert(t.lang(&quot;invalidWidth&quot;)),_[0].focus();return}if(!/^\d*$/.test(s)){alert(t.lang(&quot;invalidHeight&quot;)),D[0].focus();return}w.call(t,r,o,i,s,0,u)}},beforeRemove:function(){M.unbind(),_.unbind(),D.unbind(),P.unbind()}}),L=k.div,A=e(&#x27;[name=&quot;url&quot;]&#x27;,L),O=e(&#x27;[name=&quot;localUrl&quot;]&#x27;,L),M=e(&#x27;[name=&quot;viewServer&quot;]&#x27;,L),_=e(&#x27;.tab1 [name=&quot;width&quot;]&#x27;,L),D=e(&#x27;.tab1 [name=&quot;height&quot;]&#x27;,L),P=e(&quot;.ke-refresh-btn&quot;,L),H=e(&#x27;.tab1 [name=&quot;title&quot;]&#x27;,L),B=e(&#x27;.tab1 [name=&quot;align&quot;]&#x27;,L),j;g&amp;&amp;y?(j=e.tabs({src:e(&quot;.tabs&quot;,L),afterSelect:function(e){}}),j.add({title:p.remoteImage,panel:e(&quot;.tab1&quot;,L)}),j.add({title:p.localImage,panel:e(&quot;.tab2&quot;,L)}),j.select(b)):g?e(&quot;.tab1&quot;,L).show():y&amp;&amp;e(&quot;.tab2&quot;,L).show();var F=e.uploadbutton({button:e(&quot;.ke-upload-button&quot;,L)[0],fieldName:c,form:e(&quot;.ke-form&quot;,L),target:E,width:60,afterUpload:function(r){k.hideLoading();if(r.error===0){var i=r.url;s&amp;&amp;(i=e.formatUrl(i,&quot;absolute&quot;)),t.afterUpload&amp;&amp;t.afterUpload.call(t,i,r,n),h?(e(&quot;.ke-dialog-row #remoteUrl&quot;,L).val(i),e(&quot;.ke-tabs-li&quot;,L)[0].click(),e(&quot;.ke-refresh-btn&quot;,L).click()):w.call(t,i,r.title,r.width,r.height,r.border,r.align)}else alert(r.message)},afterError:function(e){k.hideLoading(),t.errorDialog(e)}});F.fileBox.change(function(e){O.val(F.fileBox.val())}),o?M.click(function(n){t.loadPlugin(&quot;filemanager&quot;,function(){t.plugin.filemanagerDialog({viewType:&quot;VIEW&quot;,dirName:&quot;image&quot;,clickFn:function(n,r){t.dialogs.length&gt;1&amp;&amp;(e(&#x27;[name=&quot;url&quot;]&#x27;,L).val(n),t.afterSelectFile&amp;&amp;t.afterSelectFile.call(t,n),t.hideDialog())}})})}):M.hide();var I=0,q=0;return P.click(function(t){var n=e(&#x27;&lt;img src=&quot;&#x27;+A.val()+&#x27;&quot; /&gt;&#x27;,document).css({position:&quot;absolute&quot;,visibility:&quot;hidden&quot;,top:0,left:&quot;-1000px&quot;});n.bind(&quot;load&quot;,function(){R(n.width(),n.height()),n.remove()}),e(document.body).append(n)}),_.change(function(e){I&gt;0&amp;&amp;D.val(Math.round(q/I*parseInt(this.value,10)))}),D.change(function(e){q&gt;0&amp;&amp;_.val(Math.round(I/q*parseInt(this.value,10)))}),A.val(r.imageUrl),R(r.imageWidth,r.imageHeight),H.val(r.imageTitle),B.each(function(){if(this.value===r.imageAlign)return this.checked=!0,!1}),g&amp;&amp;b===0&amp;&amp;(A[0].focus(),A[0].select()),k},t.plugin.image={edit:function(){var e=t.plugin.getSelectedImage();t.plugin.imageDialog({imageUrl:e?e.attr(&quot;data-ke-src&quot;):&quot;http://&quot;,imageWidth:e?e.width():&quot;&quot;,imageHeight:e?e.height():&quot;&quot;,imageTitle:e?e.attr(&quot;title&quot;):&quot;&quot;,imageAlign:e?e.attr(&quot;align&quot;):&quot;&quot;,showRemote:i,showLocal:r,tabIndex:e?0:a,clickFn:function(n,r,i,s,o,u){e?(e.attr(&quot;src&quot;,n),e.attr(&quot;data-ke-src&quot;,n),e.attr(&quot;width&quot;,i),e.attr(&quot;height&quot;,s),e.attr(&quot;title&quot;,r),e.attr(&quot;align&quot;,u),e.attr(&quot;alt&quot;,r)):t.exec(&quot;insertimage&quot;,n,r,i,s,o,u),setTimeout(function(){t.hideDialog().focus()},0)}})},&quot;delete&quot;:function(){var e=t.plugin.getSelectedImage();e.parent().name==&quot;a&quot;&amp;&amp;(e=e.parent()),e.remove(),t.addBookmark()}},t.clickToolbar(n,t.plugin.image.edit)}),KindEditor.plugin(&quot;insertfile&quot;,function(e){var t=this,n=&quot;insertfile&quot;,r=e.undef(t.allowFileUpload,!0),i=e.undef(t.allowFileManager,!1),s=e.undef(t.formatUploadUrl,!0),o=e.undef(t.uploadJson,t.basePath+&quot;php/upload_json.php&quot;),u=e.undef(t.extraFileUploadParams,{}),a=e.undef(t.filePostName,&quot;imgFile&quot;),f=t.lang(n+&quot;.&quot;);t.plugin.fileDialog=function(l){var c=e.undef(l.fileUrl,&quot;http://&quot;),h=e.undef(l.fileTitle,&quot;&quot;),p=l.clickFn,d=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keUrl&quot; style=&quot;width:60px;&quot;&gt;&#x27;+f.url+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;keUrl&quot; name=&quot;url&quot; class=&quot;ke-input-text&quot; style=&quot;width:160px;&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-upload-button&quot; value=&quot;&#x27;+f.upload+&#x27;&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;span class=&quot;ke-button-common ke-button-outer&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-button-common ke-button&quot; name=&quot;viewServer&quot; value=&quot;&#x27;+f.viewServer+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keTitle&quot; style=&quot;width:60px;&quot;&gt;&#x27;+f.title+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;keTitle&quot; class=&quot;ke-input-text&quot; name=&quot;title&quot; value=&quot;&quot; style=&quot;width:160px;&quot; /&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/form&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),v=t.createDialog({name:n,width:450,title:t.lang(n),body:d,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=e.trim(g.val()),i=b.val();if(r==&quot;http://&quot;||e.invalidUrl(r)){alert(t.lang(&quot;invalidUrl&quot;)),g[0].focus();return}e.trim(i)===&quot;&quot;&amp;&amp;(i=r),p.call(t,r,i)}}}),m=v.div,g=e(&#x27;[name=&quot;url&quot;]&#x27;,m),y=e(&#x27;[name=&quot;viewServer&quot;]&#x27;,m),b=e(&#x27;[name=&quot;title&quot;]&#x27;,m);if(r){var w=e.uploadbutton({button:e(&quot;.ke-upload-button&quot;,m)[0],fieldName:a,url:e.addParam(o,&quot;dir=file&quot;),extraParams:u,afterUpload:function(r){v.hideLoading();if(r.error===0){var i=r.url;s&amp;&amp;(i=e.formatUrl(i,&quot;absolute&quot;)),g.val(i),t.afterUpload&amp;&amp;t.afterUpload.call(t,i,r,n),alert(t.lang(&quot;uploadSuccess&quot;))}else alert(r.message)},afterError:function(e){v.hideLoading(),t.errorDialog(e)}});w.fileBox.change(function(e){v.showLoading(t.lang(&quot;uploadLoading&quot;)),w.submit()})}else e(&quot;.ke-upload-button&quot;,m).hide();i?y.click(function(n){t.loadPlugin(&quot;filemanager&quot;,function(){t.plugin.filemanagerDialog({viewType:&quot;LIST&quot;,dirName:&quot;file&quot;,clickFn:function(n,r){t.dialogs.length&gt;1&amp;&amp;(e(&#x27;[name=&quot;url&quot;]&#x27;,m).val(n),t.afterSelectFile&amp;&amp;t.afterSelectFile.call(t,n),t.hideDialog())}})})}):y.hide(),g.val(c),b.val(h),g[0].focus(),g[0].select()},t.clickToolbar(n,function(){t.plugin.fileDialog({clickFn:function(e,n){var r=&#x27;&lt;a class=&quot;ke-insertfile&quot; href=&quot;&#x27;+e+&#x27;&quot; data-ke-src=&quot;&#x27;+e+&#x27;&quot; target=&quot;_blank&quot;&gt;&#x27;+n+&quot;&lt;/a&gt;&quot;;t.insertHtml(r).hideDialog().focus()}})})}),KindEditor.plugin(&quot;lineheight&quot;,function(e){var t=this,n=&quot;lineheight&quot;,r=t.lang(n+&quot;.&quot;);t.clickToolbar(n,function(){var i=&quot;&quot;,s=t.cmd.commonNode({&quot;*&quot;:&quot;.line-height&quot;});s&amp;&amp;(i=s.css(&quot;line-height&quot;));var o=t.createMenu({name:n,width:150});e.each(r.lineHeight,function(n,r){e.each(r,function(e,n){o.addItem({title:n,checked:i===e,click:function(){t.cmd.toggle(&#x27;&lt;span style=&quot;line-height:&#x27;+e+&#x27;;&quot;&gt;&lt;/span&gt;&#x27;,{span:&quot;.line-height=&quot;+e}),t.updateState(),t.addBookmark(),t.hideMenu()}})})})})}),KindEditor.plugin(&quot;link&quot;,function(e){var t=this,n=&quot;link&quot;;t.plugin.link={edit:function(){var r=t.lang(n+&quot;.&quot;),i=&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&lt;div class=&quot;ke-dialog-row&quot;&gt;&lt;label for=&quot;keUrl&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.url+&quot;&lt;/label&gt;&quot;+&#x27;&lt;input class=&quot;ke-input-text&quot; type=&quot;text&quot; id=&quot;keUrl&quot; name=&quot;url&quot; value=&quot;&quot; style=&quot;width:260px;&quot; /&gt;&lt;/div&gt;&#x27;+&#x27;&lt;div class=&quot;ke-dialog-row&quot;&quot;&gt;&#x27;+&#x27;&lt;label for=&quot;keType&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.linkType+&quot;&lt;/label&gt;&quot;+&#x27;&lt;select id=&quot;keType&quot; name=&quot;type&quot;&gt;&lt;/select&gt;&#x27;+&quot;&lt;/div&gt;&quot;+&quot;&lt;/div&gt;&quot;,s=t.createDialog({name:n,width:450,title:t.lang(n),body:i,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=e.trim(u.val());if(r==&quot;http://&quot;||e.invalidUrl(r)){alert(t.lang(&quot;invalidUrl&quot;)),u[0].focus();return}t.exec(&quot;createlink&quot;,r,a.val()).hideDialog().focus()}}}),o=s.div,u=e(&#x27;input[name=&quot;url&quot;]&#x27;,o),a=e(&#x27;select[name=&quot;type&quot;]&#x27;,o);u.val(&quot;http://&quot;),a[0].options[0]=new Option(r.newWindow,&quot;_blank&quot;),a[0].options[1]=new Option(r.selfWindow,&quot;&quot;),t.cmd.selection();var f=t.plugin.getSelectedLink();f&amp;&amp;(t.cmd.range.selectNode(f[0]),t.cmd.select(),u.val(f.attr(&quot;data-ke-src&quot;)),a.val(f.attr(&quot;target&quot;))),u[0].focus(),u[0].select()},&quot;delete&quot;:function(){t.exec(&quot;unlink&quot;,null)}},t.clickToolbar(n,t.plugin.link.edit)}),KindEditor.plugin(&quot;media&quot;,function(e){var t=this,n=&quot;media&quot;,r=t.lang(n+&quot;.&quot;),i=e.undef(t.allowMediaUpload,!0),s=e.undef(t.allowFileManager,!1),o=e.undef(t.formatUploadUrl,!0),u=e.undef(t.extraFileUploadParams,{}),a=e.undef(t.filePostName,&quot;imgFile&quot;),f=e.undef(t.uploadJson,t.basePath+&quot;php/upload_json.php&quot;);t.plugin.media={edit:function(){var l=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keUrl&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.url+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input class=&quot;ke-input-text&quot; type=&quot;text&quot; id=&quot;keUrl&quot; name=&quot;url&quot; value=&quot;&quot; style=&quot;width:160px;&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-upload-button&quot; value=&quot;&#x27;+r.upload+&#x27;&quot; /&gt; &amp;nbsp;&#x27;,&#x27;&lt;span class=&quot;ke-button-common ke-button-outer&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-button-common ke-button&quot; name=&quot;viewServer&quot; value=&quot;&#x27;+r.viewServer+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keWidth&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.width+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;keWidth&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;width&quot; value=&quot;550&quot; maxlength=&quot;4&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keHeight&quot; style=&quot;width:60px;&quot;&gt;&#x27;+r.height+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;text&quot; id=&quot;keHeight&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;height&quot; value=&quot;400&quot; maxlength=&quot;4&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keAutostart&quot;&gt;&#x27;+r.autostart+&quot;&lt;/label&gt;&quot;,&#x27;&lt;input type=&quot;checkbox&quot; id=&quot;keAutostart&quot; name=&quot;autostart&quot; value=&quot;&quot; /&gt; &#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),c=t.createDialog({name:n,width:450,height:230,title:t.lang(n),body:l,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=e.trim(p.val()),i=v.val(),s=m.val();if(r==&quot;http://&quot;||e.invalidUrl(r)){alert(t.lang(&quot;invalidUrl&quot;)),p[0].focus();return}if(!/^\d*$/.test(i)){alert(t.lang(&quot;invalidWidth&quot;)),v[0].focus();return}if(!/^\d*$/.test(s)){alert(t.lang(&quot;invalidHeight&quot;)),m[0].focus();return}var o=e.mediaImg(t.themesPath+&quot;common/blank.gif&quot;,{src:r,type:e.mediaType(r),width:i,height:s,autostart:g[0].checked?&quot;true&quot;:&quot;false&quot;,loop:&quot;true&quot;});t.insertHtml(o).hideDialog().focus()}}}),h=c.div,p=e(&#x27;[name=&quot;url&quot;]&#x27;,h),d=e(&#x27;[name=&quot;viewServer&quot;]&#x27;,h),v=e(&#x27;[name=&quot;width&quot;]&#x27;,h),m=e(&#x27;[name=&quot;height&quot;]&#x27;,h),g=e(&#x27;[name=&quot;autostart&quot;]&#x27;,h);p.val(&quot;http://&quot;);if(i){var y=e.uploadbutton({button:e(&quot;.ke-upload-button&quot;,h)[0],fieldName:a,extraParams:u,url:e.addParam(f,&quot;dir=media&quot;),afterUpload:function(r){c.hideLoading();if(r.error===0){var i=r.url;o&amp;&amp;(i=e.formatUrl(i,&quot;absolute&quot;)),p.val(i),t.afterUpload&amp;&amp;t.afterUpload.call(t,i,r,n),alert(t.lang(&quot;uploadSuccess&quot;))}else alert(r.message)},afterError:function(e){c.hideLoading(),t.errorDialog(e)}});y.fileBox.change(function(e){c.showLoading(t.lang(&quot;uploadLoading&quot;)),y.submit()})}else e(&quot;.ke-upload-button&quot;,h).hide();s?d.click(function(n){t.loadPlugin(&quot;filemanager&quot;,function(){t.plugin.filemanagerDialog({viewType:&quot;LIST&quot;,dirName:&quot;media&quot;,clickFn:function(n,r){t.dialogs.length&gt;1&amp;&amp;(e(&#x27;[name=&quot;url&quot;]&#x27;,h).val(n),t.afterSelectFile&amp;&amp;t.afterSelectFile.call(t,n),t.hideDialog())}})})}):d.hide();var b=t.plugin.getSelectedMedia();if(b){var w=e.mediaAttrs(b.attr(&quot;data-ke-tag&quot;));p.val(w.src),v.val(e.removeUnit(b.css(&quot;width&quot;))||w.width||0),m.val(e.removeUnit(b.css(&quot;height&quot;))||w.height||0),g[0].checked=w.autostart===&quot;true&quot;}p[0].focus(),p[0].select()},&quot;delete&quot;:function(){t.plugin.getSelectedMedia().remove(),t.addBookmark()}},t.clickToolbar(n,t.plugin.media.edit)}),function(e){function t(e){this.init(e)}e.extend(t,{init:function(t){function r(t,n){e(&quot;.ke-status &gt; div&quot;,t).hide(),e(&quot;.ke-message&quot;,t).addClass(&quot;ke-error&quot;).show().html(e.escape(n))}var n=this;t.afterError=t.afterError||function(e){alert(e)},n.options=t,n.progressbars={},n.div=e(t.container).html([&#x27;&lt;div class=&quot;ke-swfupload&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-swfupload-top&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-inline-block ke-swfupload-button&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; value=&quot;Browse&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-inline-block ke-swfupload-desc&quot;&gt;&#x27;+t.uploadDesc+&quot;&lt;/div&gt;&quot;,&#x27;&lt;span class=&quot;ke-button-common ke-button-outer ke-swfupload-startupload&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;button&quot; class=&quot;ke-button-common ke-button&quot; value=&quot;&#x27;+t.startButtonValue+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/span&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-swfupload-body&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;)),n.bodyDiv=e(&quot;.ke-swfupload-body&quot;,n.div);var i={debug:!1,upload_url:t.uploadUrl,flash_url:t.flashUrl,file_post_name:t.filePostName,button_placeholder:e(&quot;.ke-swfupload-button &gt; input&quot;,n.div)[0],button_image_url:t.buttonImageUrl,button_width:t.buttonWidth,button_height:t.buttonHeight,button_cursor:SWFUpload.CURSOR.HAND,file_types:t.fileTypes,file_types_description:t.fileTypesDesc,file_upload_limit:t.fileUploadLimit,file_size_limit:t.fileSizeLimit,post_params:t.postParams,file_queued_handler:function(e){e.url=n.options.fileIconUrl,n.appendFile(e)},file_queue_error_handler:function(n,r,i){var s=&quot;&quot;;switch(r){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:s=t.queueLimitExceeded;break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:s=t.fileExceedsSizeLimit;break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:s=t.zeroByteFile;break;case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:s=t.invalidFiletype;break;default:s=t.unknownError}e.DEBUG&amp;&amp;alert(s)},upload_start_handler:function(t){var n=this,r=e(&#x27;div[data-id=&quot;&#x27;+t.id+&#x27;&quot;]&#x27;,n.bodyDiv);e(&quot;.ke-status &gt; div&quot;,r).hide(),e(&quot;.ke-progressbar&quot;,r).show()},upload_progress_handler:function(e,t,r){var i=Math.round(t*100/r),s=n.progressbars[e.id];s.bar.css(&quot;width&quot;,Math.round(i*80/100)+&quot;px&quot;),s.percent.html(i+&quot;%&quot;)},upload_error_handler:function(t,i,s){if(t&amp;&amp;t.filestatus==SWFUpload.FILE_STATUS.ERROR){var o=e(&#x27;div[data-id=&quot;&#x27;+t.id+&#x27;&quot;]&#x27;,n.bodyDiv).eq(0);r(o,n.options.errorMessage)}},upload_success_handler:function(t,i){var s=e(&#x27;div[data-id=&quot;&#x27;+t.id+&#x27;&quot;]&#x27;,n.bodyDiv).eq(0),o={};try{o=e.json(i)}catch(u){n.options.afterError.call(this,&quot;&lt;!doctype html&gt;&lt;html&gt;&quot;+i+&quot;&lt;/html&gt;&quot;)}if(o.error!==0){r(s,e.DEBUG?o.message:n.options.errorMessage);return}t.url=o.url,e(&quot;.ke-img&quot;,s).attr(&quot;src&quot;,t.url).attr(&quot;data-status&quot;,t.filestatus).data(&quot;data&quot;,o),e(&quot;.ke-status &gt; div&quot;,s).hide()}};n.swfu=new SWFUpload(i),e(&quot;.ke-swfupload-startupload input&quot;,n.div).click(function(){n.swfu.startUpload()})},getUrlList:function(){var t=[];return e(&quot;.ke-img&quot;,self.bodyDiv).each(function(){var n=e(this),r=n.attr(&quot;data-status&quot;);r==SWFUpload.FILE_STATUS.COMPLETE&amp;&amp;t.push(n.data(&quot;data&quot;))}),t},removeFile:function(t){var n=this;n.swfu.cancelUpload(t);var r=e(&#x27;div[data-id=&quot;&#x27;+t+&#x27;&quot;]&#x27;,n.bodyDiv);e(&quot;.ke-photo&quot;,r).unbind(),e(&quot;.ke-delete&quot;,r).unbind(),r.remove()},removeFiles:function(){var t=this;e(&quot;.ke-item&quot;,t.bodyDiv).each(function(){t.removeFile(e(this).attr(&quot;data-id&quot;))})},appendFile:function(t){var n=this,r=e(&#x27;&lt;div class=&quot;ke-inline-block ke-item&quot; data-id=&quot;&#x27;+t.id+&#x27;&quot;&gt;&lt;/div&gt;&#x27;);n.bodyDiv.append(r);var i=e(&#x27;&lt;div class=&quot;ke-inline-block ke-photo&quot;&gt;&lt;/div&gt;&#x27;).mouseover(function(t){e(this).addClass(&quot;ke-on&quot;)}).mouseout(function(t){e(this).removeClass(&quot;ke-on&quot;)});r.append(i);var s=e(&#x27;&lt;img src=&quot;&#x27;+t.url+&#x27;&quot; class=&quot;ke-img&quot; data-status=&quot;&#x27;+t.filestatus+&#x27;&quot; width=&quot;80&quot; height=&quot;80&quot; alt=&quot;&#x27;+t.name+&#x27;&quot; /&gt;&#x27;);i.append(s),e(&#x27;&lt;span class=&quot;ke-delete&quot;&gt;&lt;/span&gt;&#x27;).appendTo(i).click(function(){n.removeFile(t.id)});var o=e(&#x27;&lt;div class=&quot;ke-status&quot;&gt;&lt;/div&gt;&#x27;).appendTo(i);e([&#x27;&lt;div class=&quot;ke-progressbar&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-progressbar-bar&quot;&gt;&lt;div class=&quot;ke-progressbar-bar-inner&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;,&#x27;&lt;div class=&quot;ke-progressbar-percent&quot;&gt;0%&lt;/div&gt;&lt;/div&gt;&#x27;].join(&quot;&quot;)).hide().appendTo(o),e(&#x27;&lt;div class=&quot;ke-message&quot;&gt;&#x27;+n.options.pendingMessage+&quot;&lt;/div&gt;&quot;).appendTo(o),r.append(&#x27;&lt;div class=&quot;ke-name&quot;&gt;&#x27;+t.name+&quot;&lt;/div&gt;&quot;),n.progressbars[t.id]={bar:e(&quot;.ke-progressbar-bar-inner&quot;,i),percent:e(&quot;.ke-progressbar-percent&quot;,i)}},remove:function(){this.removeFiles(),this.swfu.destroy(),this.div.html(&quot;&quot;)}}),e.swfupload=function(e,n){return new t(e,n)}}(KindEditor),KindEditor.plugin(&quot;multiimage&quot;,function(e){var t=this,n=&quot;multiimage&quot;,r=e.undef(t.formatUploadUrl,!0),i=e.undef(t.uploadJson,t.basePath+&quot;php/upload_json.php&quot;),s=t.pluginsPath+&quot;multiimage/images/&quot;,o=e.undef(t.imageSizeLimit,&quot;1MB&quot;),u=e.undef(t.imageFileTypes,&quot;*.jpg;*.gif;*.png&quot;),a=e.undef(t.imageUploadLimit,20),f=e.undef(t.filePostName,&quot;imgFile&quot;),l=t.lang(n+&quot;.&quot;);t.plugin.multiImageDialog=function(r){var u=r.clickFn,c=e.tmpl(l.uploadDesc,{uploadLimit:a,sizeLimit:o}),h=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;swfupload&quot;&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),p=t.createDialog({name:n,width:650,height:510,title:t.lang(n),body:h,previewBtn:{name:l.insertAll,click:function(e){u.call(t,v.getUrlList())}},yesBtn:{name:l.clearAll,click:function(e){v.removeFiles()}},beforeRemove:function(){(!e.IE||e.V&lt;=8)&amp;&amp;v.remove()}}),d=p.div,v=e.swfupload({container:e(&quot;.swfupload&quot;,d),buttonImageUrl:s+(t.langType==&quot;zh_CN&quot;?&quot;select-files-zh_CN.png&quot;:&quot;select-files-en.png&quot;),buttonWidth:t.langType==&quot;zh_CN&quot;?72:88,buttonHeight:23,fileIconUrl:s+&quot;image.png&quot;,uploadDesc:c,startButtonValue:l.startUpload,uploadUrl:e.addParam(i,&quot;dir=image&quot;),flashUrl:s+&quot;swfupload.swf&quot;,filePostName:f,fileTypes:&quot;*.jpg;*.jpeg;*.gif;*.png;*.bmp&quot;,fileTypesDesc:&quot;Image Files&quot;,fileUploadLimit:a,fileSizeLimit:o,postParams:e.undef(t.extraFileUploadParams,{}),queueLimitExceeded:l.queueLimitExceeded,fileExceedsSizeLimit:l.fileExceedsSizeLimit,zeroByteFile:l.zeroByteFile,invalidFiletype:l.invalidFiletype,unknownError:l.unknownError,pendingMessage:l.pending,errorMessage:l.uploadError,afterError:function(e){t.errorDialog(e)}});return p},t.clickToolbar(n,function(){t.plugin.multiImageDialog({clickFn:function(n){if(n.length===0)return;e.each(n,function(e,n){t.afterUpload&amp;&amp;t.afterUpload.call(t,n.url,n,&quot;multiimage&quot;),t.exec(&quot;insertimage&quot;,n.url,n.title,n.width,n.height,n.border,n.align)}),setTimeout(function(){t.hideDialog().focus()},0)}})})}),function(){window.SWFUpload=function(e){this.initSWFUpload(e)},SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName=&quot;KindEditor_SWFUpload_&quot;+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version=&quot;2.2.0 2009-03-25&quot;,SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:&quot;window&quot;,TRANSPARENT:&quot;transparent&quot;,OPAQUE:&quot;opaque&quot;},SWFUpload.completeURL=function(e){if(typeof e!=&quot;string&quot;||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=window.location.protocol+&quot;//&quot;+window.location.hostname+(window.location.port?&quot;:&quot;+window.location.port:&quot;&quot;),n=window.location.pathname.lastIndexOf(&quot;/&quot;);return n&lt;=0?path=&quot;/&quot;:path=window.location.pathname.substr(0,n)+&quot;/&quot;,path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=this.settings[e]==undefined?t:this.settings[e]},this.ensureDefault(&quot;upload_url&quot;,&quot;&quot;),this.ensureDefault(&quot;preserve_relative_urls&quot;,!1),this.ensureDefault(&quot;file_post_name&quot;,&quot;Filedata&quot;),this.ensureDefault(&quot;post_params&quot;,{}),this.ensureDefault(&quot;use_query_string&quot;,!1),this.ensureDefault(&quot;requeue_on_error&quot;,!1),this.ensureDefault(&quot;http_success&quot;,[]),this.ensureDefault(&quot;assume_success_timeout&quot;,0),this.ensureDefault(&quot;file_types&quot;,&quot;*.*&quot;),this.ensureDefault(&quot;file_types_description&quot;,&quot;All Files&quot;),this.ensureDefault(&quot;file_size_limit&quot;,0),this.ensureDefault(&quot;file_upload_limit&quot;,0),this.ensureDefault(&quot;file_queue_limit&quot;,0),this.ensureDefault(&quot;flash_url&quot;,&quot;swfupload.swf&quot;),this.ensureDefault(&quot;prevent_swf_caching&quot;,!0),this.ensureDefault(&quot;button_image_url&quot;,&quot;&quot;),this.ensureDefault(&quot;button_width&quot;,1),this.ensureDefault(&quot;button_height&quot;,1),this.ensureDefault(&quot;button_text&quot;,&quot;&quot;),this.ensureDefault(&quot;button_text_style&quot;,&quot;color: #000000; font-size: 16pt;&quot;),this.ensureDefault(&quot;button_text_top_padding&quot;,0),this.ensureDefault(&quot;button_text_left_padding&quot;,0),this.ensureDefault(&quot;button_action&quot;,SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault(&quot;button_disabled&quot;,!1),this.ensureDefault(&quot;button_placeholder_id&quot;,&quot;&quot;),this.ensureDefault(&quot;button_placeholder&quot;,null),this.ensureDefault(&quot;button_cursor&quot;,SWFUpload.CURSOR.ARROW),this.ensureDefault(&quot;button_window_mode&quot;,SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault(&quot;debug&quot;,!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault(&quot;swfupload_loaded_handler&quot;,null),this.ensureDefault(&quot;file_dialog_start_handler&quot;,null),this.ensureDefault(&quot;file_queued_handler&quot;,null),this.ensureDefault(&quot;file_queue_error_handler&quot;,null),this.ensureDefault(&quot;file_dialog_complete_handler&quot;,null),this.ensureDefault(&quot;upload_start_handler&quot;,null),this.ensureDefault(&quot;upload_progress_handler&quot;,null),this.ensureDefault(&quot;upload_error_handler&quot;,null),this.ensureDefault(&quot;upload_success_handler&quot;,null),this.ensureDefault(&quot;upload_complete_handler&quot;,null),this.ensureDefault(&quot;debug_handler&quot;,this.debugMessage),this.ensureDefault(&quot;custom_settings&quot;,{}),this.customSettings=this.settings.custom_settings,!this.settings.prevent_swf_caching||(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf(&quot;?&quot;)&lt;0?&quot;?&quot;:&quot;&amp;&quot;)+&quot;preventswfcaching=&quot;+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(document.getElementById(this.movieName)!==null)throw&quot;ID &quot;+this.movieName+&quot; is already in use. The Flash Object could not be added&quot;;e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(e==undefined)throw&quot;Could not find the placeholder element: &quot;+this.settings.button_placeholder_id;t=document.createElement(&quot;div&quot;),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),window[this.movieName]==undefined&amp;&amp;(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){var e=&quot;&quot;;return KindEditor.IE&amp;&amp;KindEditor.V&gt;8&amp;&amp;(e=&#x27; classid = &quot;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&quot;&#x27;),[&#x27;&lt;object id=&quot;&#x27;,this.movieName,&#x27;&quot;&#x27;+e+&#x27; type=&quot;application/x-shockwave-flash&quot; data=&quot;&#x27;,this.settings.flash_url,&#x27;&quot; width=&quot;&#x27;,this.settings.button_width,&#x27;&quot; height=&quot;&#x27;,this.settings.button_height,&#x27;&quot; class=&quot;swfupload&quot;&gt;&#x27;,&#x27;&lt;param name=&quot;wmode&quot; value=&quot;&#x27;,this.settings.button_window_mode,&#x27;&quot; /&gt;&#x27;,&#x27;&lt;param name=&quot;movie&quot; value=&quot;&#x27;,this.settings.flash_url,&#x27;&quot; /&gt;&#x27;,&#x27;&lt;param name=&quot;quality&quot; value=&quot;high&quot; /&gt;&#x27;,&#x27;&lt;param name=&quot;menu&quot; value=&quot;false&quot; /&gt;&#x27;,&#x27;&lt;param name=&quot;allowScriptAccess&quot; value=&quot;always&quot; /&gt;&#x27;,&#x27;&lt;param name=&quot;flashvars&quot; value=&quot;&#x27;+this.getFlashVars()+&#x27;&quot; /&gt;&#x27;,&quot;&lt;/object&gt;&quot;].join(&quot;&quot;)},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(&quot;,&quot;);return[&quot;movieName=&quot;,encodeURIComponent(this.movieName),&quot;&amp;amp;uploadURL=&quot;,encodeURIComponent(this.settings.upload_url),&quot;&amp;amp;useQueryString=&quot;,encodeURIComponent(this.settings.use_query_string),&quot;&amp;amp;requeueOnError=&quot;,encodeURIComponent(this.settings.requeue_on_error),&quot;&amp;amp;httpSuccess=&quot;,encodeURIComponent(t),&quot;&amp;amp;assumeSuccessTimeout=&quot;,encodeURIComponent(this.settings.assume_success_timeout),&quot;&amp;amp;params=&quot;,encodeURIComponent(e),&quot;&amp;amp;filePostName=&quot;,encodeURIComponent(this.settings.file_post_name),&quot;&amp;amp;fileTypes=&quot;,encodeURIComponent(this.settings.file_types),&quot;&amp;amp;fileTypesDescription=&quot;,encodeURIComponent(this.settings.file_types_description),&quot;&amp;amp;fileSizeLimit=&quot;,encodeURIComponent(this.settings.file_size_limit),&quot;&amp;amp;fileUploadLimit=&quot;,encodeURIComponent(this.settings.file_upload_limit),&quot;&amp;amp;fileQueueLimit=&quot;,encodeURIComponent(this.settings.file_queue_limit),&quot;&amp;amp;debugEnabled=&quot;,encodeURIComponent(this.settings.debug_enabled),&quot;&amp;amp;buttonImageURL=&quot;,encodeURIComponent(this.settings.button_image_url),&quot;&amp;amp;buttonWidth=&quot;,encodeURIComponent(this.settings.button_width),&quot;&amp;amp;buttonHeight=&quot;,encodeURIComponent(this.settings.button_height),&quot;&amp;amp;buttonText=&quot;,encodeURIComponent(this.settings.button_text),&quot;&amp;amp;buttonTextTopPadding=&quot;,encodeURIComponent(this.settings.button_text_top_padding),&quot;&amp;amp;buttonTextLeftPadding=&quot;,encodeURIComponent(this.settings.button_text_left_padding),&quot;&amp;amp;buttonTextStyle=&quot;,encodeURIComponent(this.settings.button_text_style),&quot;&amp;amp;buttonAction=&quot;,encodeURIComponent(this.settings.button_action),&quot;&amp;amp;buttonDisabled=&quot;,encodeURIComponent(this.settings.button_disabled),&quot;&amp;amp;buttonCursor=&quot;,encodeURIComponent(this.settings.button_cursor)].join(&quot;&quot;)},SWFUpload.prototype.getMovieElement=function(){this.movieElement==undefined&amp;&amp;(this.movieElement=document.getElementById(this.movieName));if(this.movieElement===null)throw&quot;Could not find Flash element&quot;;return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if(typeof e==&quot;object&quot;)for(var n in e)e.hasOwnProperty(n)&amp;&amp;t.push(encodeURIComponent(n.toString())+&quot;=&quot;+encodeURIComponent(e[n].toString()));return t.join(&quot;&amp;amp;&quot;)},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;e=this.getMovieElement();if(e&amp;&amp;typeof e.CallFunction==&quot;unknown&quot;){for(var t in e)try{typeof e[t]==&quot;function&quot;&amp;&amp;(e[t]=null)}catch(n){}try{e.parentNode.removeChild(e)}catch(r){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(i){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug([&quot;---SWFUpload Instance Info---\n&quot;,&quot;Version: &quot;,SWFUpload.version,&quot;\n&quot;,&quot;Movie Name: &quot;,this.movieName,&quot;\n&quot;,&quot;Settings:\n&quot;,&quot;	&quot;,&quot;upload_url:               &quot;,this.settings.upload_url,&quot;\n&quot;,&quot;	&quot;,&quot;flash_url:                &quot;,this.settings.flash_url,&quot;\n&quot;,&quot;	&quot;,&quot;use_query_string:         &quot;,this.settings.use_query_string.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;requeue_on_error:         &quot;,this.settings.requeue_on_error.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;http_success:             &quot;,this.settings.http_success.join(&quot;, &quot;),&quot;\n&quot;,&quot;	&quot;,&quot;assume_success_timeout:   &quot;,this.settings.assume_success_timeout,&quot;\n&quot;,&quot;	&quot;,&quot;file_post_name:           &quot;,this.settings.file_post_name,&quot;\n&quot;,&quot;	&quot;,&quot;post_params:              &quot;,this.settings.post_params.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;file_types:               &quot;,this.settings.file_types,&quot;\n&quot;,&quot;	&quot;,&quot;file_types_description:   &quot;,this.settings.file_types_description,&quot;\n&quot;,&quot;	&quot;,&quot;file_size_limit:          &quot;,this.settings.file_size_limit,&quot;\n&quot;,&quot;	&quot;,&quot;file_upload_limit:        &quot;,this.settings.file_upload_limit,&quot;\n&quot;,&quot;	&quot;,&quot;file_queue_limit:         &quot;,this.settings.file_queue_limit,&quot;\n&quot;,&quot;	&quot;,&quot;debug:                    &quot;,this.settings.debug.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;prevent_swf_caching:      &quot;,this.settings.prevent_swf_caching.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_placeholder_id:    &quot;,this.settings.button_placeholder_id.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_placeholder:       &quot;,this.settings.button_placeholder?&quot;Set&quot;:&quot;Not Set&quot;,&quot;\n&quot;,&quot;	&quot;,&quot;button_image_url:         &quot;,this.settings.button_image_url.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_width:             &quot;,this.settings.button_width.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_height:            &quot;,this.settings.button_height.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_text:              &quot;,this.settings.button_text.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_text_style:        &quot;,this.settings.button_text_style.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_text_top_padding:  &quot;,this.settings.button_text_top_padding.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_text_left_padding: &quot;,this.settings.button_text_left_padding.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_action:            &quot;,this.settings.button_action.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;button_disabled:          &quot;,this.settings.button_disabled.toString(),&quot;\n&quot;,&quot;	&quot;,&quot;custom_settings:          &quot;,this.settings.custom_settings.toString(),&quot;\n&quot;,&quot;Event Handlers:\n&quot;,&quot;	&quot;,&quot;swfupload_loaded_handler assigned:  &quot;,(typeof this.settings.swfupload_loaded_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;file_dialog_start_handler assigned: &quot;,(typeof this.settings.file_dialog_start_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;file_queued_handler assigned:       &quot;,(typeof this.settings.file_queued_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;file_queue_error_handler assigned:  &quot;,(typeof this.settings.file_queue_error_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;upload_start_handler assigned:      &quot;,(typeof this.settings.upload_start_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;upload_progress_handler assigned:   &quot;,(typeof this.settings.upload_progress_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;upload_error_handler assigned:      &quot;,(typeof this.settings.upload_error_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;upload_success_handler assigned:    &quot;,(typeof this.settings.upload_success_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;upload_complete_handler assigned:   &quot;,(typeof this.settings.upload_complete_handler==&quot;function&quot;).toString(),&quot;\n&quot;,&quot;	&quot;,&quot;debug_handler assigned:             &quot;,(typeof this.settings.debug_handler==&quot;function&quot;).toString(),&quot;\n&quot;].join(&quot;&quot;))},SWFUpload.prototype.addSetting=function(e,t,n){return t==undefined?this.settings[e]=n:this.settings[e]=t},SWFUpload.prototype.getSetting=function(e){return this.settings[e]!=undefined?this.settings[e]:&quot;&quot;},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction(&#x27;&lt;invoke name=&quot;&#x27;+functionName+&#x27;&quot; returntype=&quot;javascript&quot;&gt;&#x27;+__flash__argumentsToXML(argumentArray,0)+&quot;&lt;/invoke&gt;&quot;),returnValue=eval(returnString)}catch(ex){throw&quot;Call to &quot;+functionName+&quot; failed&quot;}return returnValue!=undefined&amp;&amp;typeof returnValue.post==&quot;object&quot;&amp;&amp;(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash(&quot;SelectFile&quot;)},SWFUpload.prototype.selectFiles=function(){this.callFlash(&quot;SelectFiles&quot;)},SWFUpload.prototype.startUpload=function(e){this.callFlash(&quot;StartUpload&quot;,[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&amp;&amp;(t=!0),this.callFlash(&quot;CancelUpload&quot;,[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash(&quot;StopUpload&quot;)},SWFUpload.prototype.getStats=function(){return this.callFlash(&quot;GetStats&quot;)},SWFUpload.prototype.setStats=function(e){this.callFlash(&quot;SetStats&quot;,[e])},SWFUpload.prototype.getFile=function(e){return typeof e==&quot;number&quot;?this.callFlash(&quot;GetFileByIndex&quot;,[e]):this.callFlash(&quot;GetFile&quot;,[e])},SWFUpload.prototype.addFileParam=function(e,t,n){return this.callFlash(&quot;AddFileParam&quot;,[e,t,n])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash(&quot;RemoveFileParam&quot;,[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash(&quot;SetUploadURL&quot;,[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash(&quot;SetPostParams&quot;,[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash(&quot;SetPostParams&quot;,[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash(&quot;SetPostParams&quot;,[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash(&quot;SetFileTypes&quot;,[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash(&quot;SetFileSizeLimit&quot;,[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash(&quot;SetFileUploadLimit&quot;,[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash(&quot;SetFileQueueLimit&quot;,[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash(&quot;SetFilePostName&quot;,[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash(&quot;SetUseQueryString&quot;,[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash(&quot;SetRequeueOnError&quot;,[e])},SWFUpload.prototype.setHTTPSuccess=function(e){typeof e==&quot;string&quot;&amp;&amp;(e=e.replace(&quot; &quot;,&quot;&quot;).split(&quot;,&quot;)),this.settings.http_success=e,this.callFlash(&quot;SetHTTPSuccess&quot;,[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash(&quot;SetAssumeSuccessTimeout&quot;,[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash(&quot;SetDebugEnabled&quot;,[e])},SWFUpload.prototype.setButtonImageURL=function(e){e==undefined&amp;&amp;(e=&quot;&quot;),this.settings.button_image_url=e,this.callFlash(&quot;SetButtonImageURL&quot;,[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var n=this.getMovieElement();n!=undefined&amp;&amp;(n.style.width=e+&quot;px&quot;,n.style.height=t+&quot;px&quot;),this.callFlash(&quot;SetButtonDimensions&quot;,[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash(&quot;SetButtonText&quot;,[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash(&quot;SetButtonTextPadding&quot;,[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash(&quot;SetButtonTextStyle&quot;,[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash(&quot;SetButtonDisabled&quot;,[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash(&quot;SetButtonAction&quot;,[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash(&quot;SetButtonCursor&quot;,[e])},SWFUpload.prototype.queueEvent=function(e,t){t==undefined?t=[]:t instanceof Array||(t=[t]);var n=this;if(typeof this.settings[e]==&quot;function&quot;)this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){n.executeNextEvent()},0);else if(this.settings[e]!==null)throw&quot;Event handler &quot;+e+&quot; is unknown or is not a function&quot;},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;typeof e==&quot;function&quot;&amp;&amp;e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t=/[$]([0-9a-f]{4})/i,n={},r;if(e!=undefined){for(var i in e.post)if(e.post.hasOwnProperty(i)){r=i;var s;while((s=t.exec(r))!==null)r=r.replace(s[0],String.fromCharCode(parseInt(&quot;0x&quot;+s[1],16)));n[r]=e.post[i]}e.post=n}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash(&quot;TestExternalInterface&quot;)}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();if(!e){this.debug(&quot;Flash called back ready but the flash movie can&#x27;t be found.&quot;);return}this.cleanUp(e),this.queueEvent(&quot;swfupload_loaded_handler&quot;)},SWFUpload.prototype.cleanUp=function(e){try{if(this.movieElement&amp;&amp;typeof e.CallFunction==&quot;unknown&quot;){this.debug(&quot;Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)&quot;);for(var t in e)try{typeof e[t]==&quot;function&quot;&amp;&amp;(e[t]=null)}catch(n){}}}catch(r){}window.__flash__removeCallback=function(e,t){try{e&amp;&amp;(e[t]=null)}catch(n){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent(&quot;file_dialog_start_handler&quot;)},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent(&quot;file_queued_handler&quot;,e)},SWFUpload.prototype.fileQueueError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent(&quot;file_queue_error_handler&quot;,[e,t,n])},SWFUpload.prototype.fileDialogComplete=function(e,t,n){this.queueEvent(&quot;file_dialog_complete_handler&quot;,[e,t,n])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent(&quot;return_upload_start_handler&quot;,e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if(typeof this.settings.upload_start_handler==&quot;function&quot;)e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(this.settings.upload_start_handler!=undefined)throw&quot;upload_start_handler must be a function&quot;;t===undefined&amp;&amp;(t=!0),t=!!t,this.callFlash(&quot;ReturnUploadStart&quot;,[t])},SWFUpload.prototype.uploadProgress=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent(&quot;upload_progress_handler&quot;,[e,t,n])},SWFUpload.prototype.uploadError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent(&quot;upload_error_handler&quot;,[e,t,n])},SWFUpload.prototype.uploadSuccess=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent(&quot;upload_success_handler&quot;,[e,t,n])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent(&quot;upload_complete_handler&quot;,e)},SWFUpload.prototype.debug=function(e){this.queueEvent(&quot;debug_handler&quot;,e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,n=[];if(typeof e==&quot;object&quot;&amp;&amp;typeof e.name==&quot;string&quot;&amp;&amp;typeof e.message==&quot;string&quot;){for(var r in e)e.hasOwnProperty(r)&amp;&amp;n.push(r+&quot;: &quot;+e[r]);t=n.join(&quot;\n&quot;)||&quot;&quot;,n=t.split(&quot;\n&quot;),t=&quot;EXCEPTION: &quot;+n.join(&quot;\nEXCEPTION: &quot;),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,n;try{t=document.getElementById(&quot;SWFUpload_Console&quot;),t||(n=document.createElement(&quot;form&quot;),document.getElementsByTagName(&quot;body&quot;)[0].appendChild(n),t=document.createElement(&quot;textarea&quot;),t.id=&quot;SWFUpload_Console&quot;,t.style.fontFamily=&quot;monospace&quot;,t.setAttribute(&quot;wrap&quot;,&quot;off&quot;),t.wrap=&quot;off&quot;,t.style.overflow=&quot;auto&quot;,t.style.width=&quot;700px&quot;,t.style.height=&quot;350px&quot;,t.style.margin=&quot;5px&quot;,n.appendChild(t)),t.value+=e+&quot;\n&quot;,t.scrollTop=t.scrollHeight-t.clientHeight}catch(r){alert(&quot;Exception: &quot;+r.name+&quot; Message: &quot;+r.message)}}}(),function(){typeof SWFUpload==&quot;function&quot;&amp;&amp;(SWFUpload.queue={},SWFUpload.prototype.initSettings=function(e){return function(){typeof e==&quot;function&quot;&amp;&amp;e.call(this),this.queueSettings={},this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0,this.queueSettings.user_upload_complete_handler=this.settings.upload_complete_handler,this.queueSettings.user_upload_start_handler=this.settings.upload_start_handler,this.settings.upload_complete_handler=SWFUpload.queue.uploadCompleteHandler,this.settings.upload_start_handler=SWFUpload.queue.uploadStartHandler,this.settings.queue_complete_handler=this.settings.queue_complete_handler||null}}(SWFUpload.prototype.initSettings),SWFUpload.prototype.startUpload=function(e){this.queueSettings.queue_cancelled_flag=!1,this.callFlash(&quot;StartUpload&quot;,[e])},SWFUpload.prototype.cancelQueue=function(){this.queueSettings.queue_cancelled_flag=!0,this.stopUpload();var e=this.getStats();while(e.files_queued&gt;0)this.cancelUpload(),e=this.getStats()},SWFUpload.queue.uploadStartHandler=function(e){var t;return typeof this.queueSettings.user_upload_start_handler==&quot;function&quot;&amp;&amp;(t=this.queueSettings.user_upload_start_handler.call(this,e)),t=t===!1?!1:!0,this.queueSettings.queue_cancelled_flag=!t,t},SWFUpload.queue.uploadCompleteHandler=function(e){var t=this.queueSettings.user_upload_complete_handler,n;e.filestatus===SWFUpload.FILE_STATUS.COMPLETE&amp;&amp;this.queueSettings.queue_upload_count++,typeof t==&quot;function&quot;?n=t.call(this,e)===!1?!1:!0:e.filestatus===SWFUpload.FILE_STATUS.QUEUED?n=!1:n=!0;if(n){var r=this.getStats();r.files_queued&gt;0&amp;&amp;this.queueSettings.queue_cancelled_flag===!1?this.startUpload():this.queueSettings.queue_cancelled_flag===!1?(this.queueEvent(&quot;queue_complete_handler&quot;,[this.queueSettings.queue_upload_count]),this.queueSettings.queue_upload_count=0):(this.queueSettings.queue_cancelled_flag=!1,this.queueSettings.queue_upload_count=0)}})}(),KindEditor.plugin(&quot;pagebreak&quot;,function(e){var t=this,n=&quot;pagebreak&quot;,r=e.undef(t.pagebreakHtml,&#x27;&lt;hr style=&quot;page-break-after: always;&quot; class=&quot;ke-pagebreak&quot; /&gt;&#x27;);t.clickToolbar(n,function(){var n=t.cmd,i=n.range;t.focus();var s=t.newlineTag==&quot;br&quot;||e.WEBKIT?&quot;&quot;:&#x27;&lt;span id=&quot;__kindeditor_tail_tag__&quot;&gt;&lt;/span&gt;&#x27;;t.insertHtml(r+s);if(s!==&quot;&quot;){var o=e(&quot;#__kindeditor_tail_tag__&quot;,t.edit.doc);i.selectNodeContents(o[0]),o.removeAttr(&quot;id&quot;),n.select()}})}),KindEditor.plugin(&quot;plainpaste&quot;,function(e){var t=this,n=&quot;plainpaste&quot;;t.clickToolbar(n,function(){var r=t.lang(n+&quot;.&quot;),i=&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&lt;div style=&quot;margin-bottom:10px;&quot;&gt;&#x27;+r.comment+&quot;&lt;/div&gt;&quot;+&#x27;&lt;textarea class=&quot;ke-textarea&quot; style=&quot;width:408px;height:260px;&quot;&gt;&lt;/textarea&gt;&#x27;+&quot;&lt;/div&gt;&quot;,s=t.createDialog({name:n,width:450,title:t.lang(n),body:i,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=o.val();r=e.escape(r),r=r.replace(/ {2}/g,&quot; &amp;nbsp;&quot;),t.newlineTag==&quot;p&quot;?r=r.replace(/^/,&quot;&lt;p&gt;&quot;).replace(/$/,&quot;&lt;/p&gt;&quot;).replace(/\n/g,&quot;&lt;/p&gt;&lt;p&gt;&quot;):r=r.replace(/\n/g,&quot;&lt;br /&gt;$&amp;&quot;),t.insertHtml(r).hideDialog().focus()}}}),o=e(&quot;textarea&quot;,s.div);o[0].focus()})}),KindEditor.plugin(&quot;preview&quot;,function(e){var t=this,n=&quot;preview&quot;,r;t.clickToolbar(n,function(){var r=t.lang(n+&quot;.&quot;),i=&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&lt;iframe class=&quot;ke-textarea&quot; frameborder=&quot;0&quot; style=&quot;width:708px;height:400px;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&#x27;,s=t.createDialog({name:n,width:750,title:t.lang(n),body:i}),o=e(&quot;iframe&quot;,s.div),u=e.iframeDoc(o);u.open(),u.write(t.fullHtml()),u.close(),e(u.body).css(&quot;background-color&quot;,&quot;#FFF&quot;),o[0].contentWindow.focus()})}),KindEditor.plugin(&quot;quickformat&quot;,function(e){function i(e){var t=e.first();while(t&amp;&amp;t.first())t=t.first();return t}var t=this,n=&quot;quickformat&quot;,r=e.toMap(&quot;blockquote,center,div,h1,h2,h3,h4,h5,h6,p&quot;);t.clickToolbar(n,function(){t.focus();var n=t.edit.doc,s=t.cmd.range,o=e(n.body).first(),u,a=[],f=[],l=s.createBookmark(!0);while(o){u=o.next();var c=i(o);if(!c||c.name!=&quot;img&quot;){r[o.name]?(o.html(o.html().replace(/^(\s|&amp;nbsp;|　)+/ig,&quot;&quot;)),o.css(&quot;text-indent&quot;,&quot;2em&quot;)):f.push(o);if(!u||r[u.name]||r[o.name]&amp;&amp;!r[u.name])f.length&gt;0&amp;&amp;a.push(f),f=[]}o=u}e.each(a,function(t,r){var i=e(&#x27;&lt;p style=&quot;text-indent:2em;&quot;&gt;&lt;/p&gt;&#x27;,n);r[0].before(i),e.each(r,function(e,t){i.append(t)})}),s.moveToBookmark(l),t.addBookmark()})}),KindEditor.plugin(&quot;table&quot;,function(e){function s(e,t){t=t.toUpperCase(),e.css(&quot;background-color&quot;,t),e.css(&quot;color&quot;,t===&quot;#000000&quot;?&quot;#FFFFFF&quot;:&quot;#000000&quot;),e.html(t)}function u(n,r){function i(){e.each(o,function(){this.remove()}),o=[],e(document).unbind(&quot;click,mousedown&quot;,i),n.unbind(&quot;click,mousedown&quot;,i)}r.bind(&quot;click,mousedown&quot;,function(e){e.stopPropagation()}),r.click(function(r){i();var u=e(this),a=u.pos(),f=e.colorpicker({x:a.x,y:a.y+u.height(),z:811214,selectedColor:e(this).html(),colors:t.colorTable,noColor:t.lang(&quot;noColor&quot;),shadowMode:t.shadowMode,click:function(e){s(u,e),i()}});o.push(f),e(document).bind(&quot;click,mousedown&quot;,i),n.bind(&quot;click,mousedown&quot;,i)})}function a(e,t,n){var r=0;for(var i=0,s=t.cells.length;i&lt;s;i++){if(t.cells[i]==n)break;r+=t.cells[i].rowSpan-1}return n.cellIndex-r}var t=this,n=&quot;table&quot;,r=t.lang(n+&quot;.&quot;),i=&quot;ke-zeroborder&quot;,o=[];t.plugin.table={prop:function(o){var a=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keRows&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.cells+&quot;&lt;/label&gt;&quot;,r.rows+&#x27; &lt;input type=&quot;text&quot; id=&quot;keRows&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;rows&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,r.cols+&#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;cols&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keWidth&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.size+&quot;&lt;/label&gt;&quot;,r.width+&#x27; &lt;input type=&quot;text&quot; id=&quot;keWidth&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;width&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,&#x27;&lt;select name=&quot;widthType&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;%&quot;&gt;&#x27;+r.percent+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;px&quot;&gt;&#x27;+r.px+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt; &amp;nbsp; &quot;,r.height+&#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;height&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,&#x27;&lt;select name=&quot;heightType&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;%&quot;&gt;&#x27;+r.percent+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;px&quot;&gt;&#x27;+r.px+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;kePadding&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.space+&quot;&lt;/label&gt;&quot;,r.padding+&#x27; &lt;input type=&quot;text&quot; id=&quot;kePadding&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;padding&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,r.spacing+&#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;spacing&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keAlign&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.align+&quot;&lt;/label&gt;&quot;,&#x27;&lt;select id=&quot;keAlign&quot; name=&quot;align&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;&quot;&gt;&#x27;+r.alignDefault+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;left&quot;&gt;&#x27;+r.alignLeft+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;center&quot;&gt;&#x27;+r.alignCenter+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;right&quot;&gt;&#x27;+r.alignRight+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keBorder&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.border+&quot;&lt;/label&gt;&quot;,r.borderWidth+&#x27; &lt;input type=&quot;text&quot; id=&quot;keBorder&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;border&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,r.borderColor+&#x27; &lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keBgColor&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.backgroundColor+&quot;&lt;/label&gt;&quot;,&#x27;&lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),f=t.cmd.range.createBookmark(),l=t.createDialog({name:n,width:500,title:t.lang(n),body:a,beforeRemove:function(){S.unbind()},yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=h.val(),s=p.val(),o=d.val(),u=v.val(),a=m.val(),l=g.val(),c=y.val(),T=b.val(),N=w.val(),C=E.val(),k=e(S[0]).html()||&quot;&quot;,L=e(S[1]).html()||&quot;&quot;;if(r==0||!/^\d+$/.test(r)){alert(t.lang(&quot;invalidRows&quot;)),h[0].focus();return}if(s==0||!/^\d+$/.test(s)){alert(t.lang(&quot;invalidRows&quot;)),p[0].focus();return}if(!/^\d*$/.test(o)){alert(t.lang(&quot;invalidWidth&quot;)),d[0].focus();return}if(!/^\d*$/.test(u)){alert(t.lang(&quot;invalidHeight&quot;)),v[0].focus();return}if(!/^\d*$/.test(c)){alert(t.lang(&quot;invalidPadding&quot;)),y[0].focus();return}if(!/^\d*$/.test(T)){alert(t.lang(&quot;invalidSpacing&quot;)),b[0].focus();return}if(!/^\d*$/.test(C)){alert(t.lang(&quot;invalidBorder&quot;)),E[0].focus();return}if(x){o!==&quot;&quot;?x.width(o+a):x.css(&quot;width&quot;,&quot;&quot;),x[0].width!==undefined&amp;&amp;x.removeAttr(&quot;width&quot;),u!==&quot;&quot;?x.height(u+l):x.css(&quot;height&quot;,&quot;&quot;),x[0].height!==undefined&amp;&amp;x.removeAttr(&quot;height&quot;),x.css(&quot;background-color&quot;,L),x[0].bgColor!==undefined&amp;&amp;x.removeAttr(&quot;bgColor&quot;),c!==&quot;&quot;?x[0].cellPadding=c:x.removeAttr(&quot;cellPadding&quot;),T!==&quot;&quot;?x[0].cellSpacing=T:x.removeAttr(&quot;cellSpacing&quot;),N!==&quot;&quot;?x[0].align=N:x.removeAttr(&quot;align&quot;),C!==&quot;&quot;?x.attr(&quot;border&quot;,C):x.removeAttr(&quot;border&quot;),C===&quot;&quot;||C===&quot;0&quot;?x.addClass(i):x.removeClass(i),k!==&quot;&quot;?x.attr(&quot;borderColor&quot;,k):x.removeAttr(&quot;borderColor&quot;),t.hideDialog().focus(),t.cmd.range.moveToBookmark(f),t.cmd.select(),t.addBookmark();return}var A=&quot;&quot;;o!==&quot;&quot;&amp;&amp;(A+=&quot;width:&quot;+o+a+&quot;;&quot;),u!==&quot;&quot;&amp;&amp;(A+=&quot;height:&quot;+u+l+&quot;;&quot;),L!==&quot;&quot;&amp;&amp;(A+=&quot;background-color:&quot;+L+&quot;;&quot;);var O=&quot;&lt;table&quot;;A!==&quot;&quot;&amp;&amp;(O+=&#x27; style=&quot;&#x27;+A+&#x27;&quot;&#x27;),c!==&quot;&quot;&amp;&amp;(O+=&#x27; cellpadding=&quot;&#x27;+c+&#x27;&quot;&#x27;),T!==&quot;&quot;&amp;&amp;(O+=&#x27; cellspacing=&quot;&#x27;+T+&#x27;&quot;&#x27;),N!==&quot;&quot;&amp;&amp;(O+=&#x27; align=&quot;&#x27;+N+&#x27;&quot;&#x27;),C!==&quot;&quot;&amp;&amp;(O+=&#x27; border=&quot;&#x27;+C+&#x27;&quot;&#x27;);if(C===&quot;&quot;||C===&quot;0&quot;)O+=&#x27; class=&quot;&#x27;+i+&#x27;&quot;&#x27;;k!==&quot;&quot;&amp;&amp;(O+=&#x27; bordercolor=&quot;&#x27;+k+&#x27;&quot;&#x27;),O+=&quot;&gt;&quot;;for(var M=0;M&lt;r;M++){O+=&quot;&lt;tr&gt;&quot;;for(var _=0;_&lt;s;_++)O+=&quot;&lt;td&gt;&quot;+(e.IE?&quot;&amp;nbsp;&quot;:&quot;&lt;br /&gt;&quot;)+&quot;&lt;/td&gt;&quot;;O+=&quot;&lt;/tr&gt;&quot;}O+=&quot;&lt;/table&gt;&quot;,e.IE||(O+=&quot;&lt;br /&gt;&quot;),t.insertHtml(O),t.select().hideDialog().focus(),t.addBookmark()}}}),c=l.div,h=e(&#x27;[name=&quot;rows&quot;]&#x27;,c).val(3),p=e(&#x27;[name=&quot;cols&quot;]&#x27;,c).val(2),d=e(&#x27;[name=&quot;width&quot;]&#x27;,c).val(100),v=e(&#x27;[name=&quot;height&quot;]&#x27;,c),m=e(&#x27;[name=&quot;widthType&quot;]&#x27;,c),g=e(&#x27;[name=&quot;heightType&quot;]&#x27;,c),y=e(&#x27;[name=&quot;padding&quot;]&#x27;,c).val(2),b=e(&#x27;[name=&quot;spacing&quot;]&#x27;,c).val(0),w=e(&#x27;[name=&quot;align&quot;]&#x27;,c),E=e(&#x27;[name=&quot;border&quot;]&#x27;,c).val(1),S=e(&quot;.ke-input-color&quot;,c);u(c,S.eq(0)),u(c,S.eq(1)),s(S.eq(0),&quot;#000000&quot;),s(S.eq(1),&quot;&quot;),h[0].focus(),h[0].select();var x;if(o)return;x=t.plugin.getSelectedTable();if(x){h.val(x[0].rows.length),p.val(x[0].rows.length&gt;0?x[0].rows[0].cells.length:0),h.attr(&quot;disabled&quot;,!0),p.attr(&quot;disabled&quot;,!0);var T,N=x[0].style.width||x[0].width,C=x[0].style.height||x[0].height;N!==undefined&amp;&amp;(T=/^(\d+)((?:px|%)*)$/.exec(N))?(d.val(T[1]),m.val(T[2])):d.val(&quot;&quot;),C!==undefined&amp;&amp;(T=/^(\d+)((?:px|%)*)$/.exec(C))&amp;&amp;(v.val(T[1]),g.val(T[2])),y.val(x[0].cellPadding||&quot;&quot;),b.val(x[0].cellSpacing||&quot;&quot;),w.val(x[0].align||&quot;&quot;),E.val(x[0].border===undefined?&quot;&quot;:x[0].border),s(S.eq(0),e.toHex(x.attr(&quot;borderColor&quot;)||&quot;&quot;)),s(S.eq(1),e.toHex(x[0].style.backgroundColor||x[0].bgColor||&quot;&quot;)),d[0].focus(),d[0].select()}},cellprop:function(){var i=[&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keWidth&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.size+&quot;&lt;/label&gt;&quot;,r.width+&#x27; &lt;input type=&quot;text&quot; id=&quot;keWidth&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;width&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,&#x27;&lt;select name=&quot;widthType&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;%&quot;&gt;&#x27;+r.percent+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;px&quot;&gt;&#x27;+r.px+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt; &amp;nbsp; &quot;,r.height+&#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;height&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,&#x27;&lt;select name=&quot;heightType&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;%&quot;&gt;&#x27;+r.percent+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;px&quot;&gt;&#x27;+r.px+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keAlign&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.align+&quot;&lt;/label&gt;&quot;,r.textAlign+&#x27; &lt;select id=&quot;keAlign&quot; name=&quot;textAlign&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;&quot;&gt;&#x27;+r.alignDefault+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;left&quot;&gt;&#x27;+r.alignLeft+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;center&quot;&gt;&#x27;+r.alignCenter+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;right&quot;&gt;&#x27;+r.alignRight+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt; &quot;,r.verticalAlign+&#x27; &lt;select name=&quot;verticalAlign&quot;&gt;&#x27;,&#x27;&lt;option value=&quot;&quot;&gt;&#x27;+r.alignDefault+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;top&quot;&gt;&#x27;+r.alignTop+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;middle&quot;&gt;&#x27;+r.alignMiddle+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;bottom&quot;&gt;&#x27;+r.alignBottom+&quot;&lt;/option&gt;&quot;,&#x27;&lt;option value=&quot;baseline&quot;&gt;&#x27;+r.alignBaseline+&quot;&lt;/option&gt;&quot;,&quot;&lt;/select&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keBorder&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.border+&quot;&lt;/label&gt;&quot;,r.borderWidth+&#x27; &lt;input type=&quot;text&quot; id=&quot;keBorder&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;border&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,r.borderColor+&#x27; &lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,&#x27;&lt;label for=&quot;keBgColor&quot; style=&quot;width:90px;&quot;&gt;&#x27;+r.backgroundColor+&quot;&lt;/label&gt;&quot;,&#x27;&lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;),o=t.cmd.range.createBookmark(),a=t.createDialog({name:n,width:500,title:t.lang(&quot;tablecell&quot;),body:i,beforeRemove:function(){b.unbind()},yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=l.val(),i=c.val(),s=h.val(),u=p.val(),a=d.val(),f=v.val(),E=m.val(),S=g.val(),x=y.val(),T=e(b[0]).html()||&quot;&quot;,N=e(b[1]).html()||&quot;&quot;;if(!/^\d*$/.test(r)){alert(t.lang(&quot;invalidWidth&quot;)),l[0].focus();return}if(!/^\d*$/.test(i)){alert(t.lang(&quot;invalidHeight&quot;)),c[0].focus();return}if(!/^\d*$/.test(x)){alert(t.lang(&quot;invalidBorder&quot;)),y[0].focus();return}w.css({width:r!==&quot;&quot;?r+s:&quot;&quot;,height:i!==&quot;&quot;?i+u:&quot;&quot;,&quot;background-color&quot;:N,&quot;text-align&quot;:E,&quot;vertical-align&quot;:S,&quot;border-width&quot;:x,&quot;border-style&quot;:x!==&quot;&quot;?&quot;solid&quot;:&quot;&quot;,&quot;border-color&quot;:T}),t.hideDialog().focus(),t.cmd.range.moveToBookmark(o),t.cmd.select(),t.addBookmark()}}}),f=a.div,l=e(&#x27;[name=&quot;width&quot;]&#x27;,f).val(100),c=e(&#x27;[name=&quot;height&quot;]&#x27;,f),h=e(&#x27;[name=&quot;widthType&quot;]&#x27;,f),p=e(&#x27;[name=&quot;heightType&quot;]&#x27;,f),d=e(&#x27;[name=&quot;padding&quot;]&#x27;,f).val(2),v=e(&#x27;[name=&quot;spacing&quot;]&#x27;,f).val(0),m=e(&#x27;[name=&quot;textAlign&quot;]&#x27;,f),g=e(&#x27;[name=&quot;verticalAlign&quot;]&#x27;,f),y=e(&#x27;[name=&quot;border&quot;]&#x27;,f).val(1),b=e(&quot;.ke-input-color&quot;,f);u(f,b.eq(0)),u(f,b.eq(1)),s(b.eq(0),&quot;#000000&quot;),s(b.eq(1),&quot;&quot;),l[0].focus(),l[0].select();var w=t.plugin.getSelectedCell(),E,S=w[0].style.width||w[0].width||&quot;&quot;,x=w[0].style.height||w[0].height||&quot;&quot;;(E=/^(\d+)((?:px|%)*)$/.exec(S))?(l.val(E[1]),h.val(E[2])):l.val(&quot;&quot;);if(E=/^(\d+)((?:px|%)*)$/.exec(x))c.val(E[1]),p.val(E[2]);m.val(w[0].style.textAlign||&quot;&quot;),g.val(w[0].style.verticalAlign||&quot;&quot;);var T=w[0].style.borderWidth||&quot;&quot;;T&amp;&amp;(T=parseInt(T)),y.val(T),s(b.eq(0),e.toHex(w[0].style.borderColor||&quot;&quot;)),s(b.eq(1),e.toHex(w[0].style.backgroundColor||&quot;&quot;)),l[0].focus(),l[0].select()},insert:function(){this.prop(!0)},&quot;delete&quot;:function(){var e=t.plugin.getSelectedTable();t.cmd.range.setStartBefore(e[0]).collapse(!0),t.cmd.select(),e.remove(),t.addBookmark()},colinsert:function(n){var r=t.plugin.getSelectedTable()[0],i=t.plugin.getSelectedRow()[0],s=t.plugin.getSelectedCell()[0],o=s.cellIndex+n;o+=r.rows[0].cells.length-i.cells.length;for(var u=0,f=r.rows.length;u&lt;f;u++){var l=r.rows[u],c=l.insertCell(o);c.innerHTML=e.IE?&quot;&quot;:&quot;&lt;br /&gt;&quot;,o=a(r,l,c)}t.cmd.range.selectNodeContents(s).collapse(!0),t.cmd.select(),t.addBookmark()},colinsertleft:function(){this.colinsert(0)},colinsertright:function(){this.colinsert(1)},rowinsert:function(n){var r=t.plugin.getSelectedTable()[0],i=t.plugin.getSelectedRow()[0],s=t.plugin.getSelectedCell()[0],o=i.rowIndex;n===1&amp;&amp;(o=i.rowIndex+(s.rowSpan-1)+n);var u=r.insertRow(o);for(var a=0,f=i.cells.length;a&lt;f;a++){i.cells[a].rowSpan&gt;1&amp;&amp;(f-=i.cells[a].rowSpan-1);var l=u.insertCell(a);n===1&amp;&amp;i.cells[a].colSpan&gt;1&amp;&amp;(l.colSpan=i.cells[a].colSpan),l.innerHTML=e.IE?&quot;&quot;:&quot;&lt;br /&gt;&quot;}for(var c=o;c&gt;=0;c--){var h=r.rows[c].cells;if(h.length&gt;a){for(var p=s.cellIndex;p&gt;=0;p--)h[p].rowSpan&gt;1&amp;&amp;(h[p].rowSpan+=1);break}}t.cmd.range.selectNodeContents(s).collapse(!0),t.cmd.select(),t.addBookmark()},rowinsertabove:function(){this.rowinsert(0)},rowinsertbelow:function(){this.rowinsert(1)},rowmerge:function(){var e=t.plugin.getSelectedTable()[0],n=t.plugin.getSelectedRow()[0],r=t.plugin.getSelectedCell()[0],i=n.rowIndex,s=i+r.rowSpan,o=e.rows[s];if(e.rows.length&lt;=s)return;var u=r.cellIndex;if(o.cells.length&lt;=u)return;var a=o.cells[u];if(r.colSpan!==a.colSpan)return;r.rowSpan+=a.rowSpan,o.deleteCell(u),t.cmd.range.selectNodeContents(r).collapse(!0),t.cmd.select(),t.addBookmark()},colmerge:function(){var e=t.plugin.getSelectedTable()[0],n=t.plugin.getSelectedRow()[0],r=t.plugin.getSelectedCell()[0],i=n.rowIndex,s=r.cellIndex,o=s+1;if(n.cells.length&lt;=o)return;var u=n.cells[o];if(r.rowSpan!==u.rowSpan)return;r.colSpan+=u.colSpan,n.deleteCell(o),t.cmd.range.selectNodeContents(r).collapse(!0),t.cmd.select(),t.addBookmark()},rowsplit:function(){var n=t.plugin.getSelectedTable()[0],r=t.plugin.getSelectedRow()[0],i=t.plugin.getSelectedCell()[0],s=r.rowIndex;if(i.rowSpan===1)return;var o=a(n,r,i);for(var u=1,f=i.rowSpan;u&lt;f;u++){var l=n.rows[s+u],c=l.insertCell(o);i.colSpan&gt;1&amp;&amp;(c.colSpan=i.colSpan),c.innerHTML=e.IE?&quot;&quot;:&quot;&lt;br /&gt;&quot;,o=a(n,l,c)}e(i).removeAttr(&quot;rowSpan&quot;),t.cmd.range.selectNodeContents(i).collapse(!0),t.cmd.select(),t.addBookmark()},colsplit:function(){var n=t.plugin.getSelectedTable()[0],r=t.plugin.getSelectedRow()[0],i=t.plugin.getSelectedCell()[0],s=i.cellIndex;if(i.colSpan===1)return;for(var o=1,u=i.colSpan;o&lt;u;o++){var a=r.insertCell(s+o);i.rowSpan&gt;1&amp;&amp;(a.rowSpan=i.rowSpan),a.innerHTML=e.IE?&quot;&quot;:&quot;&lt;br /&gt;&quot;}e(i).removeAttr(&quot;colSpan&quot;),t.cmd.range.selectNodeContents(i).collapse(!0),t.cmd.select(),t.addBookmark()},coldelete:function(){var n=t.plugin.getSelectedTable()[0],r=t.plugin.getSelectedRow()[0],i=t.plugin.getSelectedCell()[0],s=i.cellIndex;for(var o=0,u=n.rows.length;o&lt;u;o++){var a=n.rows[o],f=a.cells[s];f.colSpan&gt;1?(f.colSpan-=1,f.colSpan===1&amp;&amp;e(f).removeAttr(&quot;colSpan&quot;)):a.deleteCell(s),f.rowSpan&gt;1&amp;&amp;(o+=f.rowSpan-1)}r.cells.length===0?(t.cmd.range.setStartBefore(n).collapse(!0),t.cmd.select(),e(n).remove()):t.cmd.selection(!0),t.addBookmark()},rowdelete:function(){var n=t.plugin.getSelectedTable()[0],r=t.plugin.getSelectedRow()[0],i=t.plugin.getSelectedCell()[0],s=r.rowIndex;for(var o=i.rowSpan-1;o&gt;=0;o--)n.deleteRow(s+o);n.rows.length===0?(t.cmd.range.setStartBefore(n).collapse(!0),t.cmd.select(),e(n).remove()):t.cmd.selection(!0),t.addBookmark()}},t.clickToolbar(n,t.plugin.table.prop)}),KindEditor.plugin(&quot;template&quot;,function(e){function s(t){return i+t+&quot;?ver=&quot;+encodeURIComponent(e.DEBUG?e.TIME:e.VERSION)}var t=this,n=&quot;template&quot;,r=t.lang(n+&quot;.&quot;),i=t.pluginsPath+n+&quot;/html/&quot;;t.clickToolbar(n,function(){var r=t.lang(n+&quot;.&quot;),i=[&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-header&quot;&gt;&#x27;,&#x27;&lt;div class=&quot;ke-left&quot;&gt;&#x27;,r.selectTemplate+&quot; &lt;select&gt;&quot;];e.each(r.fileList,function(e,t){i.push(&#x27;&lt;option value=&quot;&#x27;+e+&#x27;&quot;&gt;&#x27;+t+&quot;&lt;/option&gt;&quot;)}),html=[i.join(&quot;&quot;),&quot;&lt;/select&gt;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-right&quot;&gt;&#x27;,&#x27;&lt;input type=&quot;checkbox&quot; id=&quot;keReplaceFlag&quot; name=&quot;replaceFlag&quot; value=&quot;1&quot; /&gt; &lt;label for=&quot;keReplaceFlag&quot;&gt;&#x27;+r.replaceContent+&quot;&lt;/label&gt;&quot;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;div class=&quot;ke-clearfix&quot;&gt;&lt;/div&gt;&#x27;,&quot;&lt;/div&gt;&quot;,&#x27;&lt;iframe class=&quot;ke-textarea&quot; frameborder=&quot;0&quot; style=&quot;width:458px;height:260px;background-color:#FFF;&quot;&gt;&lt;/iframe&gt;&#x27;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;);var o=t.createDialog({name:n,width:500,title:t.lang(n),body:html,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=e.iframeDoc(f);t[a[0].checked?&quot;html&quot;:&quot;insertHtml&quot;](r.body.innerHTML).hideDialog().focus()}}}),u=e(&quot;select&quot;,o.div),a=e(&#x27;[name=&quot;replaceFlag&quot;]&#x27;,o.div),f=e(&quot;iframe&quot;,o.div);a[0].checked=!0,f.attr(&quot;src&quot;,s(u.val())),u.change(function(){f.attr(&quot;src&quot;,s(this.value))})})}),KindEditor.plugin(&quot;wordpaste&quot;,function(e){var t=this,n=&quot;wordpaste&quot;;t.clickToolbar(n,function(){var r=t.lang(n+&quot;.&quot;),i=&#x27;&lt;div style=&quot;padding:10px 20px;&quot;&gt;&lt;div style=&quot;margin-bottom:10px;&quot;&gt;&#x27;+r.comment+&quot;&lt;/div&gt;&quot;+&#x27;&lt;iframe class=&quot;ke-textarea&quot; frameborder=&quot;0&quot; style=&quot;width:408px;height:260px;&quot;&gt;&lt;/iframe&gt;&#x27;+&quot;&lt;/div&gt;&quot;,s=t.createDialog({name:n,width:450,title:t.lang(n),body:i,yesBtn:{name:t.lang(&quot;yes&quot;),click:function(n){var r=a.body.innerHTML;r=e.clearMsWord(r,t.filterMode?t.htmlTags:e.options.htmlTags),t.insertHtml(r).hideDialog().focus()}}}),o=s.div,u=e(&quot;iframe&quot;,o),a=e.iframeDoc(u);e.IE||(a.designMode=&quot;on&quot;),a.open(),a.write(&quot;&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;WordPaste&lt;/title&gt;&lt;/head&gt;&quot;),a.write(&#x27;&lt;body style=&quot;background-color:#FFF;font-size:12px;margin:2px;&quot;&gt;&#x27;),e.IE||a.write(&quot;&lt;br /&gt;&quot;),a.write(&quot;&lt;/body&gt;&lt;/html&gt;&quot;),a.close(),e.IE&amp;&amp;(a.body.contentEditable=&quot;true&quot;),u[0].contentWindow.focus()})});
    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
