<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>..\node_modules\alienjs\src\index.js - SmartDoc</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartdoc">
             
            <img alt="SmartDoc" src="../assets/css/logo.png" title="SmartDoc">
            
                SmartDoc
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartdoc">Home</a>
                    </li>
                    
                    <li><a href="/">Document</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartdoc">About</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/273.html">273</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/alienjs.html">alienjs</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/window.require.html">window.require</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Countdown.html">Countdown</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Date.html">Date</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery.html">jquery</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.transitionEnd.html">jquery.transitionEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.support.transition.html">jquery.support.transition</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.animationEnd.html">jquery.animationEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery-ui.html">jquery-ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.ajaxPanel.html">jquery.ajaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.dialog.html">jquery.dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Array.html">Array</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.browserLowVersion.html">jquery.browserLowVersion</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.confirm.html">jquery.confirm</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.alert.html">jquery.alert</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ng.html">ng</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMock.html">ngMock</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMockE2E.html">ngMockE2E</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ui.html">ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/AjaxPanel.html">AjaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Date.Dialog.html">Date.Dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/WebUploader.html">WebUploader</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Base.html">Base</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Mediator.html">Mediator</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/options.Uploader.html">options.Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.File.html">File.File</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.Queue.html">File.Queue</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Uploader.html">Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/window.html">window</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <!--     <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>

 -->
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>..\node_modules\alienjs\src\index.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums" id='src_code'>
/**
 * @descrption js文件加载
 * @dependencies  Deferred.js , Ajax.js
 * http://www.alienjs.net
 * */


;(function ( window ) {

    var Ajax = function(){
        this.deferred = window.Deferred &amp;&amp; Deferred();
        this.XMLHttpReq = null;
    }

    Ajax.prototype.createXMLHttpRequest = function(){
        try {
            this.XMLHttpReq = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);//IE高版本创建XMLHTTP
        }
        catch(E) {
            try {
                this.XMLHttpReq  = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);//IE低版本创建XMLHTTP
            }
            catch(E) {
                this.XMLHttpReq  = new XMLHttpRequest();//兼容非IE浏览器，直接创建XMLHTTP对象
            }
        }
        return this;
    }
    Ajax.prototype.get = function( url , callback  , sync , timeout ){
        return this.sendAjaxRequest( url ,&#x27;get&#x27;, callback  , sync  )
    }
    Ajax.prototype.post = function( url , callback  , sync , timeout ){
        return this.sendAjaxRequest( url ,&#x27;post&#x27;, callback  , sync  )
    }
    Ajax.prototype.sendAjaxRequest = function( url ,type , callback , sync  , timeout ){
        var callbackFun = {};

        if( typeof  callback == &#x27;function&#x27;){
            callbackFun.success = callback ;
        }
        else if( typeof  callback == &#x27;object&#x27; ){
            callbackFun = callback;
        }

        var ajax = this.createXMLHttpRequest();      //创建XMLHttpRequest对象
        var XMLHttpReq = this.XMLHttpReq;
        XMLHttpReq.open( type || &#x27;post&#x27; , url, sync == null ?  true : sync );
        var timer = setTimeout(function(){
            if( XMLHttpReq.readyState != 4){
                if(callbackFun.error){
                    callbackFun.error.call( this ,XMLHttpReq ,XMLHttpReq.readyState );
                }
                this.deferred ?  this.deferred.rejectWith(XMLHttpReq ,XMLHttpReq.readyState) : this;
            }
        }, timeout || 5000);
        XMLHttpReq.onreadystatechange = function(){
            if (XMLHttpReq.readyState == 4) {
                if (XMLHttpReq.status == 200) {
                    callbackFun.success &amp;&amp; callbackFun.success.call( this , XMLHttpReq.responseText );
                    this.deferred ?  this.deferred.resolveWith( XMLHttpReq.responseText ) : this;
                }
                else{
                    callbackFun.error &amp;&amp; callbackFun.error.call( this ,XMLHttpReq ,XMLHttpReq.readyState ,XMLHttpReq.status);
                    this.deferred ?  this.deferred.rejectWith(XMLHttpReq ,XMLHttpReq.readyState ,XMLHttpReq.status) : this;
                }
                clearTimeout(timer);
            }
        }; //指定响应函数
        XMLHttpReq.send(null);
        return this.deferred ?  this.deferred.promise() : this;
    }

    var config ;
    var js = document.scripts , me = js[js.length-1] ;
    var root = me.src.substring(0,js[js.length-1].src.lastIndexOf(&quot;/&quot;)+1);

    var ext = function (url){
        return url.substring( url.lastIndexOf(&#x27;.&#x27;) + 1);
    }

    function addEvent ( elem , event , fun ){
        if(elem.addEventListener){ // Mozilla, Netscape, Firefox
            elem.addEventListener( event,  fun , false);
        } else { // IE
            if( ( event == &#x27;error&#x27; || event == &#x27;load&#x27;) &amp;&amp; (elem.tagName == &#x27;SCRIPT&#x27; ||  elem.tagName == &#x27;LINK&#x27;) ){

                if( !elem.events )
                    elem.events = {};

                elem.events[event] = fun ;

                var timer = setTimeout(function(){
                    var r = elem.readyState;
                    if (  r != &#x27;loaded&#x27; ||  r != &#x27;complete&#x27;) {
                        elem.onreadystatechange = null;
                        elem.events[&#x27;error&#x27;] &amp;&amp; elem.events[&#x27;error&#x27;]();
                    }
                }, config.timeout );

                elem.onreadystatechange = function() {
                    var r = elem.readyState;
                    if ( r === &#x27;loaded&#x27; ||  r === &#x27;complete&#x27;) {
                        elem.onreadystatechange = null;
                        elem.events[&#x27;load&#x27;] &amp;&amp; elem.events[&#x27;load&#x27;]();
                        clearTimeout(timer);
                    }
                };
            }
            else
                elem.attachEvent( &#x27;on&#x27; + event, fun);
        }
    }

    var Module = function( options ){
        options = options || {};
        return {
            id : options.id ,
            root : options.root,
            exports : options.exports || {},
          //  deferred : Deferred(),
            dependencies : options.dependencies || [],
            extend : function( o1 , o2 ){
                for( var i in o2 ){
                    o1[i] = o2[i]
                }
                return o1;
            }
        }
    }

    var modules = {} ;
    window.define = function( id , fn ){
        if( !modules[ id ] ){
            modules[ id ] = new  Module({
                id : id ,
                root : root
            })
        }
        modules[ id ].fn = fn ;

        return modules[ id ];
    }


    /**
     * require 方法 ie7 ie8 载入css样式时会重写在此样式之后已有的link标签中的样式。ie 9 以上则相反。
     * @class require
     * @module alienjs
     * @namespace window
     * @param url {string} 引入地址
     * @param callback {function} 异步时回调
     */
     window.require = function( url , callback ){
        if( config.dependencies[ url ] ){
            url =  config.dependencies[ url ] ;
        }
        var id =  url ;
        if( !modules[ id ] ){

            if( ext(url) == &#x27;js&#x27;){
                if( url.indexOf(&#x27;http&#x27;) != -1 ) {
                    var script = document.createElement( &#x27;script&#x27; );
                    script.type = &quot;text/javascript&quot;;
                    script.charset =&#x27;utf-8&#x27;;
                    script.src = url;
                    document.getElementsByTagName(&#x27;head&#x27;)[0].appendChild( script );
                    define( id );
                    addEvent( script , &#x27;load&#x27;,  function(e){
                        var module = modules[ id ];
                        var res = module.fn &amp;&amp; module.fn( module.exports , module );
                        callback &amp;&amp; callback.call( res , res ) ;
                    })
                    addEvent( script , &#x27;error&#x27;,  function(e){
                        delete modules[id]  ;
                    })
                }
                else{
                    function  ajaxCallback( data , dependencies ){
                        data = &#x27;define(&quot;&#x27;+ id +&#x27;&quot;,function( exports ,module ){\n &#x27; + data + &#x27; \n  return  module.extend(  module.exports ,exports ) ; \n;})&#x27;
                        var fn = new Function( data );
                        fn();
                        var module = modules[ id ];
                        module.exports = module.fn &amp;&amp; module.fn( module.exports , module );
                    }
                    if( callback ){
                        var ajax = new Ajax();
                        ajax.get( id , {
                            success : function( data ){
                                if( !/^define\(/.test(data)) {
                                    ajaxCallback(data);
                                }
                                callback &amp;&amp; callback.call(module.exports);
                            },
                            error : function(){
                                delete modules[id]  ;
                            }
                        } , true , config.timeout );

                    }
                    else{
                        var ajax = new Ajax();
                        ajax.get( id , {
                            success : function( data ){
                                if( !/^define\(/.test(data)){

                                     var dependencies = data.match(/require\(.*\)/g) || [] ;

                                     for(var i = 0 ; i &lt; dependencies.length ; i++){
                                        dependencies[i] = dependencies[i].replace(&#x27;require(\&#x27;&#x27;,&quot;&quot;).replace(&#x27;\&#x27;)&#x27;,&quot;&quot;)
                                     }
                                     // dependencies = dependencies.length ? &#x27;[&quot;&#x27;+ dependencies.join(&#x27;&quot;,&quot;&#x27;) + &#x27;&quot;]&#x27; : &#x27;[]&#x27; ;
                                    ajaxCallback( data , dependencies);
                                }
                            },
                            error : function(){
                                delete modules[id]  ;
                            }
                        }, false , config.timeout );
                    }
                }
            }
            else if( ext(url) == &#x27;css&#x27; ){
                var csslink = document.createElement( &#x27;link&#x27; );
                csslink.type = &#x27;text/css&#x27;;
                csslink.rel = &quot;stylesheet&quot;;
                csslink.charset = &#x27;utf-8&#x27;;
                csslink.href = id;
               // document.getElementsByTagName(&#x27;head&#x27;)[0].insertBefore(csslink, me );
                document.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(csslink);
                define( id );
               /* addEvent( csslink , &#x27;load&#x27;,  function(e){
                })*/
                addEvent( csslink , &#x27;error&#x27;,  function(e){
                    delete modules[id]  ;
                })
            }
        }
        else{
            var module = modules[ id ];
            if( module )
                module.exports = module.fn &amp;&amp; module.fn( module.exports , module );

        }
         return  modules[ id ] ? modules[ id ].exports : {};
    }

    var onload = function(){
        new Ajax().get( root + &#x27;package.json&#x27; , function( data ){
            var data = new Function(&#x27;return &#x27; + data )();
            config = data ;
            if( config.root ) root = config.root;
            if( data.debug ){
                var js = [], css = [], jsData =   data.combo + &quot;??path=&quot; + root , cssData =  data.combo + &quot;??path=&quot; + root;

                for( var i in data.dependencies ){
                    if( ext( data.dependencies[i] ) == &#x27;js&#x27; )
                        js.push( data.dependencies[i] );
                    else if( ext( data.dependencies[i]) == &#x27;css&#x27; )
                        css.push( data.dependencies[i] );
                }

                if(css.length){
                    cssData += &quot;&amp;f=&quot; + css.join(&#x27;,&#x27;);
                    var csslink = document.createElement( &#x27;link&#x27; );
                    csslink.type = &#x27;text/css&#x27;;
                    csslink.rel = &quot;stylesheet&quot;;
                    csslink.charset = &#x27;utf-8&#x27;;
                    csslink.href = cssData;
                   // document.getElementsByTagName(&#x27;head&#x27;)[0].insertBefore(csslink, me );
                    document.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(csslink);
                }

                if(js.length){
                     jsData += &quot;&amp;f=&quot; + js.join(&#x27;,&#x27;);
                     /*var script = document.createElement( &#x27;script&#x27; );
                     script.type = &quot;text/javascript&quot;;
                     script.charset =&#x27;utf-8&#x27;;
                     script.src = jsData;
                     document.head.appendChild( script )*/
                    new Ajax().get( jsData , function( data ){
                        new Function( data )();
                    } ,false)
                }

                return this;
            }

        }, false) ;

    }

    onload();

    (function () {
        var ie = !!(window.attachEvent &amp;&amp; !window.opera);
        var wk = /webkit\/(\d+)/i.test(navigator.userAgent) &amp;&amp; (RegExp.$1 &lt; 525);
        var fn = [];
        var run = function () { for (var i = 0; i &lt; fn.length; i++) fn[i](); };
        var d = document;
        d.ready = function (f) {
            if (!ie &amp;&amp; !wk &amp;&amp; d.addEventListener)
                return d.addEventListener(&#x27;DOMContentLoaded&#x27;, f, false);
            if (fn.push(f) &gt; 1) return;
            if (ie)
                (function () {
                    try { d.documentElement.doScroll(&#x27;left&#x27;); run(); }
                    catch (err) { setTimeout(arguments.callee, 0); }
                })();
            else if (wk)
                var t = setInterval(function () {
                    if (/^(loaded|complete)$/.test(d.readyState))
                        clearInterval(t), run();
                }, 0);
        };
    })();

    document.ready(function(){
        me.getAttribute(&#x27;data-global&#x27;) &amp;&amp; require( me.getAttribute(&#x27;data-global&#x27;) );
        me.getAttribute(&#x27;data-main&#x27;) &amp;&amp; require( me.getAttribute(&#x27;data-main&#x27;) );
    });



})( window );

    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
