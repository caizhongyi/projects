<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>..\node_modules\backbone\backbone_demo\scripts\libs\kindeditor\plugins\table\table.js - SmartDoc</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartdoc">
             
            <img alt="SmartDoc" src="../assets/css/logo.png" title="SmartDoc">
            
                SmartDoc
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartdoc">Home</a>
                    </li>
                    
                    <li><a href="/">Document</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartdoc">About</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/273.html">273</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/alienjs.html">alienjs</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/window.require.html">window.require</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Countdown.html">Countdown</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Date.html">Date</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery.html">jquery</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.transitionEnd.html">jquery.transitionEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.support.transition.html">jquery.support.transition</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.animationEnd.html">jquery.animationEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery-ui.html">jquery-ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.ajaxPanel.html">jquery.ajaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.dialog.html">jquery.dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Array.html">Array</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.browserLowVersion.html">jquery.browserLowVersion</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.confirm.html">jquery.confirm</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.alert.html">jquery.alert</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ng.html">ng</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMock.html">ngMock</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMockE2E.html">ngMockE2E</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ui.html">ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/AjaxPanel.html">AjaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Date.Dialog.html">Date.Dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/WebUploader.html">WebUploader</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Base.html">Base</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Mediator.html">Mediator</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/options.Uploader.html">options.Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.File.html">File.File</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.Queue.html">File.Queue</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Uploader.html">Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/window.html">window</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <!--     <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>

 -->
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>..\node_modules\backbone\backbone_demo\scripts\libs\kindeditor\plugins\table\table.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums" id='src_code'>
/*******************************************************************************
* KindEditor - WYSIWYG HTML Editor for Internet
* Copyright (C) 2006-2011 kindsoft.net
*
* @author Roddy &lt;luolonghao@gmail.com&gt;
* @site http://www.kindsoft.net/
* @licence http://www.kindsoft.net/license.php
*******************************************************************************/

KindEditor.plugin(&#x27;table&#x27;, function(K) {
	var self = this, name = &#x27;table&#x27;, lang = self.lang(name + &#x27;.&#x27;), zeroborder = &#x27;ke-zeroborder&#x27;;
	// 设置颜色
	function _setColor(box, color) {
		color = color.toUpperCase();
		box.css(&#x27;background-color&#x27;, color);
		box.css(&#x27;color&#x27;, color === &#x27;#000000&#x27; ? &#x27;#FFFFFF&#x27; : &#x27;#000000&#x27;);
		box.html(color);
	}
	// 初始化取色器
	var pickerList = [];
	function _initColorPicker(dialogDiv, colorBox) {
		colorBox.bind(&#x27;click,mousedown&#x27;, function(e){
			e.stopPropagation();
		});
		function removePicker() {
			K.each(pickerList, function() {
				this.remove();
			});
			pickerList = [];
			K(document).unbind(&#x27;click,mousedown&#x27;, removePicker);
			dialogDiv.unbind(&#x27;click,mousedown&#x27;, removePicker);
		}
		colorBox.click(function(e) {
			removePicker();
			var box = K(this),
				pos = box.pos();
			var picker = K.colorpicker({
				x : pos.x,
				y : pos.y + box.height(),
				z : 811214,
				selectedColor : K(this).html(),
				colors : self.colorTable,
				noColor : self.lang(&#x27;noColor&#x27;),
				shadowMode : self.shadowMode,
				click : function(color) {
					_setColor(box, color);
					removePicker();
				}
			});
			pickerList.push(picker);
			K(document).bind(&#x27;click,mousedown&#x27;, removePicker);
			dialogDiv.bind(&#x27;click,mousedown&#x27;, removePicker);
		});
	}
	// 取得下一行cell的index
	function _getCellIndex(table, row, cell) {
		var rowSpanCount = 0;
		for (var i = 0, len = row.cells.length; i &lt; len; i++) {
			if (row.cells[i] == cell) {
				break;
			}
			rowSpanCount += row.cells[i].rowSpan - 1;
		}
		return cell.cellIndex - rowSpanCount;
	}
	self.plugin.table = {
		//insert or modify table
		prop : function(isInsert) {
			var html = [
				&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,
				//rows, cols
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keRows&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.cells + &#x27;&lt;/label&gt;&#x27;,
				lang.rows + &#x27; &lt;input type=&quot;text&quot; id=&quot;keRows&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;rows&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				lang.cols + &#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;cols&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//width, height
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keWidth&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.size + &#x27;&lt;/label&gt;&#x27;,
				lang.width + &#x27; &lt;input type=&quot;text&quot; id=&quot;keWidth&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;width&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				&#x27;&lt;select name=&quot;widthType&quot;&gt;&#x27;,
				&#x27;&lt;option value=&quot;%&quot;&gt;&#x27; + lang.percent + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;px&quot;&gt;&#x27; + lang.px + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;/select&gt; &amp;nbsp; &#x27;,
				lang.height + &#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;height&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				&#x27;&lt;select name=&quot;heightType&quot;&gt;&#x27;,
				&#x27;&lt;option value=&quot;%&quot;&gt;&#x27; + lang.percent + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;px&quot;&gt;&#x27; + lang.px + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;/select&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//space, padding
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;kePadding&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.space + &#x27;&lt;/label&gt;&#x27;,
				lang.padding + &#x27; &lt;input type=&quot;text&quot; id=&quot;kePadding&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;padding&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				lang.spacing + &#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;spacing&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//align
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keAlign&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.align + &#x27;&lt;/label&gt;&#x27;,
				&#x27;&lt;select id=&quot;keAlign&quot; name=&quot;align&quot;&gt;&#x27;,
				&#x27;&lt;option value=&quot;&quot;&gt;&#x27; + lang.alignDefault + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;left&quot;&gt;&#x27; + lang.alignLeft + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;center&quot;&gt;&#x27; + lang.alignCenter + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;right&quot;&gt;&#x27; + lang.alignRight + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;/select&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//border
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keBorder&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.border + &#x27;&lt;/label&gt;&#x27;,
				lang.borderWidth + &#x27; &lt;input type=&quot;text&quot; id=&quot;keBorder&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;border&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				lang.borderColor + &#x27; &lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//background color
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keBgColor&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.backgroundColor + &#x27;&lt;/label&gt;&#x27;,
				&#x27;&lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;
			].join(&#x27;&#x27;);
			var bookmark = self.cmd.range.createBookmark();
			var dialog = self.createDialog({
				name : name,
				width : 500,
				title : self.lang(name),
				body : html,
				beforeRemove : function() {
					colorBox.unbind();
				},
				yesBtn : {
					name : self.lang(&#x27;yes&#x27;),
					click : function(e) {
						var rows = rowsBox.val(),
							cols = colsBox.val(),
							width = widthBox.val(),
							height = heightBox.val(),
							widthType = widthTypeBox.val(),
							heightType = heightTypeBox.val(),
							padding = paddingBox.val(),
							spacing = spacingBox.val(),
							align = alignBox.val(),
							border = borderBox.val(),
							borderColor = K(colorBox[0]).html() || &#x27;&#x27;,
							bgColor = K(colorBox[1]).html() || &#x27;&#x27;;
						if (rows == 0 || !/^\d+$/.test(rows)) {
							alert(self.lang(&#x27;invalidRows&#x27;));
							rowsBox[0].focus();
							return;
						}
						if (cols == 0 || !/^\d+$/.test(cols)) {
							alert(self.lang(&#x27;invalidRows&#x27;));
							colsBox[0].focus();
							return;
						}
						if (!/^\d*$/.test(width)) {
							alert(self.lang(&#x27;invalidWidth&#x27;));
							widthBox[0].focus();
							return;
						}
						if (!/^\d*$/.test(height)) {
							alert(self.lang(&#x27;invalidHeight&#x27;));
							heightBox[0].focus();
							return;
						}
						if (!/^\d*$/.test(padding)) {
							alert(self.lang(&#x27;invalidPadding&#x27;));
							paddingBox[0].focus();
							return;
						}
						if (!/^\d*$/.test(spacing)) {
							alert(self.lang(&#x27;invalidSpacing&#x27;));
							spacingBox[0].focus();
							return;
						}
						if (!/^\d*$/.test(border)) {
							alert(self.lang(&#x27;invalidBorder&#x27;));
							borderBox[0].focus();
							return;
						}
						//modify table
						if (table) {
							if (width !== &#x27;&#x27;) {
								table.width(width + widthType);
							} else {
								table.css(&#x27;width&#x27;, &#x27;&#x27;);
							}
							if (table[0].width !== undefined) {
								table.removeAttr(&#x27;width&#x27;);
							}
							if (height !== &#x27;&#x27;) {
								table.height(height + heightType);
							} else {
								table.css(&#x27;height&#x27;, &#x27;&#x27;);
							}
							if (table[0].height !== undefined) {
								table.removeAttr(&#x27;height&#x27;);
							}
							table.css(&#x27;background-color&#x27;, bgColor);
							if (table[0].bgColor !== undefined) {
								table.removeAttr(&#x27;bgColor&#x27;);
							}
							if (padding !== &#x27;&#x27;) {
								table[0].cellPadding = padding;
							} else {
								table.removeAttr(&#x27;cellPadding&#x27;);
							}
							if (spacing !== &#x27;&#x27;) {
								table[0].cellSpacing = spacing;
							} else {
								table.removeAttr(&#x27;cellSpacing&#x27;);
							}
							if (align !== &#x27;&#x27;) {
								table[0].align = align;
							} else {
								table.removeAttr(&#x27;align&#x27;);
							}
							if (border !== &#x27;&#x27;) {
								table.attr(&#x27;border&#x27;, border);
							} else {
								table.removeAttr(&#x27;border&#x27;);
							}
							if (border === &#x27;&#x27; || border === &#x27;0&#x27;) {
								table.addClass(zeroborder);
							} else {
								table.removeClass(zeroborder);
							}
							if (borderColor !== &#x27;&#x27;) {
								table.attr(&#x27;borderColor&#x27;, borderColor);
							} else {
								table.removeAttr(&#x27;borderColor&#x27;);
							}
							self.hideDialog().focus();
							self.cmd.range.moveToBookmark(bookmark);
							self.cmd.select();
							self.addBookmark();
							return;
						}
						//insert new table
						var style = &#x27;&#x27;;
						if (width !== &#x27;&#x27;) {
							style += &#x27;width:&#x27; + width + widthType + &#x27;;&#x27;;
						}
						if (height !== &#x27;&#x27;) {
							style += &#x27;height:&#x27; + height + heightType + &#x27;;&#x27;;
						}
						if (bgColor !== &#x27;&#x27;) {
							style += &#x27;background-color:&#x27; + bgColor + &#x27;;&#x27;;
						}
						var html = &#x27;&lt;table&#x27;;
						if (style !== &#x27;&#x27;) {
							html += &#x27; style=&quot;&#x27; + style + &#x27;&quot;&#x27;;
						}
						if (padding !== &#x27;&#x27;) {
							html += &#x27; cellpadding=&quot;&#x27; + padding + &#x27;&quot;&#x27;;
						}
						if (spacing !== &#x27;&#x27;) {
							html += &#x27; cellspacing=&quot;&#x27; + spacing + &#x27;&quot;&#x27;;
						}
						if (align !== &#x27;&#x27;) {
							html += &#x27; align=&quot;&#x27; + align + &#x27;&quot;&#x27;;
						}
						if (border !== &#x27;&#x27;) {
							html += &#x27; border=&quot;&#x27; + border + &#x27;&quot;&#x27;;
						}
						if (border === &#x27;&#x27; || border === &#x27;0&#x27;) {
							html += &#x27; class=&quot;&#x27; + zeroborder + &#x27;&quot;&#x27;;
						}
						if (borderColor !== &#x27;&#x27;) {
							html += &#x27; bordercolor=&quot;&#x27; + borderColor + &#x27;&quot;&#x27;;
						}
						html += &#x27;&gt;&#x27;;
						for (var i = 0; i &lt; rows; i++) {
							html += &#x27;&lt;tr&gt;&#x27;;
							for (var j = 0; j &lt; cols; j++) {
								html += &#x27;&lt;td&gt;&#x27; + (K.IE ? &#x27;&amp;nbsp;&#x27; : &#x27;&lt;br /&gt;&#x27;) + &#x27;&lt;/td&gt;&#x27;;
							}
							html += &#x27;&lt;/tr&gt;&#x27;;
						}
						html += &#x27;&lt;/table&gt;&#x27;;
						if (!K.IE) {
							html += &#x27;&lt;br /&gt;&#x27;;
						}
						self.insertHtml(html);
						self.select().hideDialog().focus();
						self.addBookmark();
					}
				}
			}),
			div = dialog.div,
			rowsBox = K(&#x27;[name=&quot;rows&quot;]&#x27;, div).val(3),
			colsBox = K(&#x27;[name=&quot;cols&quot;]&#x27;, div).val(2),
			widthBox = K(&#x27;[name=&quot;width&quot;]&#x27;, div).val(100),
			heightBox = K(&#x27;[name=&quot;height&quot;]&#x27;, div),
			widthTypeBox = K(&#x27;[name=&quot;widthType&quot;]&#x27;, div),
			heightTypeBox = K(&#x27;[name=&quot;heightType&quot;]&#x27;, div),
			paddingBox = K(&#x27;[name=&quot;padding&quot;]&#x27;, div).val(2),
			spacingBox = K(&#x27;[name=&quot;spacing&quot;]&#x27;, div).val(0),
			alignBox = K(&#x27;[name=&quot;align&quot;]&#x27;, div),
			borderBox = K(&#x27;[name=&quot;border&quot;]&#x27;, div).val(1),
			colorBox = K(&#x27;.ke-input-color&#x27;, div);
			_initColorPicker(div, colorBox.eq(0));
			_initColorPicker(div, colorBox.eq(1));
			_setColor(colorBox.eq(0), &#x27;#000000&#x27;);
			_setColor(colorBox.eq(1), &#x27;&#x27;);
			// foucs and select
			rowsBox[0].focus();
			rowsBox[0].select();
			var table;
			if (isInsert) {
				return;
			}
			//get selected table node
			table = self.plugin.getSelectedTable();
			if (table) {
				rowsBox.val(table[0].rows.length);
				colsBox.val(table[0].rows.length &gt; 0 ? table[0].rows[0].cells.length : 0);
				rowsBox.attr(&#x27;disabled&#x27;, true);
				colsBox.attr(&#x27;disabled&#x27;, true);
				var match,
					tableWidth = table[0].style.width || table[0].width,
					tableHeight = table[0].style.height || table[0].height;
				if (tableWidth !== undefined &amp;&amp; (match = /^(\d+)((?:px|%)*)$/.exec(tableWidth))) {
					widthBox.val(match[1]);
					widthTypeBox.val(match[2]);
				} else {
					widthBox.val(&#x27;&#x27;);
				}
				if (tableHeight !== undefined &amp;&amp; (match = /^(\d+)((?:px|%)*)$/.exec(tableHeight))) {
					heightBox.val(match[1]);
					heightTypeBox.val(match[2]);
				}
				paddingBox.val(table[0].cellPadding || &#x27;&#x27;);
				spacingBox.val(table[0].cellSpacing || &#x27;&#x27;);
				alignBox.val(table[0].align || &#x27;&#x27;);
				borderBox.val(table[0].border === undefined ? &#x27;&#x27; : table[0].border);
				_setColor(colorBox.eq(0), K.toHex(table.attr(&#x27;borderColor&#x27;) || &#x27;&#x27;));
				_setColor(colorBox.eq(1), K.toHex(table[0].style.backgroundColor || table[0].bgColor || &#x27;&#x27;));
				widthBox[0].focus();
				widthBox[0].select();
			}
		},
		//modify cell
		cellprop : function() {
			var html = [
				&#x27;&lt;div style=&quot;padding:20px;&quot;&gt;&#x27;,
				//width, height
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keWidth&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.size + &#x27;&lt;/label&gt;&#x27;,
				lang.width + &#x27; &lt;input type=&quot;text&quot; id=&quot;keWidth&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;width&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				&#x27;&lt;select name=&quot;widthType&quot;&gt;&#x27;,
				&#x27;&lt;option value=&quot;%&quot;&gt;&#x27; + lang.percent + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;px&quot;&gt;&#x27; + lang.px + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;/select&gt; &amp;nbsp; &#x27;,
				lang.height + &#x27; &lt;input type=&quot;text&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;height&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				&#x27;&lt;select name=&quot;heightType&quot;&gt;&#x27;,
				&#x27;&lt;option value=&quot;%&quot;&gt;&#x27; + lang.percent + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;px&quot;&gt;&#x27; + lang.px + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;/select&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//align
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keAlign&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.align + &#x27;&lt;/label&gt;&#x27;,
				lang.textAlign + &#x27; &lt;select id=&quot;keAlign&quot; name=&quot;textAlign&quot;&gt;&#x27;,
				&#x27;&lt;option value=&quot;&quot;&gt;&#x27; + lang.alignDefault + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;left&quot;&gt;&#x27; + lang.alignLeft + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;center&quot;&gt;&#x27; + lang.alignCenter + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;right&quot;&gt;&#x27; + lang.alignRight + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;/select&gt; &#x27;,
				lang.verticalAlign + &#x27; &lt;select name=&quot;verticalAlign&quot;&gt;&#x27;,
				&#x27;&lt;option value=&quot;&quot;&gt;&#x27; + lang.alignDefault + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;top&quot;&gt;&#x27; + lang.alignTop + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;middle&quot;&gt;&#x27; + lang.alignMiddle + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;bottom&quot;&gt;&#x27; + lang.alignBottom + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;option value=&quot;baseline&quot;&gt;&#x27; + lang.alignBaseline + &#x27;&lt;/option&gt;&#x27;,
				&#x27;&lt;/select&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//border
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keBorder&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.border + &#x27;&lt;/label&gt;&#x27;,
				lang.borderWidth + &#x27; &lt;input type=&quot;text&quot; id=&quot;keBorder&quot; class=&quot;ke-input-text ke-input-number&quot; name=&quot;border&quot; value=&quot;&quot; maxlength=&quot;4&quot; /&gt; &amp;nbsp; &#x27;,
				lang.borderColor + &#x27; &lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				//background color
				&#x27;&lt;div class=&quot;ke-dialog-row&quot;&gt;&#x27;,
				&#x27;&lt;label for=&quot;keBgColor&quot; style=&quot;width:90px;&quot;&gt;&#x27; + lang.backgroundColor + &#x27;&lt;/label&gt;&#x27;,
				&#x27;&lt;span class=&quot;ke-inline-block ke-input-color&quot;&gt;&lt;/span&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;,
				&#x27;&lt;/div&gt;&#x27;
			].join(&#x27;&#x27;);
			var bookmark = self.cmd.range.createBookmark();
			var dialog = self.createDialog({
				name : name,
				width : 500,
				title : self.lang(&#x27;tablecell&#x27;),
				body : html,
				beforeRemove : function() {
					colorBox.unbind();
				},
				yesBtn : {
					name : self.lang(&#x27;yes&#x27;),
					click : function(e) {
						var width = widthBox.val(),
							height = heightBox.val(),
							widthType = widthTypeBox.val(),
							heightType = heightTypeBox.val(),
							padding = paddingBox.val(),
							spacing = spacingBox.val(),
							textAlign = textAlignBox.val(),
							verticalAlign = verticalAlignBox.val(),
							border = borderBox.val(),
							borderColor = K(colorBox[0]).html() || &#x27;&#x27;,
							bgColor = K(colorBox[1]).html() || &#x27;&#x27;;
						if (!/^\d*$/.test(width)) {
							alert(self.lang(&#x27;invalidWidth&#x27;));
							widthBox[0].focus();
							return;
						}
						if (!/^\d*$/.test(height)) {
							alert(self.lang(&#x27;invalidHeight&#x27;));
							heightBox[0].focus();
							return;
						}
						if (!/^\d*$/.test(border)) {
							alert(self.lang(&#x27;invalidBorder&#x27;));
							borderBox[0].focus();
							return;
						}
						cell.css({
							width : width !== &#x27;&#x27; ? (width + widthType) : &#x27;&#x27;,
							height : height !== &#x27;&#x27; ? (height + heightType) : &#x27;&#x27;,
							&#x27;background-color&#x27; : bgColor,
							&#x27;text-align&#x27; : textAlign,
							&#x27;vertical-align&#x27; : verticalAlign,
							&#x27;border-width&#x27; : border,
							&#x27;border-style&#x27; : border !== &#x27;&#x27; ? &#x27;solid&#x27; : &#x27;&#x27;,
							&#x27;border-color&#x27; : borderColor
						});
						self.hideDialog().focus();
						self.cmd.range.moveToBookmark(bookmark);
						self.cmd.select();
						self.addBookmark();
					}
				}
			}),
			div = dialog.div,
			widthBox = K(&#x27;[name=&quot;width&quot;]&#x27;, div).val(100),
			heightBox = K(&#x27;[name=&quot;height&quot;]&#x27;, div),
			widthTypeBox = K(&#x27;[name=&quot;widthType&quot;]&#x27;, div),
			heightTypeBox = K(&#x27;[name=&quot;heightType&quot;]&#x27;, div),
			paddingBox = K(&#x27;[name=&quot;padding&quot;]&#x27;, div).val(2),
			spacingBox = K(&#x27;[name=&quot;spacing&quot;]&#x27;, div).val(0),
			textAlignBox = K(&#x27;[name=&quot;textAlign&quot;]&#x27;, div),
			verticalAlignBox = K(&#x27;[name=&quot;verticalAlign&quot;]&#x27;, div),
			borderBox = K(&#x27;[name=&quot;border&quot;]&#x27;, div).val(1),
			colorBox = K(&#x27;.ke-input-color&#x27;, div);
			_initColorPicker(div, colorBox.eq(0));
			_initColorPicker(div, colorBox.eq(1));
			_setColor(colorBox.eq(0), &#x27;#000000&#x27;);
			_setColor(colorBox.eq(1), &#x27;&#x27;);
			// foucs and select
			widthBox[0].focus();
			widthBox[0].select();
			// get selected cell
			var cell = self.plugin.getSelectedCell();
			var match,
				cellWidth = cell[0].style.width || cell[0].width || &#x27;&#x27;,
				cellHeight = cell[0].style.height || cell[0].height || &#x27;&#x27;;
			if ((match = /^(\d+)((?:px|%)*)$/.exec(cellWidth))) {
				widthBox.val(match[1]);
				widthTypeBox.val(match[2]);
			} else {
				widthBox.val(&#x27;&#x27;);
			}
			if ((match = /^(\d+)((?:px|%)*)$/.exec(cellHeight))) {
				heightBox.val(match[1]);
				heightTypeBox.val(match[2]);
			}
			textAlignBox.val(cell[0].style.textAlign || &#x27;&#x27;);
			verticalAlignBox.val(cell[0].style.verticalAlign || &#x27;&#x27;);
			var border = cell[0].style.borderWidth || &#x27;&#x27;;
			if (border) {
				border = parseInt(border);
			}
			borderBox.val(border);
			_setColor(colorBox.eq(0), K.toHex(cell[0].style.borderColor || &#x27;&#x27;));
			_setColor(colorBox.eq(1), K.toHex(cell[0].style.backgroundColor || &#x27;&#x27;));
			widthBox[0].focus();
			widthBox[0].select();
		},
		insert : function() {
			this.prop(true);
		},
		&#x27;delete&#x27; : function() {
			var table = self.plugin.getSelectedTable();
			self.cmd.range.setStartBefore(table[0]).collapse(true);
			self.cmd.select();
			table.remove();
			self.addBookmark();
		},
		colinsert : function(offset) {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0],
				index = cell.cellIndex + offset;
			// 取得第一行的index
			index += table.rows[0].cells.length - row.cells.length;

			for (var i = 0, len = table.rows.length; i &lt; len; i++) {
				var newRow = table.rows[i],
					newCell = newRow.insertCell(index);
				newCell.innerHTML = K.IE ? &#x27;&#x27; : &#x27;&lt;br /&gt;&#x27;;
				// 调整下一行的单元格index
				index = _getCellIndex(table, newRow, newCell);
			}
			self.cmd.range.selectNodeContents(cell).collapse(true);
			self.cmd.select();
			self.addBookmark();
		},
		colinsertleft : function() {
			this.colinsert(0);
		},
		colinsertright : function() {
			this.colinsert(1);
		},
		rowinsert : function(offset) {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0];
			var rowIndex = row.rowIndex;
			if (offset === 1) {
				rowIndex = row.rowIndex + (cell.rowSpan - 1) + offset;
			}
			var newRow = table.insertRow(rowIndex);

			for (var i = 0, len = row.cells.length; i &lt; len; i++) {
				// 调整cell个数
				if (row.cells[i].rowSpan &gt; 1) {
					len -= row.cells[i].rowSpan - 1;
				}
				var newCell = newRow.insertCell(i);
				// copy colspan
				if (offset === 1 &amp;&amp; row.cells[i].colSpan &gt; 1) {
					newCell.colSpan = row.cells[i].colSpan;
				}
				newCell.innerHTML = K.IE ? &#x27;&#x27; : &#x27;&lt;br /&gt;&#x27;;
			}
			// 调整rowspan
			for (var j = rowIndex; j &gt;= 0; j--) {
				var cells = table.rows[j].cells;
				if (cells.length &gt; i) {
					for (var k = cell.cellIndex; k &gt;= 0; k--) {
						if (cells[k].rowSpan &gt; 1) {
							cells[k].rowSpan += 1;
						}
					}
					break;
				}
			}
			self.cmd.range.selectNodeContents(cell).collapse(true);
			self.cmd.select();
			self.addBookmark();
		},
		rowinsertabove : function() {
			this.rowinsert(0);
		},
		rowinsertbelow : function() {
			this.rowinsert(1);
		},
		rowmerge : function() {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0],
				rowIndex = row.rowIndex, // 当前行的index
				nextRowIndex = rowIndex + cell.rowSpan, // 下一行的index
				nextRow = table.rows[nextRowIndex]; // 下一行
			// 最后一行不能合并
			if (table.rows.length &lt;= nextRowIndex) {
				return;
			}
			var cellIndex = cell.cellIndex; // 下一行单元格的index
			if (nextRow.cells.length &lt;= cellIndex) {
				return;
			}
			var nextCell = nextRow.cells[cellIndex]; // 下一行单元格
			// 上下行的colspan不一致时不能合并
			if (cell.colSpan !== nextCell.colSpan) {
				return;
			}
			cell.rowSpan += nextCell.rowSpan;
			nextRow.deleteCell(cellIndex);
			self.cmd.range.selectNodeContents(cell).collapse(true);
			self.cmd.select();
			self.addBookmark();
		},
		colmerge : function() {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0],
				rowIndex = row.rowIndex, // 当前行的index
				cellIndex = cell.cellIndex,
				nextCellIndex = cellIndex + 1;
			// 最后一列不能合并
			if (row.cells.length &lt;= nextCellIndex) {
				return;
			}
			var nextCell = row.cells[nextCellIndex];
			// 左右列的rowspan不一致时不能合并
			if (cell.rowSpan !== nextCell.rowSpan) {
				return;
			}
			cell.colSpan += nextCell.colSpan;
			row.deleteCell(nextCellIndex);
			self.cmd.range.selectNodeContents(cell).collapse(true);
			self.cmd.select();
			self.addBookmark();
		},
		rowsplit : function() {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0],
				rowIndex = row.rowIndex;
			// 不是可分割单元格
			if (cell.rowSpan === 1) {
				return;
			}
			var cellIndex = _getCellIndex(table, row, cell);
			for (var i = 1, len = cell.rowSpan; i &lt; len; i++) {
				var newRow = table.rows[rowIndex + i],
					newCell = newRow.insertCell(cellIndex);
				if (cell.colSpan &gt; 1) {
					newCell.colSpan = cell.colSpan;
				}
				newCell.innerHTML = K.IE ? &#x27;&#x27; : &#x27;&lt;br /&gt;&#x27;;
				// 调整下一行的单元格index
				cellIndex = _getCellIndex(table, newRow, newCell);
			}
			K(cell).removeAttr(&#x27;rowSpan&#x27;);
			self.cmd.range.selectNodeContents(cell).collapse(true);
			self.cmd.select();
			self.addBookmark();
		},
		colsplit : function() {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0],
				cellIndex = cell.cellIndex;
			// 不是可分割单元格
			if (cell.colSpan === 1) {
				return;
			}
			for (var i = 1, len = cell.colSpan; i &lt; len; i++) {
				var newCell = row.insertCell(cellIndex + i);
				if (cell.rowSpan &gt; 1) {
					newCell.rowSpan = cell.rowSpan;
				}
				newCell.innerHTML = K.IE ? &#x27;&#x27; : &#x27;&lt;br /&gt;&#x27;;
			}
			K(cell).removeAttr(&#x27;colSpan&#x27;);
			self.cmd.range.selectNodeContents(cell).collapse(true);
			self.cmd.select();
			self.addBookmark();
		},
		coldelete : function() {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0],
				index = cell.cellIndex;
			for (var i = 0, len = table.rows.length; i &lt; len; i++) {
				var newRow = table.rows[i],
					newCell = newRow.cells[index];
				if (newCell.colSpan &gt; 1) {
					newCell.colSpan -= 1;
					if (newCell.colSpan === 1) {
						K(newCell).removeAttr(&#x27;colSpan&#x27;);
					}
				} else {
					newRow.deleteCell(index);
				}
				// 跳过不需要删除的行
				if (newCell.rowSpan &gt; 1) {
					i += newCell.rowSpan - 1;
				}
			}
			if (row.cells.length === 0) {
				self.cmd.range.setStartBefore(table).collapse(true);
				self.cmd.select();
				K(table).remove();
			} else {
				self.cmd.selection(true);
			}
			self.addBookmark();
		},
		rowdelete : function() {
			var table = self.plugin.getSelectedTable()[0],
				row = self.plugin.getSelectedRow()[0],
				cell = self.plugin.getSelectedCell()[0],
				rowIndex = row.rowIndex;
			// 从下到上删除
			for (var i = cell.rowSpan - 1; i &gt;= 0; i--) {
				table.deleteRow(rowIndex + i);
			}
			if (table.rows.length === 0) {
				self.cmd.range.setStartBefore(table).collapse(true);
				self.cmd.select();
				K(table).remove();
			} else {
				self.cmd.selection(true);
			}
			self.addBookmark();
		}
	};
	self.clickToolbar(name, self.plugin.table.prop);
});

    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
