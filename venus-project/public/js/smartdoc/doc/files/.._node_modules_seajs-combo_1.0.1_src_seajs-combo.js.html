<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>..\node_modules\seajs-combo\1.0.1\src\seajs-combo.js - SmartDoc</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartdoc">
             
            <img alt="SmartDoc" src="../assets/css/logo.png" title="SmartDoc">
            
                SmartDoc
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartdoc">Home</a>
                    </li>
                    
                    <li><a href="/">Document</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartdoc">About</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/273.html">273</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/alienjs.html">alienjs</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/window.require.html">window.require</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Countdown.html">Countdown</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Date.html">Date</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery.html">jquery</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.transitionEnd.html">jquery.transitionEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.support.transition.html">jquery.support.transition</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.animationEnd.html">jquery.animationEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery-ui.html">jquery-ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.ajaxPanel.html">jquery.ajaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.dialog.html">jquery.dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Array.html">Array</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.browserLowVersion.html">jquery.browserLowVersion</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.confirm.html">jquery.confirm</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.alert.html">jquery.alert</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ng.html">ng</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMock.html">ngMock</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMockE2E.html">ngMockE2E</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ui.html">ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/AjaxPanel.html">AjaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Date.Dialog.html">Date.Dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/WebUploader.html">WebUploader</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Base.html">Base</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Mediator.html">Mediator</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/options.Uploader.html">options.Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.File.html">File.File</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.Queue.html">File.Queue</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Uploader.html">Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/window.html">window</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <!--     <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>

 -->
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>..\node_modules\seajs-combo\1.0.1\src\seajs-combo.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums" id='src_code'>
/**
 * The Sea.js plugin for concatenating HTTP requests
 */

var Module = seajs.Module
var FETCHING = Module.STATUS.FETCHING

var data = seajs.data
var comboHash = data.comboHash = {}

var comboSyntax = [&quot;??&quot;, &quot;,&quot;]
var comboMaxLength = 2000
var comboExcludes


seajs.on(&quot;load&quot;, setComboHash)
seajs.on(&quot;fetch&quot;, setRequestUri)

function setComboHash(uris) {
  var len = uris.length
  if (len &lt; 2) {
    return
  }

  data.comboSyntax &amp;&amp; (comboSyntax = data.comboSyntax)
  data.comboMaxLength &amp;&amp; (comboMaxLength = data.comboMaxLength)

  comboExcludes = data.comboExcludes
  var needComboUris = []

  for (var i = 0; i &lt; len; i++) {
    var uri = uris[i]

    if (comboHash[uri]) {
      continue
    }

    var mod = Module.get(uri)

    // Remove fetching and fetched uris, excluded uris, combo uris
    if (mod.status &lt; FETCHING &amp;&amp; !isExcluded(uri) &amp;&amp; !isComboUri(uri)) {
      needComboUris.push(uri)
    }
  }

  if (needComboUris.length &gt; 1) {
    paths2hash(uris2paths(needComboUris))
  }
}

function setRequestUri(data) {
  data.requestUri = comboHash[data.uri] || data.uri
}


// Helpers

function uris2paths(uris) {
  return meta2paths(uris2meta(uris))
}

// [
//   &quot;http://example.com/p/a.js&quot;,
//   &quot;https://example2.com/b.js&quot;,
//   &quot;http://example.com/p/c/d.js&quot;,
//   &quot;http://example.com/p/c/e.js&quot;
// ]
// ==&gt;
// {
//   &quot;http__example.com&quot;: {
//                          &quot;p&quot;: {
//                                 &quot;a.js&quot;: { __KEYS: [] },
//                                 &quot;c&quot;: {
//                                        &quot;d.js&quot;: { __KEYS: [] },
//                                        &quot;e.js&quot;: { __KEYS: [] },
//                                        __KEYS: [&quot;d.js&quot;, &quot;e.js&quot;]
//                                 },
//                                 __KEYS: [&quot;a.js&quot;, &quot;c&quot;]
//                               },
//                          __KEYS: [&quot;p&quot;]
//                        },
//   &quot;https__example2.com&quot;: {
//                            &quot;b.js&quot;: { __KEYS: [] },
//                            _KEYS: [&quot;b.js&quot;]
//                          },
//   __KEYS: [&quot;http__example.com&quot;, &quot;https__example2.com&quot;]
// }

function uris2meta(uris) {
  var meta = {
    __KEYS: []
  }

  for (var i = 0, len = uris.length; i &lt; len; i++) {
    var parts = uris[i].replace(&quot;://&quot;, &quot;__&quot;).split(&quot;/&quot;)
    var m = meta

    for (var j = 0, l = parts.length; j &lt; l; j++) {
      var part = parts[j]

      if (!m[part]) {
        m[part] = {
          __KEYS: []
        }
        m.__KEYS.push(part)
      }
      m = m[part]
    }
  }

  return meta
}

// {
//   &quot;http__example.com&quot;: {
//                          &quot;p&quot;: {
//                                 &quot;a.js&quot;: { __KEYS: [] },
//                                 &quot;c&quot;: {
//                                        &quot;d.js&quot;: { __KEYS: [] },
//                                        &quot;e.js&quot;: { __KEYS: [] },
//                                        __KEYS: [&quot;d.js&quot;, &quot;e.js&quot;]
//                                 },
//                                 __KEYS: [&quot;a.js&quot;, &quot;c&quot;]
//                               },
//                          __KEYS: [&quot;p&quot;]
//                        },
//   &quot;https__example2.com&quot;: {
//                            &quot;b.js&quot;: { __KEYS: [] },
//                            _KEYS: [&quot;b.js&quot;]
//                          },
//   __KEYS: [&quot;http__example.com&quot;, &quot;https__example2.com&quot;]
// }
// ==&gt;
// [
//   [&quot;http://example.com/p&quot;, [&quot;a.js&quot;, &quot;c/d.js&quot;, &quot;c/e.js&quot;]]
// ]

function meta2paths(meta) {
  var paths = []
  var __KEYS = meta.__KEYS

  for (var i = 0, len = __KEYS.length; i &lt; len; i++) {
    var part = __KEYS[i]
    var root = part
    var m = meta[part]
    var KEYS = m.__KEYS

    while (KEYS.length === 1) {
      root += &quot;/&quot; + KEYS[0]
      m = m[KEYS[0]]
      KEYS = m.__KEYS
    }

    if (KEYS.length) {
      paths.push([root.replace(&quot;__&quot;, &quot;://&quot;), meta2arr(m)])
    }
  }

  return paths
}

// {
//   &quot;a.js&quot;: { __KEYS: [] },
//   &quot;c&quot;: {
//          &quot;d.js&quot;: { __KEYS: [] },
//          &quot;e.js&quot;: { __KEYS: [] },
//          __KEYS: [&quot;d.js&quot;, &quot;e.js&quot;]
//        },
//   __KEYS: [&quot;a.js&quot;, &quot;c&quot;]
// }
// ==&gt;
// [
//   &quot;a.js&quot;, &quot;c/d.js&quot;, &quot;c/e.js&quot;
// ]

function meta2arr(meta) {
  var arr = []
  var __KEYS = meta.__KEYS

  for (var i = 0, len = __KEYS.length; i &lt; len; i++) {
    var key = __KEYS[i]
    var r = meta2arr(meta[key])

    // key = &quot;c&quot;
    // r = [&quot;d.js&quot;, &quot;e.js&quot;]
    var m = r.length
    if (m) {
      for (var j = 0; j &lt; m; j++) {
        arr.push(key + &quot;/&quot; + r[j])
      }
    } else {
      arr.push(key)
    }
  }

  return arr
}

// [
//   [ &quot;http://example.com/p&quot;, [&quot;a.js&quot;, &quot;c/d.js&quot;, &quot;c/e.js&quot;, &quot;a.css&quot;, &quot;b.css&quot;] ]
// ]
// ==&gt;
//
// a hash cache
//
// &quot;http://example.com/p/a.js&quot;  ==&gt; &quot;http://example.com/p/??a.js,c/d.js,c/e.js&quot;
// &quot;http://example.com/p/c/d.js&quot;  ==&gt; &quot;http://example.com/p/??a.js,c/d.js,c/e.js&quot;
// &quot;http://example.com/p/c/e.js&quot;  ==&gt; &quot;http://example.com/p/??a.js,c/d.js,c/e.js&quot;
// &quot;http://example.com/p/a.css&quot;  ==&gt; &quot;http://example.com/p/??a.css,b.css&quot;
// &quot;http://example.com/p/b.css&quot;  ==&gt; &quot;http://example.com/p/??a.css,b.css&quot;
//

function paths2hash(paths) {
  for (var i = 0, len = paths.length; i &lt; len; i++) {
    var path = paths[i]
    var root = path[0] + &quot;/&quot;
    var group = files2group(path[1])

    for (var j = 0, m = group.length; j &lt; m; j++) {
      setHash(root, group[j])
    }
  }

  return comboHash
}

function setHash(root, files) {
  var comboPath = root + comboSyntax[0] + files.join(comboSyntax[1])
  var exceedMax = comboPath.length &gt; comboMaxLength

  // http://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url
  if (files.length &gt; 1 &amp;&amp; exceedMax) {
    var parts = splitFiles(files,
      comboMaxLength - (root + comboSyntax[0]).length)

    setHash(root, parts[0])
    setHash(root, parts[1])
  } else {
    if (exceedMax) {
      throw new Error(&quot;The combo url is too long: &quot; + comboPath)
    }

    for (var i = 0, len = files.length; i &lt; len; i++) {
      comboHash[root + files[i]] = comboPath
    }
  }
}

function splitFiles(files, filesMaxLength) {
  var sep = comboSyntax[1]
  var s = files[0]

  for (var i = 1, len = files.length; i &lt; len; i++) {
    s += sep + files[i]
    if (s.length &gt; filesMaxLength) {
      return [files.splice(0, i), files]
    }
  }
}

//
//  [&quot;a.js&quot;, &quot;c/d.js&quot;, &quot;c/e.js&quot;, &quot;a.css&quot;, &quot;b.css&quot;, &quot;z&quot;]
// ==&gt;
//  [ [&quot;a.js&quot;, &quot;c/d.js&quot;, &quot;c/e.js&quot;], [&quot;a.css&quot;, &quot;b.css&quot;] ]
//

function files2group(files) {
  var group = []
  var hash = {}

  for (var i = 0, len = files.length; i &lt; len; i++) {
    var file = files[i]
    var ext = getExt(file)
    if (ext) {
      (hash[ext] || (hash[ext] = [])).push(file)
    }
  }

  for (var k in hash) {
    if (hash.hasOwnProperty(k)) {
      group.push(hash[k])
    }
  }

  return group
}

function getExt(file) {
  var p = file.lastIndexOf(&quot;.&quot;)
  return p &gt;= 0 ? file.substring(p) : &quot;&quot;
}

function isExcluded(uri) {
  if (comboExcludes) {
    return comboExcludes.test ?
      comboExcludes.test(uri) :
      comboExcludes(uri)
  }
}

function isComboUri(uri) {
  var comboSyntax = data.comboSyntax || [&quot;??&quot;, &quot;,&quot;]
  var s1 = comboSyntax[0]
  var s2 = comboSyntax[1]

  return s1 &amp;&amp; uri.indexOf(s1) &gt; 0 || s2 &amp;&amp; uri.indexOf(s2) &gt; 0
}


  // For test
if (data.test) {
  var test = seajs.test || (seajs.test = {})
  test.uris2paths = uris2paths
  test.paths2hash = paths2hash
}

    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
