<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>..\node_modules\alienjs-dialog\src\index.js - SmartDoc</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartdoc">
             
            <img alt="SmartDoc" src="../assets/css/logo.png" title="SmartDoc">
            
                SmartDoc
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartdoc">Home</a>
                    </li>
                    
                    <li><a href="/">Document</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartdoc">About</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/273.html">273</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/alienjs.html">alienjs</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/window.require.html">window.require</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Countdown.html">Countdown</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Date.html">Date</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery.html">jquery</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.transitionEnd.html">jquery.transitionEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.support.transition.html">jquery.support.transition</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.animationEnd.html">jquery.animationEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery-ui.html">jquery-ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.ajaxPanel.html">jquery.ajaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.dialog.html">jquery.dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Array.html">Array</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.browserLowVersion.html">jquery.browserLowVersion</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.confirm.html">jquery.confirm</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.alert.html">jquery.alert</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ng.html">ng</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMock.html">ngMock</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMockE2E.html">ngMockE2E</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ui.html">ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/AjaxPanel.html">AjaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Date.Dialog.html">Date.Dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/WebUploader.html">WebUploader</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Base.html">Base</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Mediator.html">Mediator</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/options.Uploader.html">options.Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.File.html">File.File</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.Queue.html">File.Queue</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Uploader.html">Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/window.html">window</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <!--     <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>

 -->
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>..\node_modules\alienjs-dialog\src\index.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums" id='src_code'>
!(function ($) {
    /**
     * 弹出窗口
     * @class Dialog
     * @main Dialog
     * @module ui
     * @demo node_modules/alienjs-dialog/examples/index.html
     * @uses jquery
     * @uses jquery.animationEnd
     * @param elem {string|object} 选择器
     * @param options {object}
     * @param options.popup {object} 设置触发标签 @default [data-popup]
     * @param options.hide {object} 设置触发隐藏的标签 @default [data-hide]
     * @param options.backdrop {object} 设置是否可以点击遮罩层隐藏 @default true
     * @param options.animate {object} 动画样式类名 @default {show : &#x27;bounceInDown&#x27; , hide : &#x27;bounceOutUp&#x27;}
     * @param options.context {string|object} 所在的父级容器 @default window
     * @return Dialog {object}
     * @constructor
     */
    var Dialog  = function( elem ,options ){
        var self = this ;
        this.options = $.extend({} , Dialog.DEFAULTS , options );
        this.$elem = $( elem ) ;

        for( var i in this.options){
            this.options[i] = this.$elem.data(i.replace(/[A-Z]+/,&#x27;-$&amp;&#x27;).toLowerCase()) ||  this.options[i];
        }

        if( typeof this.options.animate == &#x27;string&#x27; ){
            this.options.animate = new Function(&quot; return  &quot;+ this.options.animate )();
            if( typeof this.options.animate != &#x27;object&#x27;)
                this.options.animate = { show : this.options.animate , hide : &#x27;&#x27; }
        }

        this.islockvisible = false;
        this.init();

        $( document ).off(&#x27;click.dialog&#x27;).on(&#x27;click.dialog&#x27;, this.options.popup , function(e){
            e.preventDefault();
            e.stopPropagation();
            $($(this).attr(&#x27;href&#x27;)).dialog(&#x27;show&#x27;);
        });
    }



    Dialog.prototype = {
        init : function(){
            var self = this;
           // this.$elem.appendTo(&#x27;body&#x27;);
            $( window ).off(&#x27;resize.dialog&#x27;).on(&#x27;resize.dialog&#x27;,function(e){
                self.center();
            });

            this.registerEvent();
            return this;
        },
        registerEvent : function(){
            // TODO 注册事件
            var events = [ &#x27;on&#x27; , &#x27;off&#x27; , &#x27;trigger&#x27; ];
            for(var i = 0 ; i &lt; events.length; i ++){
                var e = events[i];
                this[e] = (function(e){
                    return function(){
                        // arguments 为传入参数
                        self.$elem[e].apply(  self.$elem , arguments );
                        return self;
                    }
                })( e );
            }
        },
        getMask : function(){
            var $mask = $(&#x27;.dialog-mask&#x27;).length == 0 ? $(&#x27;&lt;div class=&quot;dialog-mask&quot;&gt;&lt;/div&gt;&#x27;).appendTo(&#x27;body&#x27;): $(&#x27;.dialog-mask&#x27;);
            return  $mask;
        },
        getModule: function( title , content  , hasfoot ){
            var $footer = $(&#x27;&lt;div&gt;&#x27;, { &#x27;class&#x27; : &quot;dialog-footer clearfix&quot; }),
                $btnOK = $(&#x27;&lt;a&gt;&#x27;, { &#x27;class&#x27; : &quot;btn btn-primary btn-ok&quot; , &#x27;data-hide&#x27; : &#x27;true&#x27; ,href : &quot;javascript:;&quot;  }).html(&#x27;确定&#x27;),
                $btnCancel = $(&#x27;&lt;a&gt;&#x27;, { &#x27;class&#x27; : &quot;btn btn-default btn-cancel&quot; , &#x27;data-hide&#x27; : &#x27;true&#x27;, href : &quot;javascript:;&quot; }).html(&#x27;取消&#x27;);

            var $dialog = $(&#x27;&lt;div&gt;&#x27;, { &#x27;class&#x27; : &quot;dialog&quot; }),
                $container = $(&#x27;&lt;div&gt;&#x27;, { &#x27;class&#x27; : &quot;dialog-container&quot; }),
                $header = $(&#x27;&lt;div&gt;&#x27;, { &#x27;class&#x27; : &quot;dialog-header clearfix&quot; }).append(&#x27;&lt;h3 class=&quot;dialog-title&quot;&gt; &#x27;+ title +&#x27;&lt;/h3&gt;&lt;div class=&quot;operate&quot;&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;dialog-hide&quot; data-hide &gt;×&lt;/a&gt;&lt;/div&gt;&#x27;),
                $body = $(&#x27;&lt;div&gt;&#x27;, { &#x27;class&#x27; : &quot;dialog-body dialog-message clearfix&quot; }).html( content );

            $footer.append( $btnOK ).append( $btnCancel ) ;

            if( title != null ){
                $container.append( $header );
            }

            $container.append( $body );

            if( hasfoot == true || hasfoot == null ){
                $container.append( $footer ) ;
            }
            $dialog.append( $container );
            return $dialog;
        },
        center : function(){
            var $context = $( this.$elem.data(&#x27;context&#x27;) || this.options.context );
            var offset = $context.length ? $context.offset() : { left: 0, top: 0 };
            var $container = $context.find(&#x27;.dialog-container&#x27;);
            var size = { width: $container.width(), height: $container.height() };
            var left = ( $context.width() - size.width ) / 2;
            var top = ( $context.height() - size.height ) / 2;
            var params = {};
          //  params[&#x27;left&#x27;] = left + (offset.left || 0);
            params[&#x27;top&#x27;] = top + (offset &amp;&amp; offset.top || 0) - $context.scrollTop();

            $context.find(&#x27;.dialog-container&#x27;).css(params);
            return this;
        },
        /**
         * 显示
         * @returns {Dialog}
         */
        show :  function(){
            var self = this;
            this.$container = this.$elem.find(&#x27;.dialog-container&#x27;).off(&#x27;click.dialog&#x27;).on(&#x27;click.dialog&#x27;, this.options.hide ,function(e){
                 self.relatedTarget = this ;
                 self.hide();
            }).on(&#x27;click.dialog&#x27;,function(e){
                e.stopPropagation();
            });

            this.$elem.off(&#x27;click.dialog&#x27;).on(&#x27;click.dialog&#x27;,function(){
                self.relatedTarget = this ;
                var backdrop =  self.options.backdrop ;

                if( !backdrop ){
                    return ;
                }

                self.hide();

            }).addClass(&#x27;in&#x27;);

            this.$container.removeClass(this.options.animate.hide).addClass( this.options.animate.show + &quot; animated&quot;);

            this.$elem.trigger( $.Event(&#x27;shown&#x27;,{ relatedTarget : this.relatedTarget  }));

            //this.center()
            if( $(document).height() &gt; this.$container.height())
                this.$container.css(&#x27;top&#x27;, $(document).height()/2 - this.$container.height()/2);
            return this;
        },
        /**
         * 锁定，锁定后无法隐藏或显示
         * @returns {Dialog}
         */
        lock : function(  ){
            this.islockvisible = true;
            return this;
        },
        /**
         * 解锁
         * @returns {Dialog}
         */
        unlock : function(  ){
            this.islockvisible = false;
            return this;
        },
        /**
         * 隐藏
         * @returns {Dialog}
         */
        hide :  function(){
            var self = this ;
            if( this.islockvisible ) return this;

            this.$container.removeClass(this.options.animate.show).addClass( this.options.animate.hide);

            if( this.$container.animationEnd  &amp;&amp; this.options.animate.hide )
                this.$container.animationEnd(function(){
                    self.$elem.removeClass(&#x27;in&#x27;);
                });
            else
                self.$elem.removeClass(&#x27;in&#x27;);

            this.$elem.trigger( $.Event(&#x27;hidden&#x27;,{ relatedTarget : this.relatedTarget  }));
            return this;
        },
        /**
         * Toggle
         * @returns {Dialog}
         */
        toggle: function(){
            return this.$elem.hasClass(&#x27;in&#x27;) ? this.hide() : this.show();
        },
        alert : function( title , content  , callback ){
            var self = this;
            this.remove();
            this.$elem = this.getModule( title , content).addClass(&#x27;dialog-alert&#x27;).appendTo(&#x27;body&#x27;);
            this.$elem.find(&#x27;.btn-ok&#x27;).click(function(){
                callback &amp;&amp; callback.call( self.$elem , { relatedTarget: this });
            })
            self.show()
            return this;
        },
        confirm : function( title , content , callback ){
            var self = this;
            this.remove();
            this.$elem = this.getModule( title , content ).addClass(&#x27;dialog-confirm&#x27;).appendTo(&#x27;body&#x27;);

            var event = {} ;
            if(typeof callback == &#x27;object&#x27;){
                event = callback;
            }
            else{
                event.ok = callback;
            }

            this.$elem.find(&#x27;.btn-ok&#x27;).removeAttr( this.options.hide.replace(&#x27;[&#x27;,&#x27;&#x27;).replace(&#x27;]&#x27;,&#x27;&#x27;)).click(function(){
                event.ok &amp;&amp; event.ok.call( self.$elem , { relatedTarget: this });
            }).end().find(&#x27;.btn-cancel&#x27;).click(function(){
                event.cancel &amp;&amp; event.cancel.call( self.$elem , { relatedTarget: this });
            })
            self.show();

            return this;
        },
        blank : function( title , content ){
            var self = this;
            this.remove();
            this.$elem = this.getModule( title , content  , false ).appendTo(&#x27;body&#x27;);
            self.show();
            return this;
        },
        remove : function(){
           this.$elem &amp;&amp; this.$elem.remove();
        },

        load : function(){

        }
    }

    /**
     * 配置
     * @type {{popup: string, hide: string, backdrop: boolean, animate: {show: string, hide: string}, context: Window}}
     */
    Dialog.DEFAULTS = {
        popup   : &#x27;[data-popup]&#x27;,
        hide    : &#x27;[data-hide]&#x27;,
        backdrop: true,
        animate : { show : &#x27;bounceInDown&#x27; , hide : &#x27;bounceOutUp&#x27;},
        context : window
    };


    /**
     * 弹出窗口
     * @class dialog
     * @module jquery-ui
     * @namespace jquery
     * @main dialog
     * @param options {object}
     * @param options {object}
     * @param options {object}
     * @param options {object}
     * @returns jquery {object}
     */
    $.fn.dialog = function ( options ) {
        var args = arguments;
        return $( this ).each(function(){
            var data = $(this).data(&#x27;dialog&#x27;);
            if(!data ){
                data = new Dialog( this , options );
                $(this).data(&#x27;dialog&#x27; , data);
            }
            var g = [];
            for( var i = 1 ; i &lt; args.length ; i ++ ){
                g.push(args[i]);
            }
            // TODO 构造函数
            var fn = new Function( &#x27;data&#x27; , &#x27;options&#x27; , &#x27;args&#x27; ,&#x27;return data[ options ](args)&#x27;);

            options &amp;&amp; data[ options ] &amp;&amp; fn( data , options , g.join(&#x27;,&#x27;));
        })
    }
    $.dialog = {} ;

    $.dialog.active = null ;

    function createDialog( options ){
        $.dialog.active &amp;&amp; $.dialog.active.remove();
        return  new Dialog( null , options);
    }

    /**
     * 弹出提示框
     * @param title   {string}  标题
     * @param content  {string} 内容
     * @param callback  {function} 回调函数
     * @param options  {object} 配置
     * @returns {*|HTMLElement|Tabs.$elem|Calendar.$elem|Collapse.$elem|Carousel.$elem}
     */
     $.dialog.alert = function( title , content , callback , options ){
        return  $.dialog.active = createDialog( options ).alert( title , content , callback).$elem ;
    }

    /**
     * 确认提示框
     * @param title   {string}  标题
     * @param content  {string} 内容
     * @param callback  {function |object} 回调函数 | { ok : {function} , cancel : {function}}
     * @param options  {object} 配置
     * @returns {*|HTMLElement|Tabs.$elem|Calendar.$elem|Collapse.$elem|Carousel.$elem}
     */
    $.dialog.confirm = function( title , content , callback , options ){
        return  $.dialog.active = createDialog( options ).confirm( title , content ,callback ).$elem;
    }
    /**
     * 确认提示框
     * @param title   {string}  标题
     * @param content  {string} 内容
     * @param callback  {function} 回调函数
     * @param options  {object} 配置
     * @returns {*|HTMLElement|Tabs.$elem|Calendar.$elem|Collapse.$elem|Carousel.$elem}
     */
    $.dialog.blank = function( title , content , options ){
        return  $.dialog.active = createDialog( options ).confirm( title , content ).$elem;
    }

    /**
     * 提示坚屏浏览网页窗口
     * @class browserLowVersion
     * @module jquery-ui
     * @namespace jquery
     * @param message {string} 提示信息
     * @param callback  {function} 回调
     * @param options  {string} 提示信息
     * @returns jquery {object}
     */

    $.dialog.mobileIsOri = function( message  , callback , options){
        // TODO 提示使用坚屏浏览网页
        $(window).on(&#x27;orientationchange&#x27;,function(){
            if( window.orientation == 90 || window.orientation == -90)
                $.dialog.alert(&#x27;提示&#x27; , message || &#x27;请坚屏浏览网页!&#x27; , callback , options);
        })
        return this;
    }

    /**
     * 浏览器版检测 本小于ie6 eie7提示窗口
     * @class browserLowVersion
     * @module jquery-ui
     * @namespace jquery
     * @param message {string} 提示信息
     * @param callback {function} 回调
     * @param options {object} 操作
     * @returns jquery {object}
     */
    $.dialog.browserLowVersion = function( message  , callback , options){
        var browser = navigator.appName;
        if( browser == &quot;Microsoft Internet Explorer&quot; ){
            var b_version = navigator.appVersion;
            var version = b_version.split(&quot;;&quot;);
            var trim_Version = version[1].replace(/[ ]/g,&quot;&quot;);
            if( trim_Version==&quot;MSIE7.0&quot;){
                $.dialog.alert( null , message || &#x27;您当前浏览器版本较低，为了更好的浏效果请更新至最新版本!&#x27; , callback , options);
            }
            else if( trim_Version==&quot;MSIE6.0&quot;){
                $.dialog.alert( null , message || &#x27;您当前浏览器版本较低，为了更好的浏效果请更新至最新版本!&#x27; , callback , options);
            }
        }

        return this;
    }

    $.fn.dialog.Constructor =  Dialog;

    /**
     * 绑定于元素上点击事件，并弹出对话窗体
     * @class confirm
     * @module jquery-ui
     * @namespace jquery
     * @param title   {string}  标题
     * @param content  {string} 内容
     * @param callback  {function} 回调函数
     * @param options  {object} 配置
     * @returns jquery {object}
     */
    $.fn.confirm  = function( title , content , callback , options  ){
        return $(this).off(&#x27;click.confirm&#x27;).on(&#x27;click.confirm&#x27;,function(){
            $.dialog.confirm( title , content , callback , options );
        })
    }

    /**
     * 绑定于元素上点击事件，并弹出窗体
     * @class alert
     * @module jquery-ui
     * @namespace jquery
     * @param title   {string}  标题
     * @param content  {string} 内容
     * @param callback  {function} 回调函数
     * @param options  {object} 配置
     * @returns jquery {object}
     */
    $.fn.alert  = function( title , content , callback , options  ){
        return $(this).off(&#x27;click.confirm&#x27;).on(&#x27;click.confirm&#x27;,function(){
            $.dialog.alert( title , content , callback , options );
        })
    }

    if( typeof module === &quot;object&quot; &amp;&amp; typeof module.exports === &quot;object&quot;  ){
        module.exports = Dialog;
    }

})(window.jQuery);


    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
