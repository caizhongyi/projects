<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>..\node_modules\alienjs-date\src\index.js - SmartDoc</title>
  
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
</head>
<body class="yui3-smart">
 <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
               <a class="navbar-brand mainlogo" href="https://github.com/zhh77/smartdoc">
             
            <img alt="SmartDoc" src="../assets/css/logo.png" title="SmartDoc">
            
                SmartDoc
          </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                 <ul class="nav navbar-nav">
                    
                    <li><a href="https://github.com/zhh77/smartdoc">Home</a>
                    </li>
                    
                    <li><a href="/">Document</a>
                    </li>
                    
                    <li><a href="https://github.com/zhh77/smartdoc">About</a>
                    </li>
                    
                </ul>
               <div class="navbar-form navbar-right filterAPi" autocomplete="off">
                <input type="text" id='txtSearchAPI' class="form-control search-query" placeholder="Search for API" />
                 <ul id="filterList" class="filterItems dropdown-menu" role="menu"></ul>
                </div>
            </div>
        </div>
    </nav>
    <div id="sidebar">
    <h3>Modules/Classes</h3>
        <div id="api-tabview-filter">
            <input id='txtSearch' type="search" class="form-control" placeholder="Type to filter Modules/Classes">
        </div>
        <dl id="sidebar_list">
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/273.html">273</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/alienjs.html">alienjs</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/window.require.html">window.require</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Countdown.html">Countdown</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/Date.html">Date</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery.html">jquery</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.transitionEnd.html">jquery.transitionEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.support.transition.html">jquery.support.transition</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.animationEnd.html">jquery.animationEnd</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/jquery-ui.html">jquery-ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/jquery.ajaxPanel.html">jquery.ajaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.dialog.html">jquery.dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Array.html">Array</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.browserLowVersion.html">jquery.browserLowVersion</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.confirm.html">jquery.confirm</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/jquery.alert.html">jquery.alert</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ng.html">ng</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMock.html">ngMock</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ngMockE2E.html">ngMockE2E</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/ui.html">ui</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/AjaxPanel.html">AjaxPanel</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Date.Dialog.html">Date.Dialog</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/WebUploader.html">WebUploader</a>
                </dt>
                <dd>
                    <ul>
                   
                       <li>
                            
                           <a href="../classes/Base.html">Base</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Mediator.html">Mediator</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/options.Uploader.html">options.Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.File.html">File.File</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/File.Queue.html">File.Queue</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                       <li>
                            
                           <a href="../classes/Uploader.html">Uploader</a>
                           <ul>
                                
                           </ul>
                       </li>
                    
                    </ul>
                </dd>
             
                <dt>
                    <span class="glyphicon glyphicon-minus"></span>
                    <a href="../modules/window.html">window</a>
                </dt>
                <dd>
                    <ul>
                   
                    </ul>
                </dd>
             
        </dl>
</div>
   
    <div class="stdoc-content">
        <!--     <form id="options-form" class="form-inline pull-right">
        Show:
        <label for="api-show-inherited" class="checkbox">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected" class="checkbox">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private" class="checkbox">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated" class="checkbox">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </form>

 -->
        <div class="apidocs">
            <div id="docs-main">
                <div class="content">
                    <div class="page-header">
    <h1>..\node_modules\alienjs-date\src\index.js <small>File</small></h1>
</div>

<div class="file">
    <pre class="prettyprint linenums" id='src_code'>
/**
 * Created with JetBrains WebStorm.
 * User: cai
 * Date: 12-11-1
 * Time: 上午9:33
 * To change this template use File | Settings | File Templates.
 * http://www.alienjs.net
 */
;(function ( Date ) {

    //注：时间格式中日期中月份开始是从0开始的。。

    /***
     * 语言
     * @module Date
     * @namespace Date
     * @type {{week: string[]}}
     */
    Date.lang = {
        week : [&#x27;\u65e5&#x27;, &#x27;\u4e00&#x27;, &#x27;\u4e8c&#x27;, &#x27;\u4e09&#x27;, &#x27;\u56db&#x27;, &#x27;\u4e94&#x27;, &#x27;\u516d&#x27;]
    }

    Date.prototype.toDate = function () {
        return this;
    };

    /***
     * json 字符转化为时间类型
     * @module window
     * @namespace Date
     * @method parseDate
     * @params {string} json 格式
     */
    Date.parseDate = function ( jsonString ) {
        var obj = jsonString;
        var date = eval( obj.replace( /\/Date\((\d+)\)\//gi , &quot;new Date($1)&quot; ) );
        return date;
    };
    /**
     * 取得当前日期所在月的最大天数
     * @method maxDay
     * @return {number} 最大天数
     * @example
     * */
    Date.prototype.maxDay = function () {
        var myDate = this;
        var ary = myDate.toArray();
        var date = (new Date( ary[0] , ary[1] + 1 , 1 ));
        return date.addDay( - 1 ).getDate();
    };
    /**
     * 取得当前日期所在周是一年中的第几周
     * @method getYearWeek
     * @return {number} 周数
     * @example
     * */
    Date.prototype.getYearWeek = function () {
        /*
         date1是当前日期
         date2是当年第一天
         d是当前日期是今年第多少天
         用d + 当前年的第一天的周差距的和在除以7就是本年第几周
         */
        var date1 = this, date2 = new Date(a, 0, 1),
            d = Math.round((date1.valueOf() - date2.valueOf()) / 86400000);
        return Math.ceil(
            (d + ((date2.getDay() + 1) - 1)) / 7
        );
    };
    /**
     * 取得当前日期所在周是一月中的第几周
     * @method getMonthWeek
     * @return {number} 周数
     * @example
     * */
    Date.prototype.getMonthWeek = function () {
        /*
         a = d = 当前日期
         b = 6 - w = 当前周的还有几天过完（不算今天）
         a + b 的和在除以7 就是当天是当前月份的第几周
         */
        var date = this, w = date.getDay(), d = date.getDate();
        return Math.ceil(
            (d + 6 - w) / 7
        );
    };
    /**
     * 日期格式化
     * @method format
     * @param {string} format 格式 YYYY/yyyy/YY/yy 表示年份,MM/M 月份,W/w 星期,dd/DD/d/D 日期,hh/HH/h/H 时间,mm/m 分钟,ss/SS/s/S 秒
     * @return {date} this
     * @example
     * */
    Date.prototype.format = function ( format ) {
        if ( ! format ) return this.toString();
        var str = format;
        var Week = Date.lang.week;
        var date = this;
        str = str.replace( /yyyy|YYYY/ , date.getFullYear() );
        str = str.replace( /yy|YY/ , (date.getYear() % 100) &gt; 9 ? (date.getYear() % 100).toString() : &#x27;0&#x27; + (date.getYear() % 100) );
        var month = date.getMonth() + 1;
        str = str.replace( /MM/ , month &gt; 9 ? month.toString() : &#x27;0&#x27; + month );
        str = str.replace( /M/g , month );
        str = str.replace( /w|W/g , Week[date.getDay()] );
        str = str.replace( /dd|DD/ , date.getDate() &gt; 9 ? date.getDate().toString() : &#x27;0&#x27; + date.getDate() );
        str = str.replace( /d|D/g , date.getDate() );
        str = str.replace( /hh|HH/ , date.getHours() &gt; 9 ? date.getHours().toString() : &#x27;0&#x27; + date.getHours() );
        str = str.replace( /h|H/g , date.getHours() );
        str = str.replace( /mm/ , date.getMinutes() &gt; 9 ? date.getMinutes().toString() : &#x27;0&#x27; + date.getMinutes() );
        str = str.replace( /m/g , date.getMinutes() );
        str = str.replace( /ss|SS/ , date.getSeconds() &gt; 9 ? date.getSeconds().toString() : &#x27;0&#x27; + date.getSeconds() );
        str = str.replace( /s|S/g , date.getSeconds() );
        return str;
    };
    /**
     * 是否是周末
     * @method isWeedEnd
     * @return {boolean} true|false
     * @example
     * */
    Date.prototype.isWeedEnd = function () {
        if ( this.getDay() == 0 || this.getDay() == 6 ) {
            return true
        }
        ;
        return false;
    };

    /**
     * 判断闰年
     * @method isLeapYear
     * @return {boolean} true|false
     * @example
     * */
    Date.prototype.isLeapYear = function () {
        return (0 == this.getYear() % 4 &amp;&amp; ((this.getYear() % 100 != 0) || (this.getYear() % 400 == 0)));
    };
    /**
     * 增加时间
     * @method add
     * @param {string} [type=d] s|m|h|d|w|q|M|y
     * @param {string} number 增加的数量
     * @return {date} this
     * @example
     * */
    Date.prototype.add = function ( type , number ) {
        var dtTmp = this;
        switch ( type ) {
            case &#x27;s&#x27; :
            case &#x27;S&#x27; :
                return new Date( Date.parse( dtTmp ) + (1000 * number) );
            case &#x27;m&#x27; :
                return new Date( Date.parse( dtTmp ) + (60000 * number) );
            case &#x27;h&#x27; :
            case &#x27;H&#x27; :
                return new Date( Date.parse( dtTmp ) + (3600000 * number) );
            case &#x27;d&#x27; :
            case &#x27;D&#x27; :
                return new Date( Date.parse( dtTmp ) + (86400000 * number) );
            case &#x27;w&#x27; :
            case &#x27;W&#x27; :
                return new Date( Date.parse( dtTmp ) + ((86400000 * 7) * number) );
            case &#x27;q&#x27; :
            case &#x27;Q&#x27; :
                return new Date( dtTmp.getFullYear() , (dtTmp.getMonth()) + number * 3 , dtTmp.getDate() , dtTmp.getHours() , dtTmp.getMinutes() , dtTmp.getSeconds() );
            case &#x27;M&#x27; :
            case &#x27;M&#x27; :
                return new Date( dtTmp.getFullYear() , (dtTmp.getMonth()) + number , dtTmp.getDate() , dtTmp.getHours() , dtTmp.getMinutes() , dtTmp.getSeconds() );
            case &#x27;y&#x27; :
            case &#x27;Y&#x27; :
                return new Date( (dtTmp.getFullYear() + number) , dtTmp.getMonth() , dtTmp.getDate() , dtTmp.getHours() , dtTmp.getMinutes() , dtTmp.getSeconds() );
            default :
                return new Date( Date.parse( dtTmp ) + (86400000 * number) );
        }
    };
    /**
     * 加上天
     * @method addDay
     * @return {date} this
     * @example
     * */
    Date.prototype.addDay = function ( num ) {
        return this.add( &#x27;d&#x27; , num );
    };
    /**
     * 加上月
     * @method addMonth
     * @return {date} this
     * @example
     * */
    Date.prototype.addMonth = function ( num ) {
        return this.add( &#x27;m&#x27; , num );
    };
    /**
     * 加上年
     * @method addYear
     * @return {date} this
     * @example
     * */
    Date.prototype.addYear = function ( num ) {
        return this.add( &#x27;y&#x27; , num );
    };
    /**
     * 时间差
     * @method diff
     * @use  String.js
     * @param {string} [type=d] s|m|h|d|w|M|y
     * @param {string|object|number} dtEnd
     * @return {number | object} 差值
     * @example
     * */
    Date.prototype.diff = function ( dtEnd , type ) {
        var dtStart = this.toDate();

        if(typeof dtEnd == &#x27;string&#x27;){
            dtEnd = dtEnd.toDate();
        }
        else if(typeof dtEnd == &#x27;number&#x27;){
            if(dtEnd.toString().length == 10){
                dtEnd = parseInt(dtEnd) * 1000
            }
            dtEnd = new Date( dtEnd );
        }

        switch ( type ) {
            case &#x27;s&#x27; :
            case &#x27;S&#x27; :
                return parseInt( (dtEnd - dtStart) / 1000 );
            case &#x27;m&#x27; :
                return parseInt( (dtEnd - dtStart) / 60000 );
            case &#x27;h&#x27; :
            case &#x27;H&#x27; :
                return parseInt( (dtEnd - dtStart) / 3600000 );
            case &#x27;d&#x27; :
            case &#x27;D&#x27; :
                return parseInt( (dtEnd - dtStart) / 86400000 );
            case &#x27;w&#x27; :
            case &#x27;W&#x27; :
                return parseInt( (dtEnd - dtStart) / (86400000 * 7) );
            case &#x27;M&#x27; :
                return (dtEnd.getMonth() + 1) + ((dtEnd.getFullYear() - dtStart.getFullYear()) * 12) - (dtStart.getMonth() + 1);
            case &#x27;y&#x27; :
            case &#x27;Y&#x27; :
                return dtEnd.getFullYear() - dtStart.getFullYear();
            default :
                var chaTime = (dtEnd.getTime() - dtStart.getTime()),
                    res = {};
                var Day_Param = 1000 * 60 * 60 * 24;//一天等于毫秒数
                var Hour_Param = 1000 * 60 * 60;//一小时等于毫秒数
                var Minu_Param = 1000 * 60;//一小时等于毫秒数
                var Sec_Param = 1000;//一小时等于毫秒数
                res.day = Math.floor( chaTime / Day_Param );//
                chaTime = chaTime - res.day * Day_Param;//减去天的毫秒数。再求小时个数
                res.hour = Math.floor( chaTime / (Hour_Param) );
                chaTime = chaTime - res.hour * Hour_Param;
                res.minu = Math.floor( chaTime / (Minu_Param) );
                chaTime = chaTime - res.minu * Minu_Param;
                res.sec = Math.floor( chaTime / (Sec_Param) );
                //chaTime = chaTime - res.sec * Sec_Param;
                return res;
        }
        ;
    };
    /**
     * 时间差，天数
     * @method diffDay
     * @return {string} 天数
     * @example
     * */
    Date.prototype.diffDay = function ( dtEnd  ) {
        return this.diff( dtEnd , &#x27;d&#x27; );
    };
    /**
     * 时间差，小时
     * @method diffHour
     * @return {string} 小时数
     * @example
     * */
    Date.prototype.diffHour = function ( dtEnd  ) {
        return this.diff( dtEnd ,  &#x27;h&#x27; );
    };
    /**
     * 时间差，分
     * @method diffMinu
     * @return {string} 分钟数
     * @example
     * */
    Date.prototype.diffMinu = function ( dtEnd  ) {
        return this.diff( dtEnd ,&#x27;m&#x27; );
    };
    /**
     * 时间差，秒
     * @method diffSec
     * @return {string} 秒钟数
     * @example
     * */
    Date.prototype.diffSec = function ( dtEnd  ) {
        return this.diff(  dtEnd , &#x27;s&#x27; );
    };
    /**
     * 获取周
     * @method week
     * @return {string} 周
     * @example
     * */
    Date.prototype.week = function ( ) {
        var str = &#x27;&#x27;;//this.toLocaleDateString();
        var Week = Date.lang.week;
        str += &#x27; \u661f\u671f&#x27; + Week[this.getDay()];
        return str;
    };
    /**
     * 把日期分割成数组
     * @method toArray
     * @return {array} 数组格式的时间
     * @example
     * */
    Date.prototype.toArray = function () {
        var myDate = this;
        var myArray = Array();
        myArray[0] = myDate.getFullYear();
        myArray[1] = myDate.getMonth();
        myArray[2] = myDate.getDate();
        myArray[3] = myDate.getHours();
        myArray[4] = myDate.getMinutes();
        myArray[5] = myDate.getSeconds();
        return myArray;
    };
    /**
     * 返回当前时间的星座
     * @method star
     * @return {string} 星座名称
     * @example
     * */
    Date.prototype.star = function () {
        var stars = [
            {&quot;name&quot; : &quot;\u6c34\u74f6\u5ea7&quot; , timeArea : &quot;1-20&amp;2-19&quot;},
            {&quot;name&quot; : &quot;\u53cc\u9c7c\u5ea7&quot; , timeArea : &quot;2-20&amp;3-20&quot;},
            {&quot;name&quot; : &quot;\u767d\u7f8a\u5ea7&quot; , timeArea : &quot;3-21&amp;4-20&quot;},
            {&quot;name&quot; : &quot;\u91d1\u725b\u5ea7&quot; , timeArea : &quot;4-21&amp;5-20&quot;},
            {&quot;name&quot; : &quot;\u53cc\u5b50\u5ea7&quot; , timeArea : &quot;5-21&amp;6-21&quot;},
            {&quot;name&quot; : &quot;\u5de8\u87f9\u5ea7&quot; , timeArea : &quot;6-21&amp;7-22&quot;},
            {&quot;name&quot; : &quot;\u72ee\u5b50\u5ea7&quot; , timeArea : &quot;7-23&amp;8-22&quot;},
            {&quot;name&quot; : &quot;\u72ee\u5b50\u5ea7&quot; , timeArea : &quot;8-23&amp;9-22&quot;},
            {&quot;name&quot; : &quot;\u5929\u79e4\u5ea7&quot; , timeArea : &quot;9-23&amp;10-22&quot;},
            {&quot;name&quot; : &quot;\u5929\u874e\u5ea7&quot; , timeArea : &quot;10-23&amp;11-21&quot;},
            {&quot;name&quot; : &quot;\u5c04\u624b\u5ea7&quot; , timeArea : &quot;11-21&amp;12-21&quot;},
            {&quot;name&quot; : &quot;\u9b54\u7faf\u5ea7&quot; , timeArea : &quot;12-22|1-19&quot;}
        ];
        var d = this,
            year = this.getYear(),
            month = this.getMonth() + 1,
            day = this.getDate();
        for ( var i = 0 ; i &lt; stars.length ; i ++ ) {
            var area = stars[i].timeArea.split( &#x27;&amp;&#x27; );
            if ( area.length &gt; 1 ) {
                var start = area[0].split( &#x27;-&#x27; );
                var end = area[1].split( &#x27;-&#x27; );
                var currentDate = new Date( year , month , day );
                var startDate = new Date( year , start[0] , start[1] );
                var endDate = new Date( year , end[0] , end[1] );
                if ( currentDate - startDate &gt; 0 &amp;&amp; currentDate - endDate &lt; 0 ) {
                    return stars[i].name;
                }
            }
            else {
                area = stars[i].timeArea.split( &#x27;|&#x27; );
                var start = area[0].split( &#x27;-&#x27; );
                var end = area[1].split( &#x27;-&#x27; );
                var currentDate = new Date( year , month , day );
                var startDate = new Date( year , start[0] , start[1] );
                var endDate = new Date( year , end[0] , end[1] );
                if ( currentDate - startDate &gt; 0 || currentDate - endDate &lt; 0 ) {
                    return stars[i].name;
                }
            }
        }
    };

})( window.Date );
    </pre>
</div>

                </div>
            </div>
        </div>
    </div>
<a id="gotoTop" class='well well-small' href='#'>
    Top
</a>
<script src="../assets/vendor/jquery/jquery-1.8.2.min.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/doc.js"></script>
</body>
</html>
