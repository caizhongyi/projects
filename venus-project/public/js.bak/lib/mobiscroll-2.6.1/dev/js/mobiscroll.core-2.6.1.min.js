/*
 * jQuery MobiScroll v2.6.1
 * http://mobiscroll.com
 *
 * Copyright 2010-2013, Acid Media
 * Licensed under the MIT license.
 *
 */
(function(e){function w(aD,aI){var aE,aM,ay,M,aH,J,aF,T,Z,F,aw,U,aq,P,av,ar,H,al,L,ac,aB,aL,ah,C,at,an,D,ax=this,V=e.mobiscroll,aK=aD,aJ=e(aK),az=v({},i),ap={},ak={},ao={},S={},X=[],E=aJ.is("input"),ai=false,Y=function(aO){if(a(aO)&&!m&&!aa(this)&&!av){aO.preventDefault();m=true;ar=az.mode!="clickpick";C=e(".dw-ul",this);I(C);H=ak[at]!==undefined;aB=H?ag(C):ao[at];al=b(aO,"Y");L=new Date();ac=al;aA(C,at,aB,0.001);if(ar){C.closest(".dwwl").addClass("dwa")}e(document).on(x,ab).on(l,aC)}},ab=function(aO){if(ar){aO.preventDefault();aO.stopPropagation();ac=b(aO,"Y");aA(C,at,o(aB+(al-ac)/aM,aL-1,ah+1))}H=true},aC=function(aU){var aR=new Date()-L,aQ=o(aB+(al-ac)/aM,aL-1,ah+1),aS,aV,aP,aT=C.offset().top;if(aR<300){aS=(ac-al)/aR;aV=(aS*aS)/az.speedUnit;if(ac-al<0){aV=-aV}}else{aV=ac-al}aP=Math.round(aB-aV/aM);if(!aV&&!H){var aW=Math.floor((ac-aT)/aM),aX=e(".dw-li",C).eq(aW),aO=ar;if(aN("onValueTap",[aX])!==false){aP=aW}else{aO=true}if(aO){aX.addClass("dw-hl");setTimeout(function(){aX.removeClass("dw-hl")},200)}}if(ar){N(C,aP,0,true,Math.round(aQ))}m=false;C=null;e(document).off(x,ab).off(l,aC)},af=function(aP){var aO=e(this);e(document).on(l,aj);if(!aO.hasClass("dwb-d")){aO.addClass("dwb-a")}setTimeout(function(){aO.blur()},10);if(aO.hasClass("dwwb")){if(a(aP)){au(aP,aO.closest(".dwwl"),aO.hasClass("dwwbp")?K:Q)}}},aj=function(aO){if(av){clearInterval(an);av=false}e(document).off(l,aj);e(".dwb-a",M).removeClass("dwb-a")},R=function(aO){if(aO.keyCode==38){au(aO,e(this),Q)}else{if(aO.keyCode==40){au(aO,e(this),K)}}},G=function(aO){if(av){clearInterval(an);av=false}},W=function(aP){if(!aa(this)){aP.preventDefault();aP=aP.originalEvent||aP;var aQ=aP.wheelDelta?(aP.wheelDelta/120):(aP.detail?(-aP.detail/3):0),aO=e(".dw-ul",this);I(aO);N(aO,Math.round(ao[at]-aQ),aQ<0?1:2)}};function au(aR,aO,aQ){aR.stopPropagation();aR.preventDefault();if(!av&&!aa(aO)&&!aO.hasClass("dwa")){av=true;var aP=aO.find(".dw-ul");I(aP);clearInterval(an);an=setInterval(function(){aQ(aP)},az.delay);aQ(aP)}}function aa(aO){if(e.isArray(az.readonly)){var aP=e(".dwwl",M).index(aO);return az.readonly[aP]}return az.readonly}function ad(aS){var aR='<div class="dw-bf">',aU=X[aS],aP=aU.values?aU:g(aU),aO=1,aV=aP.labels||[],aQ=aP.values,aT=aP.keys||aQ;e.each(aQ,function(aX,aW){if(aO%20==0){aR+='</div><div class="dw-bf">'}aR+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+aT[aX]+'"'+(aV[aX]?' aria-label="'+aV[aX]+'"':"")+' style="height:'+aM+"px;line-height:"+aM+'px;"><div class="dw-i">'+aW+"</div></div>";aO++});aR+="</div>";return aR}function I(aO){aL=e(".dw-li",aO).index(e(".dw-v",aO).eq(0));ah=e(".dw-li",aO).index(e(".dw-v",aO).eq(-1));at=e(".dw-ul",M).index(aO)}function B(aO){var aP=az.headerText;return aP?(typeof aP==="function"?aP.call(aK,aO):aP.replace(/\{value\}/i,aO)):""}function ae(){ax.temp=((E&&ax.val!==null&&ax.val!=aJ.val())||ax.values===null)?az.parseValue(aJ.val()||"",ax):ax.values.slice(0);am()}function ag(aQ){var aR=window.getComputedStyle?getComputedStyle(aQ[0]):aQ[0].style,aO,aP;if(k){e.each(["t","webkitT","MozT","OT","msT"],function(aT,aS){if(aR[aS+"ransform"]!==undefined){aO=aR[aS+"ransform"];return false}});aO=aO.split(")")[0].split(", ");aP=aO[13]||aO[5]}else{aP=aR.top.replace("px","")}return Math.round(aE-(aP/aM))}function O(aP,aO){clearTimeout(ak[aO]);delete ak[aO];aP.closest(".dwwl").removeClass("dwa")}function aA(aR,aO,aV,aU,aT){var aQ=(aE-aV)*aM,aS=aR[0].style,aP;if(aQ==S[aO]&&ak[aO]){return}if(aU&&aQ!=S[aO]){aN("onAnimStart",[M,aO,aU])}S[aO]=aQ;aS[n+"Transition"]="all "+(aU?aU.toFixed(3):0)+"s ease-out";if(k){aS[n+"Transform"]="translate3d(0,"+aQ+"px,0)"}else{aS.top=aQ+"px"}if(ak[aO]){O(aR,aO)}if(aU&&aT){aR.closest(".dwwl").addClass("dwa");ak[aO]=setTimeout(function(){O(aR,aO)},aU*1000)}ao[aO]=aV}function aG(aS,aP,aQ,aO,aR){if(aN("validate",[M,aP,aS])!==false){e(".dw-ul",M).each(function(aW){var a2=e(this),a1=e('.dw-li[data-val="'+ax.temp[aW]+'"]',a2),a3=e(".dw-li",a2),a0=a3.index(a1),aT=a3.length,aX=aW==aP||aP===undefined;if(!a1.hasClass("dw-v")){var aZ=a1,aY=a1,aV=0,aU=0;while(a0-aV>=0&&!aZ.hasClass("dw-v")){aV++;aZ=a3.eq(a0-aV)}while(a0+aU<aT&&!aY.hasClass("dw-v")){aU++;aY=a3.eq(a0+aU)}if(((aU<aV&&aU&&aO!==2)||!aV||(a0-aV<0)||aO==1)&&aY.hasClass("dw-v")){a1=aY;a0=a0+aU}else{a1=aZ;a0=a0-aV}}if(!(a1.hasClass("dw-sel"))||aX){ax.temp[aW]=a1.attr("data-val");e(".dw-sel",a2).removeClass("dw-sel");if(!az.multiple){e(".dw-sel",a2).removeAttr("aria-selected");a1.attr("aria-selected","true")}a1.addClass("dw-sel");aA(a2,aW,a0,aX?aS:0.1,aX?aR:false)}});ay=az.formatResult(ax.temp);if(az.display=="inline"){am(aQ,0,true)}else{e(".dwv",M).html(B(ay))}if(aQ){aN("onChange",[ay])}}}function aN(aQ,aP){var aO;aP.push(ax);e.each([aq.defaults,ap,aI],function(aS,aR){if(aR[aQ]){aO=aR[aQ].apply(aK,aP)}});return aO}function N(aW,aP,aR,aS,aT){aP=o(aP,aL,ah);var aV=e(".dw-li",aW).eq(aP),aO=aT===undefined?aP:aT,aU=at,aQ=aS?(aP==aO?0.1:Math.abs((aP-aO)*az.timeUnit)):0;ax.temp[aU]=aV.attr("data-val");aA(aW,aU,aP,aQ,aT);setTimeout(function(){aG(aQ,aU,true,aR,aT!==undefined)},10)}function K(aO){var aP=ao[at]+1;N(aO,aP>ah?aL:aP,1,true)}function Q(aO){var aP=ao[at]-1;N(aO,aP<aL?ah:aP,2,true)}function am(aR,aQ,aP,aO){if(ai&&!aP){aG(aQ)}ay=az.formatResult(ax.temp);if(!aO){ax.values=ax.temp.slice(0);ax.val=ay}if(aR){if(E){aJ.val(ay).trigger("change")}}}ax.position=function(a6){if(az.display=="inline"||(aH===e(window).width()&&aF===e(window).height()&&a6)||(aN("onPosition",[M])===false)){return}var aV,a1,aX,aW,a4,aZ,aY,a2,aP,a3,aO,aQ,a7=0,aS=0,a0=e(window).scrollTop(),aR=e(".dwwr",M),a5=e(".dw",M),aU={},aT=az.anchor===undefined?aJ:az.anchor;aH=e(window).width();aF=e(window).height();J=window.innerHeight;J=J||aF;if(/modal|bubble/.test(az.display)){e(".dwc",M).each(function(){aV=e(this).outerWidth(true);a7+=aV;aS=(aV>aS)?aV:aS});aV=a7>aH?aS:a7;aR.width(aV).css("white-space",a7>aH?"":"nowrap")}T=a5.outerWidth();Z=a5.outerHeight(true);F=Z<=J&&T<=aH;if(az.display=="modal"){a1=(aH-T)/2;aX=a0+(J-Z)/2}else{if(az.display=="bubble"){aQ=true;aP=e(".dw-arrw-i",M);aZ=aT.offset();aY=aZ.top;a2=aZ.left;aW=aT.outerWidth();a4=aT.outerHeight();a1=a2-(a5.outerWidth(true)-aW)/2;a1=a1>(aH-T)?(aH-(T+20)):a1;a1=a1>=0?a1:20;aX=aY-Z;if((aX<a0)||(aY>a0+J)){a5.removeClass("dw-bubble-top").addClass("dw-bubble-bottom");aX=aY+a4}else{a5.removeClass("dw-bubble-bottom").addClass("dw-bubble-top")}a3=aP.outerWidth();aO=a2+aW/2-(a1+(T-a3)/2);e(".dw-arr",M).css({left:o(aO,0,a3)})}else{aU.width="100%";if(az.display=="top"){aX=a0}else{if(az.display=="bottom"){aX=a0+J-Z}}}}aU.top=aX<0?0:aX;aU.left=a1;a5.css(aU);e(".dw-persp",M).height(0).height(aX+Z>e(document).height()?aX+Z:e(document).height());if(aQ&&((aX+Z>a0+J)||(aY>a0+J))){e(window).scrollTop(aX+Z-J)}};ax.enable=function(){az.disabled=false;if(E){aJ.prop("disabled",false)}};ax.disable=function(){az.disabled=true;if(E){aJ.prop("disabled",true)}};ax.setValue=function(aP,aR,aQ,aO){ax.temp=e.isArray(aP)?aP.slice(0):az.parseValue.call(aK,aP+"",ax);am(aR,aQ,false,aO)};ax.getValue=function(){return ax.values};ax.getValues=function(){var aO=[],aP;for(aP in ax._selectedValues){aO.push(ax._selectedValues[aP])}return aO};ax.changeWheel=function(aO,aR){if(M){var aP=0,aQ=aO.length;e.each(az.wheels,function(aT,aS){e.each(aS,function(aV,aU){if(e.inArray(aP,aO)>-1){X[aP]=aU;e(".dw-ul",M).eq(aP).html(ad(aP));aQ--;if(!aQ){ax.position();aG(aR,undefined,true);return false}}aP++});if(!aQ){return false}})}};ax.isVisible=function(){return ai};ax.tap=function(aR,aQ){var aP,aO;if(az.tap){aR.on("touchstart",function(aS){aS.preventDefault();aP=b(aS,"X");aO=b(aS,"Y")}).on("touchend",function(aS){if(Math.abs(b(aS,"X")-aP)<20&&Math.abs(b(aS,"Y")-aO)<20){aQ.call(this,aS)}u=true;setTimeout(function(){u=false},300)})}aR.on("click.dw",function(aS){if(!u){aQ.call(this,aS)}})};ax.show=function(aP){if(az.disabled||ai){return false}if(az.display=="top"){aw="slidedown"}if(az.display=="bottom"){aw="slideup"}ae();aN("onBeforeShow",[]);var aR,aO=0,aS="";if(aw&&!aP){aS="dw-"+aw+" dw-in"}var aQ='<div role="dialog" class="'+az.theme+" dw-"+az.display+(r?" dw"+r:"")+'">'+(az.display=="inline"?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+aS+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr"><div aria-live="assertive" class="dwv'+(az.headerText?"":" dw-hidden")+'"></div>')+'<div class="dwcc">';e.each(az.wheels,function(aU,aT){aQ+='<div class="dwc'+(az.mode!="scroller"?" dwpm":" dwsc")+(az.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';e.each(aT,function(aW,aV){X[aO]=aV;aR=aV.label!==undefined?aV.label:aW;aQ+='<td><div class="dwwl dwrc dwwl'+aO+'">'+(az.mode!="scroller"?'<div class="dwb-e dwwb dwwbp" style="height:'+aM+"px;line-height:"+aM+'px;"><span>+</span></div><div class="dwb-e dwwb dwwbm" style="height:'+aM+"px;line-height:"+aM+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+aR+'</div><div tabindex="0" aria-live="off" aria-label="'+aR+'" role="listbox" class="dwww"><div class="dww" style="height:'+(az.rows*aM)+"px;min-width:"+az.width+'px;"><div class="dw-ul">';aQ+=ad(aO);aQ+='</div><div class="dwwol"></div></div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>';aO++});aQ+="</tr></table></div></div>"});aQ+="</div>"+(az.display!="inline"?'<div class="dwbc'+(az.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb dwb-e" role="button" tabindex="0">'+az.setText+"</span></span>"+(az.button3?'<span class="dwbw dwb-n"><span class="dwb dwb-e" role="button" tabindex="0">'+az.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb dwb-e" role="button" tabindex="0">'+az.cancelText+"</span></span></div></div>":"")+"</div></div></div>";M=e(aQ);aG();aN("onMarkupReady",[M]);if(az.display!="inline"){M.appendTo("body");if(aw&&!aP){M.addClass("dw-trans");setTimeout(function(){M.removeClass("dw-trans").find(".dw").removeClass(aS)},350)}}else{if(aJ.is("div")){aJ.html(M)}else{M.insertAfter(aJ)}}aN("onMarkupInserted",[M]);ai=true;aq.init(M,ax);if(az.display!="inline"){ax.tap(e(".dwb-s span",M),function(){ax.select()});ax.tap(e(".dwb-c span",M),function(){ax.cancel()});if(az.button3){ax.tap(e(".dwb-n span",M),az.button3)}e(window).on("keydown.dw",function(aT){if(aT.keyCode==13){ax.select()}else{if(aT.keyCode==27){ax.cancel()}}});if(az.scrollLock){M.on("touchmove",function(aT){if(F){aT.preventDefault()}})}e("input,select,button").each(function(){if(!this.disabled){if(e(this).attr("autocomplete")){e(this).data("autocomplete",e(this).attr("autocomplete"))}e(this).addClass("dwtd").prop("disabled",true).attr("autocomplete","off")}});ax.position();e(window).on("orientationchange.dw resize.dw scroll.dw",function(aT){clearTimeout(U);U=setTimeout(function(){var aU=aT.type=="scroll";if((aU&&F)||!aU){ax.position(!aU)}},100)});ax.alert(az.ariaDesc)}e(".dwwl",M).on("DOMMouseScroll mousewheel",W).on(q,Y).on("keydown",R).on("keyup",G);M.on(q,".dwb-e",af).on("keydown",".dwb-e",function(aT){if(aT.keyCode==32){aT.preventDefault();aT.stopPropagation();e(this).click()}});aN("onShow",[M,ay])};ax.hide=function(aO,aP){if(!ai||aN("onClose",[ay,aP])===false){return false}e(".dwtd").each(function(){e(this).prop("disabled",false).removeClass("dwtd");if(e(this).data("autocomplete")){e(this).attr("autocomplete",e(this).data("autocomplete"))}else{e(this).removeAttr("autocomplete")}});if(M){if(az.display!="inline"&&aw&&!aO){M.addClass("dw-trans").find(".dw").addClass("dw-"+aw+" dw-out");setTimeout(function(){M.remove();M=null},350)}else{M.remove();M=null}e(window).off(".dw")}aJ.focus();S={};ai=false};ax.select=function(){if(ax.hide(false,"set")!==false){am(true,0,true);aN("onSelect",[ax.val])}};ax.alert=function(aO){d.text(aO);clearTimeout(p);p=setTimeout(function(){d.text("")},5000)};ax.cancel=function(){if(ax.hide(false,"cancel")!==false){aN("onCancel",[ax.val])}};ax.init=function(aO){aq=v({defaults:{},init:h},V.themes[aO.theme||az.theme]);P=V.i18n[aO.lang||az.lang];v(aI,aO);v(az,aq.defaults,P,aI);ax.settings=az;aJ.off(".dw");var aP=V.presets[az.preset];if(aP){ap=aP.call(aK,ax);v(az,ap,aI)}aE=Math.floor(az.rows/2);aM=az.height;aw=az.animate;if(ai){ax.hide()}if(az.display=="inline"){ax.show()}else{ae();if(E){if(D===undefined){D=aK.readOnly}aK.readOnly=true;if(az.showOnFocus){aJ.on("focus.dw",function(){ax.show()})}}if(az.showOnTap){ax.tap(aJ,function(){ax.show()})}}};ax.trigger=function(aO,aP){return aN(aO,aP)};ax.option=function(aO,aP){var aQ={};if(typeof aO==="object"){aQ=aO}else{aQ[aO]=aP}ax.init(aQ)};ax.destroy=function(){ax.hide();aJ.off(".dw");delete j[aK.id];if(E){aK.readOnly=D}};ax.getInst=function(){return ax};ax.values=null;ax.val=null;ax.temp=null;ax._selectedValues={};ax.init(aI)}function A(C){var B;for(B in C){if(z[C[B]]!==undefined){return true}}return false}function c(){var B=["Webkit","Moz","O","ms"],C;for(C in B){if(A([B[C]+"Transform"])){return"-"+B[C].toLowerCase()}}return""}function a(B){if(B.type==="touchstart"){f=true}else{if(f){f=false;return false}}return true}function b(C,E){var D=C.originalEvent,B=C.changedTouches;return B||(D&&D.changedTouches)?(D?D.changedTouches[0]["page"+E]:B[0]["page"+E]):C["page"+E]}function o(D,C,B){return Math.max(C,Math.min(D,B))}function g(B){var C={values:[],keys:[]};e.each(B,function(E,D){C.keys.push(E);C.values.push(D)});return C}function s(E,D,C){var B=E;if(typeof D==="object"){return E.each(function(){if(!this.id){t+=1;this.id="mobiscroll"+t}j[this.id]=new w(this,D)})}if(typeof D==="string"){E.each(function(){var F,G=j[this.id];if(G&&G[D]){F=G[D].apply(this,Array.prototype.slice.call(C,1));if(F!==undefined){B=F;return false}}})}return B}var m,u,f,p,d,y=new Date(),t=y.getTime(),j={},h=function(){},z=document.createElement("modernizr").style,k=A(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),r=c(),n=r.replace(/^\-/,"").replace("moz","Moz"),v=e.extend,q="touchstart mousedown",x="touchmove mousemove",l="touchend mouseup",i={width:70,height:40,rows:3,delay:300,disabled:false,readonly:false,showOnFocus:true,showOnTap:true,showLabel:true,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",ariaDesc:"Select a value",scrollLock:true,tap:true,speedUnit:0.0012,timeUnit:0.1,formatResult:function(B){return B.join(" ")},parseValue:function(F,E){var G=F.split(" "),B=[],C=0,D;e.each(E.settings.wheels,function(I,H){e.each(H,function(K,J){J=J.values?J:g(J);D=J.keys||J.values;if(e.inArray(G[C],D)!==-1){B.push(G[C])}else{B.push(D[0])}C++})});return B}};e(function(){d=e('<div class="dw-hidden" role="alert"></div>').appendTo("body")});e(document).on("mouseover mouseup mousedown click",function(B){if(u){B.stopPropagation();B.preventDefault();return false}});e.fn.mobiscroll=function(B){v(this,e.mobiscroll.shorts);return s(this,B,arguments)};e.mobiscroll=e.mobiscroll||{setDefaults:function(B){v(i,B)},presetShort:function(B){this.shorts[B]=function(C){return s(this,v(C,{preset:B}),arguments)}},has3d:k,shorts:{},presets:{},themes:{},i18n:{}};e.scroller=e.scroller||e.mobiscroll;e.fn.scroller=e.fn.scroller||e.fn.mobiscroll})(jQuery);