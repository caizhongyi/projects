(function(f){var c={setTimeout:typeof f.setTimeout!=="undefined",sessionStorage:(function(){var z="qunit-test-string";try{sessionStorage.setItem(z,z);sessionStorage.removeItem(z);return true}catch(A){return false}}())};var m=0,s=Object.prototype.toString,i=Object.prototype.hasOwnProperty;var b=function(A,z,C,B,D){this.name=A;this.testName=z;this.expected=C;this.async=B;this.callback=D;this.assertions=[]};b.prototype={init:function(){var B=p("qunit-tests");if(B){var A=document.createElement("strong");A.innerHTML="Running "+this.name;var z=document.createElement("li");z.appendChild(A);z.className="running";z.id=this.id="test-output"+m++;B.appendChild(z)}},setup:function(){if(this.module!=y.previousModule){if(y.previousModule){t("moduleDone",v,{name:y.previousModule,failed:y.moduleStats.bad,passed:y.moduleStats.all-y.moduleStats.bad,total:y.moduleStats.all})}y.previousModule=this.module;y.moduleStats={all:0,bad:0};t("moduleStart",v,{name:this.module})}else{if(y.autorun){t("moduleStart",v,{name:this.module})}}y.current=this;this.testEnvironment=x({setup:function(){},teardown:function(){}},this.moduleTestEnvironment);t("testStart",v,{name:this.testName,module:this.module});v.current_testEnvironment=this.testEnvironment;if(!y.pollution){u()}if(y.notrycatch){this.testEnvironment.setup.call(this.testEnvironment);return}try{this.testEnvironment.setup.call(this.testEnvironment)}catch(z){v.pushFailure("Setup failed on "+this.testName+": "+z.message,n(z,1))}},run:function(){y.current=this;var z=p("qunit-testresult");if(z){z.innerHTML="Running: <br/>"+this.name}if(this.async){v.stop()}if(y.notrycatch){this.callback.call(this.testEnvironment);return}try{this.callback.call(this.testEnvironment)}catch(A){v.pushFailure("Died on test #"+(this.assertions.length+1)+": "+A.message,n(A,1));u();if(y.blocking){v.start()}}},teardown:function(){y.current=this;if(y.notrycatch){this.testEnvironment.teardown.call(this.testEnvironment);return}else{try{this.testEnvironment.teardown.call(this.testEnvironment)}catch(z){v.pushFailure("Teardown failed on "+this.testName+": "+z.message,n(z,1))}}j()},finish:function(){y.current=this;if(this.expected!=null&&this.expected!=this.assertions.length){v.pushFailure("Expected "+this.expected+" assertions, but "+this.assertions.length+" were run")}else{if(this.expected==null&&!this.assertions.length){v.pushFailure("Expected at least one assertion, but none were run - call expect(0) to accept zero assertions.")}}var B=0,z=0,G,C,A=p("qunit-tests");y.stats.all+=this.assertions.length;y.moduleStats.all+=this.assertions.length;if(A){var D=document.createElement("ol");for(C=0;C<this.assertions.length;C++){var H=this.assertions[C];G=document.createElement("li");G.className=H.result?"pass":"fail";G.innerHTML=H.message||(H.result?"okay":"failed");D.appendChild(G);if(H.result){B++}else{z++;y.stats.bad++;y.moduleStats.bad++}}if(v.config.reorder&&c.sessionStorage){if(z){sessionStorage.setItem("qunit-test-"+this.module+"-"+this.testName,z)}else{sessionStorage.removeItem("qunit-test-"+this.module+"-"+this.testName)}}if(z===0){D.style.display="none"}var E=document.createElement("strong");E.innerHTML=this.name+" <b class='counts'>(<b class='failed'>"+z+"</b>, <b class='passed'>"+B+"</b>, "+this.assertions.length+")</b>";var F=document.createElement("a");F.innerHTML="Rerun";F.href=v.url({filter:a([E]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")});r(E,"click",function(){var I=E.nextSibling.nextSibling,J=I.style.display;I.style.display=J==="none"?"block":"none"});r(E,"dblclick",function(J){var I=J&&J.target?J.target:f.event.srcElement;if(I.nodeName.toLowerCase()=="span"||I.nodeName.toLowerCase()=="b"){I=I.parentNode}if(f.location&&I.nodeName.toLowerCase()==="strong"){f.location=v.url({filter:a([I]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")})}});G=p(this.id);G.className=z?"fail":"pass";G.removeChild(G.firstChild);G.appendChild(E);G.appendChild(F);G.appendChild(D)}else{for(C=0;C<this.assertions.length;C++){if(!this.assertions[C].result){z++;y.stats.bad++;y.moduleStats.bad++}}}v.reset();t("testDone",v,{name:this.testName,module:this.module,failed:z,passed:this.assertions.length-z,total:this.assertions.length})},queue:function(){var B=this;g(function(){B.init()});function z(){g(function(){B.setup()});g(function(){B.run()});g(function(){B.teardown()});g(function(){B.finish()})}var A=v.config.reorder&&c.sessionStorage&&+sessionStorage.getItem("qunit-test-"+this.module+"-"+this.testName);if(A){z()}else{g(z,true)}}};var v={module:function(z,A){y.currentModule=z;y.currentModuleTestEnviroment=A},asyncTest:function(z,A,B){if(arguments.length===2){B=A;A=null}v.test(z,A,B,true)},test:function(z,C,E,B){var A='<span class="test-name">'+k(z)+"</span>";if(arguments.length===2){E=C;C=null}if(y.currentModule){A='<span class="module-name">'+y.currentModule+"</span>: "+A}if(!e(y.currentModule+": "+z)){return}var D=new b(A,z,C,B,E);D.module=y.currentModule;D.moduleTestEnvironment=y.currentModuleTestEnviroment;D.queue()},expect:function(z){y.current.expected=z},ok:function(z,C){if(!y.current){throw new Error("ok() assertion outside test context, was "+d(2))}z=!!z;var A={result:z,message:C};C=k(C||(z?"okay":"failed"));if(!z){var B=d(2);if(B){A.source=B;C+='<table><tr class="test-source"><th>Source: </th><td><pre>'+k(B)+"</pre></td></tr></table>"}}t("log",v,A);y.current.assertions.push({result:z,message:C})},equal:function(B,A,z){v.push(A==B,B,A,z)},notEqual:function(B,A,z){v.push(A!=B,B,A,z)},deepEqual:function(B,A,z){v.push(v.equiv(B,A),B,A,z)},notDeepEqual:function(B,A,z){v.push(!v.equiv(B,A),B,A,z)},strictEqual:function(B,A,z){v.push(A===B,B,A,z)},notStrictEqual:function(B,A,z){v.push(A!==B,B,A,z)},raises:function(D,B,A){var E,z=false;if(typeof B==="string"){A=B;B=null}try{D.call(y.current.testEnvironment)}catch(C){E=C}if(E){if(!B){z=true}else{if(v.objectType(B)==="regexp"){z=B.test(E)}else{if(E instanceof B){z=true}else{if(B.call({},E)===true){z=true}}}}}v.ok(z,A)},start:function(z){y.semaphore-=z||1;if(y.semaphore>0){return}if(y.semaphore<0){y.semaphore=0}if(c.setTimeout){f.setTimeout(function(){if(y.semaphore>0){return}if(y.timeout){clearTimeout(y.timeout)}y.blocking=false;o(true)},13)}else{y.blocking=false;o(true)}},stop:function(z){y.semaphore+=z||1;y.blocking=true;if(y.testTimeout&&c.setTimeout){clearTimeout(y.timeout);y.timeout=f.setTimeout(function(){v.ok(false,"Test timed out");y.semaphore=1;v.start()},y.testTimeout)}}};(function(){function z(){}z.prototype=v;v=new z();v.constructor=z}());v.equals=function(){v.push(false,false,false,"QUnit.equals has been deprecated since 2009 (e88049a0), use QUnit.equal instead")};v.same=function(){v.push(false,false,false,"QUnit.same has been deprecated since 2009 (e88049a0), use QUnit.deepEqual instead")};var y={queue:[],blocking:true,hidepassed:false,reorder:true,altertitle:true,urlConfig:["noglobals","notrycatch"],begin:[],done:[],log:[],testStart:[],testDone:[],moduleStart:[],moduleDone:[]};(function(){var z=f.location||{search:"",protocol:"file:"},E=z.search.slice(1).split("&"),C=E.length,A={},D;if(E[0]){for(var B=0;B<C;B++){D=E[B].split("=");D[0]=decodeURIComponent(D[0]);D[1]=D[1]?decodeURIComponent(D[1]):true;A[D[0]]=D[1]}}v.urlParams=A;y.filter=A.filter;v.isLocal=z.protocol==="file:"}());if(typeof exports==="undefined"||typeof require==="undefined"){x(f,v);f.QUnit=v}x(v,{config:y,init:function(){x(y,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date(),updateRate:1000,blocking:false,autostart:true,autorun:false,filter:"",queue:[],semaphore:0});var B=p("qunit");if(B){B.innerHTML='<h1 id="qunit-header">'+k(document.title)+'</h1><h2 id="qunit-banner"></h2><div id="qunit-testrunner-toolbar"></div><h2 id="qunit-userAgent"></h2><ol id="qunit-tests"></ol>'}var C=p("qunit-tests"),A=p("qunit-banner"),z=p("qunit-testresult");if(C){C.innerHTML=""}if(A){A.className=""}if(z){z.parentNode.removeChild(z)}if(C){z=document.createElement("p");z.id="qunit-testresult";z.className="result";C.parentNode.insertBefore(z,C);z.innerHTML="Running...<br/>&nbsp;"}},reset:function(){if(f.jQuery){jQuery("#qunit-fixture").html(y.fixture)}else{var z=p("qunit-fixture");if(z){z.innerHTML=y.fixture}}},triggerEvent:function(B,z,A){if(document.createEvent){A=document.createEvent("MouseEvents");A.initMouseEvent(z,true,true,B.ownerDocument.defaultView,0,0,0,0,0,false,false,false,false,0,null);B.dispatchEvent(A)}else{if(B.fireEvent){B.fireEvent("on"+z)}}},is:function(z,A){return v.objectType(A)==z},objectType:function(A){if(typeof A==="undefined"){return"undefined"}if(A===null){return"null"}var z=s.call(A).match(/^\[object\s(.*)\]$/)[1]||"";switch(z){case"Number":if(isNaN(A)){return"nan"}return"number";case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return z.toLowerCase()}if(typeof A==="object"){return"object"}return undefined},push:function(z,F,D,C){if(!y.current){throw new Error("assertion outside test context, was "+d())}var B={result:z,message:C,actual:F,expected:D};C=k(C)||(z?"okay":"failed");C='<span class="test-message">'+C+"</span>";var A=C;if(!z){D=k(v.jsDump.parse(D));F=k(v.jsDump.parse(F));A+='<table><tr class="test-expected"><th>Expected: </th><td><pre>'+D+"</pre></td></tr>";if(F!=D){A+='<tr class="test-actual"><th>Result: </th><td><pre>'+F+"</pre></td></tr>";A+='<tr class="test-diff"><th>Diff: </th><td><pre>'+v.diff(D,F)+"</pre></td></tr>"}var E=d();if(E){B.source=E;A+='<tr class="test-source"><th>Source: </th><td><pre>'+k(E)+"</pre></td></tr>"}A+="</table>"}t("log",v,B);y.current.assertions.push({result:!!z,message:A})},pushFailure:function(B,C){var A={result:false,message:B};var z=k(B);if(C){A.source=C;z+='<table><tr class="test-source"><th>Source: </th><td><pre>'+k(C)+"</pre></td></tr></table>"}t("log",v,A);y.current.assertions.push({result:false,message:z})},url:function(B){B=x(x({},v.urlParams),B);var z="?",A;for(A in B){if(!i.call(B,A)){continue}z+=encodeURIComponent(A)+"="+encodeURIComponent(B[A])+"&"}return f.location.pathname+z.slice(0,-1)},extend:x,id:p,addEvent:r});x(v.constructor.prototype,{begin:q("begin"),done:q("done"),log:q("log"),testStart:q("testStart"),testDone:q("testDone"),moduleStart:q("moduleStart"),moduleDone:q("moduleDone")});if(typeof document==="undefined"||document.readyState==="complete"){y.autorun=true}v.load=function(){t("begin",v,{});var K=x({},y);v.init();x(y,K);y.blocking=false;var D="",E=y.urlConfig.length;for(var C=0,A;C<E;C++){A=y.urlConfig[C];y[A]=v.urlParams[A];D+='<label><input name="'+A+'" type="checkbox"'+(y[A]?' checked="checked"':"")+">"+A+"</label>"}var J=p("qunit-userAgent");if(J){J.innerHTML=navigator.userAgent}var I=p("qunit-header");if(I){I.innerHTML='<a href="'+v.url({filter:undefined})+'"> '+I.innerHTML+"</a> "+D;r(I,"change",function(L){var M={};M[L.target.name]=L.target.checked?true:undefined;f.location=v.url(M)})}var H=p("qunit-testrunner-toolbar");if(H){var z=document.createElement("input");z.type="checkbox";z.id="qunit-filter-pass";r(z,"click",function(){var L=document.getElementById("qunit-tests");if(z.checked){L.className=L.className+" hidepass"}else{var M=" "+L.className.replace(/[\n\t\r]/g," ")+" ";L.className=M.replace(/ hidepass /," ")}if(c.sessionStorage){if(z.checked){sessionStorage.setItem("qunit-filter-passed-tests","true")}else{sessionStorage.removeItem("qunit-filter-passed-tests")}}});if(y.hidepassed||c.sessionStorage&&sessionStorage.getItem("qunit-filter-passed-tests")){z.checked=true;var F=document.getElementById("qunit-tests");F.className=F.className+" hidepass"}H.appendChild(z);var G=document.createElement("label");G.setAttribute("for","qunit-filter-pass");G.innerHTML="Hide passed tests";H.appendChild(G)}var B=p("qunit-fixture");if(B){y.fixture=B.innerHTML}if(y.autostart){v.start()}};r(f,"load",v.load);f.onerror=function(B,A,z){if(v.config.current){v.pushFailure(B,A+":"+z)}else{v.test("global failure",function(){v.pushFailure(B,A+":"+z)})}};function l(){y.autorun=true;if(y.currentModule){t("moduleDone",v,{name:y.currentModule,failed:y.moduleStats.bad,passed:y.moduleStats.all-y.moduleStats.bad,total:y.moduleStats.all})}var z=p("qunit-banner"),D=p("qunit-tests"),E=+new Date()-y.started,F=y.stats.all-y.stats.bad,C=["Tests completed in ",E," milliseconds.<br/>",'<span class="passed">',F,'</span> tests of <span class="total">',y.stats.all,'</span> passed, <span class="failed">',y.stats.bad,"</span> failed."].join("");if(z){z.className=(y.stats.bad?"qunit-fail":"qunit-pass")}if(D){p("qunit-testresult").innerHTML=C}if(y.altertitle&&typeof document!=="undefined"&&document.title){document.title=[(y.stats.bad?"\u2716":"\u2714"),document.title.replace(/^[\u2714\u2716] /i,"")].join(" ")}if(y.reorder&&c.sessionStorage&&y.stats.bad===0){var B;for(var A=0;A<sessionStorage.length;A++){B=sessionStorage.key(A++);if(B.indexOf("qunit-test-")===0){sessionStorage.removeItem(B)}}}t("done",v,{failed:y.stats.bad,passed:F,total:y.stats.all,runtime:E})}function e(z){var A=y.filter,C=false;if(!A){return true}var B=A.charAt(0)==="!";if(B){A=A.slice(1)}if(z.indexOf(A)!==-1){return !B}if(B){C=true}return C}function n(A,B){B=B||3;if(A.stacktrace){return A.stacktrace.split("\n")[B+3]}else{if(A.stack){var z=A.stack.split("\n");if(/^error$/i.test(z[0])){z.shift()}return z[B]}else{if(A.sourceURL){if(/qunit.js$/.test(A.sourceURL)){return}return A.sourceURL+":"+A.line}}}}function d(A){try{throw new Error()}catch(z){return n(z,A)}}function k(z){if(!z){return""}z=z+"";return z.replace(/[\&<>]/g,function(A){switch(A){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return A}})}function g(A,z){y.queue.push(A);if(y.autorun&&!y.blocking){o(z)}}function o(A){function z(){o(A)}var B=new Date().getTime();y.depth=y.depth?y.depth+1:1;while(y.queue.length&&!y.blocking){if(!c.setTimeout||y.updateRate<=0||((new Date().getTime()-B)<y.updateRate)){y.queue.shift()()}else{f.setTimeout(z,13);break}}y.depth--;if(A&&!y.blocking&&!y.queue.length&&y.depth===0){l()}}function u(){y.pollution=[];if(y.noglobals){for(var z in f){if(!i.call(f,z)){continue}y.pollution.push(z)}}}function j(B){var A=y.pollution;u();var z=h(y.pollution,A);if(z.length>0){v.pushFailure("Introduced global variable(s): "+z.join(", "))}var C=h(A,y.pollution);if(C.length>0){v.pushFailure("Deleted global variable(s): "+C.join(", "))}}function h(B,A){var z=B.slice();for(var D=0;D<z.length;D++){for(var C=0;C<A.length;C++){if(z[D]===A[C]){z.splice(D,1);D--;break}}}return z}function x(A,z){for(var B in z){if(z[B]===undefined){delete A[B]}else{if(B!=="constructor"||A!==f){A[B]=z[B]}}}return A}function r(B,A,z){if(B.addEventListener){B.addEventListener(A,z,false)}else{if(B.attachEvent){B.attachEvent("on"+A,z)}else{z()}}}function p(z){return !!(typeof document!=="undefined"&&document&&document.getElementById)&&document.getElementById(z)}function q(z){return function(A){y[z].push(A)}}function t(B,C,z){var D;if(v.hasOwnProperty(B)){v[B].call(C,z)}else{D=y[B];for(var A=0;A<D.length;A++){D[A].call(C,z)}}}v.equiv=(function(){var D;var E=[];var A=[];function C(H,G,F){var I=v.objectType(H);if(I){if(v.objectType(G[I])==="function"){return G[I].apply(G,F)}else{return G[I]}}}var z=Object.getPrototypeOf||function(F){return F.__proto__};var B=(function(){function F(G,H){if(G instanceof H.constructor||H instanceof G.constructor){return H==G}else{return H===G}}return{string:F,"boolean":F,number:F,"null":F,"undefined":F,nan:function(G){return isNaN(G)},date:function(G,H){return v.objectType(G)==="date"&&H.valueOf()===G.valueOf()},regexp:function(G,H){return v.objectType(G)==="regexp"&&H.source===G.source&&H.global===G.global&&H.ignoreCase===G.ignoreCase&&H.multiline===G.multiline},"function":function(){var G=E[E.length-1];return G!==Object&&typeof G!=="undefined"},array:function(H,J){var L,K,I;var G;if(v.objectType(H)!=="array"){return false}G=J.length;if(G!==H.length){return false}A.push(J);for(L=0;L<G;L++){I=false;for(K=0;K<A.length;K++){if(A[K]===J[L]){I=true}}if(!I&&!D(J[L],H[L])){A.pop();return false}}A.pop();return true},object:function(H,J){var M,K,I;var G=true;var L=[],N=[];if(J.constructor!==H.constructor){if(!((z(J)===null&&z(H)===Object.prototype)||(z(H)===null&&z(J)===Object.prototype))){return false}}E.push(J.constructor);A.push(J);for(M in J){I=false;for(K=0;K<A.length;K++){if(A[K]===J[M]){I=true}}L.push(M);if(!I&&!D(J[M],H[M])){G=false;break}}E.pop();A.pop();for(M in H){N.push(M)}return G&&D(L.sort(),N.sort())}}}());D=function(){var F=Array.prototype.slice.apply(arguments);if(F.length<2){return true}return(function(H,G){if(H===G){return true}else{if(H===null||G===null||typeof H==="undefined"||typeof G==="undefined"||v.objectType(H)!==v.objectType(G)){return false}else{return C(H,B,[G,H])}}}(F[0],F[1])&&arguments.callee.apply(this,F.splice(1,F.length-1)))};return D}());v.jsDump=(function(){function z(F){return'"'+F.toString().replace(/"/g,'\\"')+'"'}function A(F){return F+""}function C(K,F,H){var I=B.separator(),J=B.indent(),G=B.indent(1);if(F.join){F=F.join(","+I+G)}if(!F){return K+H}return[K,G+F,J+H].join(I)}function E(G,F){var I=G.length,H=new Array(I);this.up();while(I--){H[I]=this.parse(G[I],undefined,F)}this.down();return C("[",H,"]")}var D=/^function (\w+)/;var B={parse:function(J,H,F){F=F||[];var K=this.parsers[H||this.typeOf(J)];H=typeof K;var I=w(J,F);if(I!=-1){return"recursion("+(I-F.length)+")"}if(H=="function"){F.push(J);var G=K.call(this,J,F);F.pop();return G}return(H=="string")?K:this.parsers.error},typeOf:function(G){var F;if(G===null){F="null"}else{if(typeof G==="undefined"){F="undefined"}else{if(v.is("RegExp",G)){F="regexp"}else{if(v.is("Date",G)){F="date"}else{if(v.is("Function",G)){F="function"}else{if(typeof G.setInterval!==undefined&&typeof G.document!=="undefined"&&typeof G.nodeType==="undefined"){F="window"}else{if(G.nodeType===9){F="document"}else{if(G.nodeType){F="node"}else{if(s.call(G)==="[object Array]"||(typeof G.length==="number"&&typeof G.item!=="undefined"&&(G.length?G.item(0)===G[0]:(G.item(0)===null&&typeof G[0]==="undefined")))){F="array"}else{F=typeof G}}}}}}}}}return F},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(F){if(!this.multiline){return""}var G=this.indentChar;if(this.HTML){G=G.replace(/\t/g,"   ").replace(/ /g,"&nbsp;")}return new Array(this._depth_+(F||0)).join(G)},up:function(F){this._depth_+=F||1},down:function(F){this._depth_-=F||1},setParser:function(F,G){this.parsers[F]=G},quote:z,literal:A,join:C,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null","undefined":"undefined","function":function(H){var G="function",F="name" in H?H.name:(D.exec(H)||[])[1];if(F){G+=" "+F}G+="(";G=[G,v.jsDump.parse(H,"functionArgs"),"){"].join("");return C(G,v.jsDump.parse(H,"functionCode"),"}")},array:E,nodelist:E,"arguments":E,object:function(K,F){var G=[],J,I,L,H;v.jsDump.up();if(Object.keys){J=Object.keys(K)}else{J=[];for(I in K){J.push(I)}}J.sort();for(H=0;H<J.length;H++){I=J[H];L=K[I];G.push(v.jsDump.parse(I,"key")+": "+v.jsDump.parse(L,undefined,F))}v.jsDump.down();return C("{",G,"}")},node:function(J){var I=v.jsDump.HTML?"&lt;":"<",L=v.jsDump.HTML?"&gt;":">";var F=J.nodeName.toLowerCase(),H=I+F;for(var G in v.jsDump.DOMAttrs){var K=J[v.jsDump.DOMAttrs[G]];if(K){H+=" "+G+"="+v.jsDump.parse(K,"attribute")}}return H+L+I+"/"+F+L},functionArgs:function(H){var F=H.length;if(!F){return""}var G=new Array(F);while(F--){G[F]=String.fromCharCode(97+F)}return" "+G.join(", ")+" "},key:z,functionCode:"[code]",attribute:z,string:z,date:z,regexp:A,number:A,"boolean":A},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:false,indentChar:"  ",multiline:true};return B}());function a(z){var A="",C;for(var B=0;z[B];B++){C=z[B];if(C.nodeType===3||C.nodeType===4){A+=C.nodeValue}else{if(C.nodeType!==8){A+=a(C.childNodes)}}}return A}function w(B,C){if(C.indexOf){return C.indexOf(B)}for(var z=0,A=C.length;z<A;z++){if(C[z]===B){return z}}return -1}v.diff=(function(){function z(D,E){var B={};var C={};var A;for(A=0;A<E.length;A++){if(B[E[A]]==null){B[E[A]]={rows:[],o:null}}B[E[A]].rows.push(A)}for(A=0;A<D.length;A++){if(C[D[A]]==null){C[D[A]]={rows:[],n:null}}C[D[A]].rows.push(A)}for(A in B){if(!i.call(B,A)){continue}if(B[A].rows.length==1&&typeof(C[A])!="undefined"&&C[A].rows.length==1){E[B[A].rows[0]]={text:E[B[A].rows[0]],row:C[A].rows[0]};D[C[A].rows[0]]={text:D[C[A].rows[0]],row:B[A].rows[0]}}}for(A=0;A<E.length-1;A++){if(E[A].text!=null&&E[A+1].text==null&&E[A].row+1<D.length&&D[E[A].row+1].text==null&&E[A+1]==D[E[A].row+1]){E[A+1]={text:E[A+1],row:E[A].row+1};D[E[A].row+1]={text:D[E[A].row+1],row:A+1}}}for(A=E.length-1;A>0;A--){if(E[A].text!=null&&E[A-1].text==null&&E[A].row>0&&D[E[A].row-1].text==null&&E[A-1]==D[E[A].row-1]){E[A-1]={text:E[A-1],row:E[A].row-1};D[E[A].row-1]={text:D[E[A].row-1],row:A-1}}}return{o:D,n:E}}return function(G,H){G=G.replace(/\s+$/,"");H=H.replace(/\s+$/,"");var B=z(G===""?[]:G.split(/\s+/),H===""?[]:H.split(/\s+/));var F="";var D;var A=G.match(/\s+/g);if(A==null){A=[" "]}else{A.push(" ")}var C=H.match(/\s+/g);if(C==null){C=[" "]}else{C.push(" ")}if(B.n.length===0){for(D=0;D<B.o.length;D++){F+="<del>"+B.o[D]+A[D]+"</del>"}}else{if(B.n[0].text==null){for(H=0;H<B.o.length&&B.o[H].text==null;H++){F+="<del>"+B.o[H]+A[H]+"</del>"}}for(D=0;D<B.n.length;D++){if(B.n[D].text==null){F+="<ins>"+B.n[D]+C[D]+"</ins>"}else{var E="";for(H=B.n[D].row+1;H<B.o.length&&B.o[H].text==null;H++){E+="<del>"+B.o[H]+A[H]+"</del>"}F+=" "+B.n[D].text+C[D]+E}}}return F}}());if(typeof exports!=="undefined"||typeof require!=="undefined"){x(exports,v)}}((function(){return this}.call())));